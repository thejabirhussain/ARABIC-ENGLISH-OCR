<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph - Rohkun</title>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* v2.0 Cyber-Professional Palette */
            --bg: #050505;  /* Deep black - Obsidian */
            --bg-panel: rgba(10, 10, 10, 0.8);
            --text-primary: #E5E5E5;  /* Off-white */
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --accent: #7c3aed;
            --accent-light: #8b5cf6;
            --accent-dark: #6d28d9;
            --border: #1f2937;
            --border-light: #374151;
            --success: #00FF94;  /* Neon Mint */
            --error: #FF003C;  /* Cyberpunk Red */
            --warning: #FFE600;  /* Electric Yellow */
            
            /* Neon Colors */
            --neon-mint: #00FF94;
            --neon-yellow: #FFE600;
            --neon-pink: #BC13FE;
            --neon-cyan: #00F0FF;
            
            --mouse-x: 50%;
            --mouse-y: 50%;
        }
        
        body {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            background: var(--bg);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
            position: relative;
            /* Font smoothing for small text (Consultant Recommendation) */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-smooth: always;
        }
        
        /* Texture Overlay - Subtle noise texture */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 0;
            mix-blend-mode: screen;
        }
        
        /* Dynamic Grid Background - Follows mouse cursor */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(124, 58, 237, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(124, 58, 237, 0.3) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -2;
            mask-image: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), black 0%, transparent 80%);
            -webkit-mask-image: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), black 0%, transparent 80%);
            opacity: 0.8;
            pointer-events: none;
        }
        
        /* Base Grid Background - Static */
        .bg-grid-base {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(#151515 1px, transparent 1px),
                linear-gradient(90deg, #151515 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -3;
            opacity: 0.3;
            pointer-events: none;
        }
        
        /* Spotlight Effect */
        .spotlight-static {
            position: fixed;
            width: 1200px;
            height: 1200px;
            background: radial-gradient(circle, rgba(124, 58, 237, 0.08) 0%, transparent 60%);
            pointer-events: none;
            z-index: -1;
            filter: blur(80px);
            top: -30%;
            left: -10%;
            animation: pulseLight 8s ease-in-out infinite alternate;
        }
        
        @keyframes pulseLight {
            0% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        #network-container {
            width: 100%;
            height: 100vh;
            position: relative;
            z-index: 2;
        }
        
        /* Edge Animation Canvas Overlay for Moving Dashed Lines */
        #edge-animation-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
        }
        
        /* --- HEADER (From Landing Page) --- */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(3, 3, 3, 0.85);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        .header-inner {
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0 24px;
            margin: 0 auto;
        }
        .logo {
            font-weight: 800;
            font-size: 1.2rem;
            letter-spacing: -1px;
            text-transform: uppercase;
            display: flex; align-items: center; gap: 6px;
            color: #fff; text-decoration: none;
            cursor: default;
        }
        .logo::before { 
            content: ">"; 
            color: var(--accent); 
            margin-right: 2px;
            text-shadow: 0 0 12px var(--accent);
        }
        .nav-link {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-left: 2rem;
            padding: 8px 0;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            letter-spacing: 1px;
            position: relative;
            transition: all 0.2s;
            text-transform: uppercase;
        }
        .nav-link:hover { color: #fff; text-shadow: 0 0 8px rgba(255,255,255,0.5); }
        
        .nav-link::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px;
            background: var(--accent); transition: width 0.3s ease;
            box-shadow: 0 0 8px var(--accent);
        }
        .nav-link:hover::after { width: 100%; }
        
        .nav-link.active {
            color: #fff;
            text-shadow: 0 0 10px var(--accent-glow);
        }
        .nav-link.active::after {
            width: 100%;
        }

        /* Adjust container offsets since header is fixed */
        #info-panel {
            top: 80px; /* Below header */
        }
        #graph-toggle {
            display: none; /* Hide old toggle */
        }
        
        /* Graph Toggle - Top Right Corner (Legacy - Hidden) */
        
        /* Info Panel - Top Left (Quant Style) - Glassmorphism (Consultant Standard) */
        #info-panel {
            position: fixed;
            top: 80px; /* Adjusted for Header */
            left: 20px;
            background: rgba(5, 5, 5, 0.85);
            border: 1px solid var(--border);
            border-left: 3px solid var(--accent);
            border-radius: 4px;
            padding: 16px;
            max-width: 300px;
            z-index: 100;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            will-change: transform, opacity;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
        }
        
        #info-panel.hidden {
            transform: translateX(-120%);
            opacity: 0.5;
            pointer-events: none;
        }
        
        /* Panel Toggle Button */
        #panel-toggle {
            position: fixed;
            top: 80px;
            left: 20px;
            width: 32px;
            height: 32px;
            background: rgba(5, 5, 5, 0.85);
            border: 1px solid var(--border);
            border-radius: 4px;
            z-index: 99; /* Behind panel when open */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-weight: bold;
            transition: all 0.2s ease;
            opacity: 0; /* Hidden when panel is open */
            pointer-events: none;
        }
        
        #panel-toggle.visible {
            opacity: 1;
            pointer-events: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        #panel-toggle:hover {
            background: rgba(20, 20, 30, 0.95);
            box-shadow: 0 0 10px var(--accent-glow);
            border-color: var(--accent);
        }
        
        /* Close Button inside Panel */
        .panel-close-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            padding: 4px;
            transition: color 0.2s;
        }
        .panel-close-btn:hover {
            color: var(--accent);
        }
        
        #info-panel h1 {
            font-size: 14px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        #info-panel h1::before {
            content: '>';
            color: var(--accent);
            font-weight: bold;
        }
        
        #info-panel .stat {
            margin: 8px 0;
            font-size: 11px;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
            padding-bottom: 2px;
        }
        
        #info-panel .stat strong {
            color: var(--text-muted);
            font-weight: 500;
        }
        
        #info-panel .stat .value {
            color: var(--accent-light);
            font-weight: 600;
            text-shadow: 0 0 10px rgba(124, 58, 237, 0.3);
        }
        
        /* Legend - Bottom Right - Glassmorphism */
        #legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(5, 5, 5, 0.85);
            border: 1px solid var(--border);
            border-right: 3px solid var(--accent);
            border-radius: 4px;
            padding: 16px;
            z-index: 100;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            font-size: 10px;
            max-width: 220px;
        }
        
        #legend h3 {
            color: var(--text-primary);
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 1px solid var(--border);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
        }
        
        #legend .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            gap: 10px;
        }
        
        #legend .legend-color {
            width: 8px;
            height: 8px;
            /* border-radius: 2px; Square dots look more technical */
            border: none;
            flex-shrink: 0;
            box-shadow: 0 0 8px currentColor;
            position: relative;
        }
        
        #legend .legend-color::after {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            border: 1px solid currentColor;
            opacity: 0.3;
        }
        
        /* Search - Top Center - Glassmorphism */
        #search-box {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
            z-index: 100;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px); /* Safari support */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        #search-box input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            outline: none;
            width: 250px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        #search-box input::placeholder {
            color: var(--text-muted);
        }
        
        /* Node Info - Bottom Left (replaces console when node clicked) - Glassmorphism */
        /* Node Info - Bottom Left (replaces console when node clicked) - Glassmorphism - Styled like info panel */
        #node-info {
            position: absolute;
            bottom: 80px;
            left: 20px;
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px;
            max-width: 320px;
            z-index: 100;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px); /* Safari support */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3), 0 0 20px rgba(124, 58, 237, 0.2);
            display: none;
            font-family: 'JetBrains Mono', monospace;
        }
        
        #node-info.visible {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #node-info h3 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 6px;
        }
        
        #node-info .stat {
            margin: 6px 0;
            font-size: 10px;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        #node-info .stat strong {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        #node-info .stat .value {
            color: var(--accent-light);
            font-weight: 600;
        }
        
        #node-info p {
            font-size: 10px;
            color: var(--text-secondary);
            margin: 6px 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            justify-content: space-between;
        }
        
        #node-info p strong {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-panel);
            border: 1px solid var(--success);
            border-radius: 6px;
            padding: 12px 16px;
            z-index: 10000;
            display: none;
            backdrop-filter: blur(20px);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(0, 255, 148, 0.3);
        }
        
        .toast.visible {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1000;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--text-secondary);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Diff Mode Panel */
        #diff-panel {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-panel);
            border: 1px solid var(--accent);
            border-radius: 6px;
            padding: 16px;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            min-width: 400px;
        }
        
        #diff-panel h3 {
            color: var(--accent);
            margin-bottom: 12px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #snapshot-selector {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        #snapshot-dropdowns {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }
        
        .snapshot-select {
            flex: 1;
        }
        
        .snapshot-select label {
            display: block;
            color: var(--text-secondary);
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .snapshot-select select {
            width: 100%;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 6px 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            outline: none;
        }
        
        .snapshot-select select:focus {
            border-color: var(--accent);
        }
        
        #compare-btn {
            background: var(--accent);
            color: var(--text-primary);
            border: none;
            border-radius: 4px;
            padding: 6px 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        #compare-btn:hover {
            background: var(--accent-light);
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
        }
        
        /* Diff Summary Panel */
        #diff-summary {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px;
            max-width: 300px;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        #diff-summary h3 {
            color: var(--accent);
            margin-bottom: 12px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .diff-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }
        
        .diff-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .diff-item-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }
        
        .diff-item-icon {
            font-size: 14px;
        }
        
        .diff-item-label {
            color: var(--text-primary);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            flex: 1;
        }
        
        .risk-badge {
            background: var(--error);
            color: var(--text-primary);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .impact-bar {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 4px;
        }
        
        .impact-bar-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        .impact-bar-fill.added {
            background: #00FFA3;
        }
        
        .impact-bar-fill.removed {
            background: #FF1744;
        }
        
        .impact-bar-fill.changed {
            background: #FFB300;
        }
        
        .diff-item-details {
            color: var(--text-secondary);
            font-size: 9px;
            margin-top: 4px;
            line-height: 1.4;
        }
        
        /* Floating Filter Pills */
        #diff-filters {
            position: sticky;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            gap: 8px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 0 auto;
            width: fit-content;
        }
        
        .filter-pill {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid transparent;
            background: transparent;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .filter-pill:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }
        
        .filter-pill.active {
            border-color: var(--accent);
            color: var(--text-primary);
            box-shadow: 0 0 20px rgba(124, 58, 237, 0.5);
        }
        
        .pill-icon {
            font-size: 12px;
        }
        
        .pill-badge {
            background: var(--accent);
            color: var(--text-primary);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 8px;
            min-width: 18px;
            text-align: center;
        }
        
        /* Snapshot Mode - Hide UI elements */
        .snapshot-mode #graph-toggle,
        .snapshot-mode #search-box,
        .snapshot-mode #controls,
        .snapshot-mode #legend,
        .snapshot-mode #console-log,
        .snapshot-mode #node-info,
        .snapshot-mode #diff-panel,
        .snapshot-mode #diff-summary,
        .snapshot-mode #diff-filters {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Focus Mode - Dim non-selected nodes */
        .focus-mode .vis-network {
            filter: brightness(0.2);
        }
        
        .focus-mode .vis-network .vis-node.selected,
        .focus-mode .vis-network .vis-node.neighbor {
            filter: brightness(1.5);
        }
        
        /* Watermark for snapshot */
        .watermark {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 16px;
            z-index: 10001;
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: none;
        }
        
        .snapshot-mode .watermark {
            display: block;
        }
        
        /* Diff Mode Animations (Consultation Standards) */
        @keyframes bloom-in {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes fade-to-history {
            0% {
                opacity: 1;
                filter: blur(0px);
            }
            100% {
                opacity: 0.4;
                filter: blur(2px);
            }
        }
        
        @keyframes ripple-change {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 179, 0, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(255, 179, 0, 0);
            }
        }
        
        /* High Impact Node Pulse Animation (CSS-based for performance - Consultant Optimization) */
        /* Using transform/opacity instead of box-shadow animation for better performance */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.9;
            }
        }
        
        .high-impact-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* Apply animations to vis.js nodes via class */
        .vis-network .vis-node.node-added {
            animation: bloom-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .vis-network .vis-node.node-removed {
            animation: fade-to-history 0.8s ease-out forwards;
        }
        
        .vis-network .vis-node.node-changed {
            animation: ripple-change 2s ease-out infinite;
        }
        
        /* Also apply to node elements directly */
        .node-added {
            animation: bloom-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .node-removed {
            animation: fade-to-history 0.8s ease-out forwards;
        }
        
        .node-changed {
            animation: ripple-change 2s ease-out infinite;
        }
        
        /* Edge animations */
        .vis-network .vis-edge.added-edge {
            animation: trace-path 1s ease-out;
        }
        
        @keyframes trace-path {
            0% {
                opacity: 0;
                stroke-dasharray: 5, 5;
            }
            100% {
                opacity: 1;
                stroke-dasharray: none;
            }
        }
        
        /* Graveyard Zone for Removed Nodes (Second Consultation Specification) */
        .graveyard-zone {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 120px;
            background: rgba(255, 23, 68, 0.05);
            border-top: 1px solid var(--error);
            z-index: 100;
            padding: 12px 16px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            display: none; /* Hidden by default, shown when removed nodes exist */
        }
        
        .graveyard-zone.visible {
            display: block;
        }
        
        .graveyard-zone.collapsed {
            height: 40px;
            overflow: hidden;
        }
        
        .graveyard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
            user-select: none;
        }
        
        .graveyard-header h4 {
            color: var(--error);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .graveyard-count {
            background: var(--error);
            color: var(--text-primary);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 8px;
            font-weight: 600;
        }
        
        .graveyard-toggle {
            color: var(--text-secondary);
            font-size: 12px;
            transition: transform 0.2s;
        }
        
        .graveyard-zone.collapsed .graveyard-toggle {
            transform: rotate(-90deg);
        }
        
        .graveyard-items {
            display: flex;
            flex-direction: column;
            gap: 4px;
            max-height: 80px;
            overflow-y: auto;
        }
        
        .graveyard-item {
            padding: 6px 10px;
            background: rgba(255, 23, 68, 0.1);
            border-left: 2px solid var(--error);
            border-radius: 4px;
            font-size: 9px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .graveyard-item:hover {
            background: rgba(255, 23, 68, 0.2);
            color: var(--text-primary);
            border-left-width: 3px;
        }
        
        .graveyard-item-label {
            flex: 1;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .graveyard-item-deps {
            color: var(--error);
            font-size: 8px;
            margin-left: 8px;
        }
        
        .graveyard-item-action {
            background: transparent;
            border: 1px solid var(--error);
            color: var(--error);
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 8px;
            cursor: pointer;
            margin-left: 8px;
            transition: all 0.2s;
        }
        
        .graveyard-item-action:hover {
            background: var(--error);
            color: var(--text-primary);
        }
        
        .graveyard-empty {
            text-align: center;
            color: var(--text-muted);
            font-size: 9px;
            padding: 20px;
        }
        
        /* Timeline Scrubber (Consultation Standard) */
        .timeline-container {
            position: relative;
            width: 100%;
            height: 60px;
            margin: 16px 0;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 8px;
        }
        
        .timeline-track {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, var(--border) 0%, var(--border-light) 50%, var(--border) 100%);
            border-radius: 2px;
        }
        
        .timeline-marker {
            position: absolute;
            top: 0;
            width: 2px;
            height: 100%;
            background: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .timeline-marker:hover {
            background: var(--accent);
            width: 3px;
        }
        
        .timeline-marker.selected {
            background: var(--accent);
            width: 4px;
        }
        
        .timeline-marker-label {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 8px;
            color: var(--text-secondary);
            white-space: nowrap;
            pointer-events: none;
        }
        
        .timeline-handle {
            position: absolute;
            top: -8px;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border: 2px solid var(--bg);
            border-radius: 50%;
            cursor: grab;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
            transition: all 0.2s;
        }
        
        .timeline-handle:active {
            cursor: grabbing;
            transform: translateX(-50%) scale(1.2);
        }
        
        .timeline-handle.previous {
            background: var(--error);
            box-shadow: 0 0 10px rgba(255, 23, 68, 0.5);
        }
        
        .timeline-handle.current {
            background: var(--success);
            box-shadow: 0 0 10px rgba(0, 255, 148, 0.5);
        }
        
        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 9px;
            color: var(--text-secondary);
        }
        
        /* Diff Storytelling Panel */
        #diff-story-panel {
            position: absolute;
            top: 200px;
            right: 20px;
            background: var(--bg-panel);
            border: 1px solid var(--accent);
            border-radius: 6px;
            padding: 16px;
            max-width: 400px;
            max-height: 500px;
            overflow-y: auto;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        #diff-story-panel h3 {
            color: var(--accent);
            margin-bottom: 12px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #diff-story-content {
            color: var(--text-primary);
            font-size: 11px;
            line-height: 1.6;
        }
        
        .story-section {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .story-section:last-child {
            border-bottom: none;
        }
        
        .story-section h4 {
            color: var(--accent-light);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .story-section p {
            margin: 4px 0;
            color: var(--text-secondary);
        }
        
        .story-highlight {
            color: var(--success);
            font-weight: 600;
        }
        
        .story-warning {
            color: var(--error);
            font-weight: 600;
        }
        
        /* Accessibility: Color-blind friendly patterns */
        .node-added::before {
            content: '+';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .node-removed::before {
            content: '-';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .node-changed::before {
            content: '~';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 12px;
            font-weight: bold;
        }
        #legend-tooltip {
            position: fixed;
            background: rgba(5, 5, 5, 0.95);
            border: 1px solid var(--border);
            border-left: 2px solid var(--accent);
            padding: 10px 14px;
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 10px;
            pointer-events: none;
            z-index: 10000;
            display: none;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            max-width: 220px;
            text-transform: uppercase;
            line-height: 1.4;
            letter-spacing: 0.5px;
        }
        #legend-tooltip strong {
            display: block;
            color: var(--accent-light);
            margin-bottom: 4px;
            font-size: 11px;
        }
        /* Modals */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.active { display: flex; animation: fadeIn 0.2s ease; }
        
        .modal-content {
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid var(--border);
            border-left: 4px solid var(--accent);
            width: 600px; max-width: 90%;
            max-height: 80vh;
            display: flex; flex-direction: column;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .modal-content.large { width: 900px; height: 80vh; }
        
        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .modal-header h2 { font-size: 1.1rem; color: #fff; }
        .close-btn {
            background: transparent; border: none; color: var(--text-muted);
            font-size: 1.5rem; cursor: pointer;
        }
        .close-btn:hover { color: #fff; }
        
        .modal-body { padding: 20px; overflow-y: auto; color: var(--text-secondary); font-size: 0.9rem; }
        
        /* Search & Filter */
        .header-controls { margin-left: auto; display: flex; align-items: center; gap: 12px; }
        .search-container {
            position: relative;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 4px 8px;
            display: flex; align-items: center;
        }
        #node-search {
            background: transparent; border: none; color: #fff;
            font-family: 'JetBrains Mono'; font-size: 0.8rem;
            width: 150px; outline: none;
        }
        
        .filter-container { position: relative; }
        .icon-btn {
            background: transparent; border: 1px solid var(--border);
            color: var(--accent); padding: 6px; border-radius: 4px;
            cursor: pointer; transition: all 0.2s;
        }
        .icon-btn:hover { background: var(--accent); color: #fff; }
        
        .filter-dropdown {
            position: absolute; top: 100%; right: 0; margin-top: 10px;
            background: rgba(10, 10, 10, 0.95); border: 1px solid var(--border);
            padding: 15px; min-width: 200px;
            display: none; flex-direction: column; gap: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .filter-dropdown.active { display: flex; }
        .filter-group h4 { color: var(--text-muted); font-size: 0.75rem; margin-bottom: 8px; }
        .filter-group label { display: block; margin-bottom: 5px; font-size: 0.85rem; cursor: pointer; }
        
        pre { background: #000; padding: 15px; border-radius: 4px; border: 1px solid var(--border); overflow-x: auto; }
        code { font-family: 'JetBrains Mono'; color: #a5b3ce; }
    
        /* --- HUD SYSTEM --- */
        #canvas-3d {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
            background: #000;
        }
        
        /* Right-side Detail Drawer */
        #info-panel {
            position: fixed;
            top: 0; right: 0;
            left: auto !important; /* CRITICAL: Unset legacy 'left' positioning */
            width: 350px; /* Reduced width */
            height: 100%;
            background: rgba(12, 12, 16, 0.95);
            border-left: 1px solid #333;
            box-shadow: -10px 0 40px rgba(0,0,0,0.5);
            transform: translateX(100%); /* Start HIDDEN (off-screen right) */
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 1000;
            overflow-y: auto;
            padding: 24px;
            backdrop-filter: blur(20px);
            display: block !important;
        }
        
        #info-panel.active {
            transform: translateX(0); /* Slide in when active */
        }
        
        #info-panel h2 {
            margin-top: 0;
            font-size: 24px;
            font-weight: 300;
            color: #fff;
            border-bottom: 1px solid #333;
            padding-bottom: 16px;
            margin-bottom: 16px;
            letter-spacing: -0.5px;
        }
        
        .panel-section {
            margin-bottom: 24px;
        }
        
        .panel-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            margin-bottom: 8px;
            display: block;
        }
        
        /* Bottom Control Dock */
        .control-dock {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            background: rgba(20, 20, 25, 0.8);
            padding: 8px 12px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 900;
            transition: transform 0.2s ease, background 0.2s;
        }
        
        .control-dock:hover {
            background: rgba(30, 30, 35, 0.95);
            transform: translateX(-50%) translateY(-2px);
        }
        
        .dock-btn {
            background: transparent;
            border: none;
            color: #888;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            font-family: 'Inter', system-ui, sans-serif;
            font-weight: 500;
            transition: all 0.2s;
            min-width: 64px;
        }
        
        .dock-btn:hover {
            color: #fff;
            background: rgba(255,255,255,0.05);
        }
        
        .dock-btn.active {
            color: #4488ff;
            background: rgba(68, 136, 255, 0.1);
        }
        
        .dock-icon {
            font-size: 18px;
            margin-bottom: 2px;
        }
        
        /* Close Button inside Panel */
        .panel-close-btn {
            position: absolute;
            top: 24px;
            right: 24px;
            background: transparent;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
            padding: 4px;
            transition: color 0.2s;
        }
        .panel-close-btn:hover {
            color: #fff;
        }
        
        /* Hide old elements */
        #panel-toggle, #btn-cam, #btn-lens, #btn-snapshot, #btn-reset { display: none !important; }
        .floating-controls { display: none !important; }
        
        /* KILL CLUTTER - Hide all legacy panels */
        #diff-panel, #diff-story-panel, #diff-summary { display: none !important; }
        #filter-menu, #search-box, #legend, #console-log { display: none !important; }
        /* Hide checkbox lists if they are free-floating */
        .filter-context { display: none !important; }
    
    </style>
</head>
<body>
    <!-- Legend Tooltip -->
    <div id="legend-tooltip"></div>
    <!-- Header (New Navigation) -->
    <header class="header">
        <div class="header-inner">
            <div class="logo">Rohkun <span style="color: var(--text-secondary); font-size: 0.7em; margin-left: 8px; letter-spacing: 2px; font-weight: 500;">// KNOWLEDGE GRAPH</span></div>
            <nav style="display: flex; align-items: center; gap: 8px;">
                <!-- Navigation Arrows -->
                <button onclick="navigateReport(-1)" class="nav-link" id="nav-prev" title="Previous Report" style="padding: 6px 10px; min-width: auto;">‚Üê</button>
                <button onclick="navigateReport(1)" class="nav-link" id="nav-next" title="Next Report" style="padding: 6px 10px; min-width: auto;">‚Üí</button>
                <div style="width: 1px; height: 20px; background: var(--border); margin: 0 4px;"></div>
                <button onclick="switchGraph('api')" class="nav-link active" id="nav-api">APIs</button>
                <button onclick="switchGraph('functions')" class="nav-link" id="nav-func">FUNCTIONS</button>
                <button onclick="switchGraph('files')" class="nav-link" id="nav-files" style="opacity: 0.5; cursor: not-allowed;" title="Coming Soon">FILES</button>
                <button onclick="toggleReportModal()" class="nav-link" id="nav-report">REPORT</button>
            </nav>
            
            <!-- Search & Filter -->
            <div class="header-controls">
                <div class="search-container">
                   <input type="text" id="node-search" placeholder="SEARCH NODE..." oninput="window.filterNodes(this.value)">
                   <span style="font-size: 12px; color: var(--text-muted);">üîç</span>
                </div>
                <div class="filter-container">
                   <button id="help-btn" class="icon-btn" onclick="toggleHelpModal()" title="Help & Legend">?</button>
                   <div id="filter-menu" class="filter-dropdown">
                       <!-- Simplified Filters (Global) -->
                       <div class="filter-group">
                           <h4>VISIBILITY</h4>
                           <label><input type="checkbox" checked onchange="updateFilters('status', 'high_impact')"> HIGH IMPACT</label>
                           <label><input type="checkbox" checked onchange="updateFilters('status', 'orphan')"> ORPHANS</label>
                           <label><input type="checkbox" checked onchange="updateFilters('status', 'unknown')"> UNKNOWNS</label>
                       </div>
                       
                       <!-- Language Filters (File View Only) -->
                       <div id="filter-context-dependency" class="filter-context" style="display:none; border-top: 1px solid var(--border); padding-top: 10px;">
                           <div class="filter-group">
                               <h4>LANGUAGES</h4>
                               <label><input type="checkbox" checked onchange="updateFilters('ext', '.py')"> Python</label>
                               <label><input type="checkbox" checked onchange="updateFilters('ext', '.js')"> JavaScript</label>
                               <label><input type="checkbox" checked onchange="updateFilters('ext', '.ts')"> TypeScript</label>
                               <label><input type="checkbox" checked onchange="updateFilters('ext', '.html')"> HTML</label>
                               <label><input type="checkbox" checked onchange="updateFilters('ext', '.css')"> CSS</label>
                           </div>
                       </div>
                   </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Background Layers (2D Grids Removed for 3D Implementation) -->
    <!-- <div class="bg-grid-base"></div> -->
    <!-- <div class="bg-grid"></div> -->
    <div class="spotlight-static"></div>
    
    
    <!-- 3D Intro Canvas -->
    <div id="canvas-3d"></div>
    
    <!-- HUD Control Dock -->
    <div class="control-dock">
        <button class="dock-btn" onclick="exportScreenshot()" title="Take Screenshot">
            <span class="dock-icon">üì∏</span>
            <span>SNAP</span>
        </button>
    </div>
    <div id="network-container" style="display: none; opacity: 0;">
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">Loading graph data...</div>
        </div>
    </div>
    
    <!-- Edge Animation Canvas for Moving Dashed Lines -->
    <canvas id="edge-animation-canvas"></canvas>
    
    <!-- Graph Toggle - Top Right (Replaced by Header) -->
    <!-- <div id="graph-toggle">...</div> -->
    
    <!-- Info Panel - Top Left (Quant Style) -->
    
    <!-- Context Drawer (Slide-out) -->
    <div id="info-panel">
        <button class="panel-close-btn" onclick="toggleInfoPanel()">√ó</button>
        <div id="drawer-content">
            <div style="display:flex; align-items:center; justify-content:center; height:100%; color:#666;">
                Select a node to view details
            </div>
        </div>
    </div>
    
    
    <!-- Info Panel Toggle (Visible when panel is hidden) -->
    
    
    <!-- Console Log - Bottom Left -->
    <div id="console-log"></div>
    
    <!-- Legend - Bottom Right -->
    <div id="legend"></div>
    
    <!-- Search - Top Center (Moved to Header) -->
    <!-- <div id="search-box">...</div> -->
    
    <!-- Controls - Bottom Center -->
    
    
    <!-- Diff Mode Panel - Snapshot Selector -->
    <div id="diff-panel" style="display: none;">
        <h3>SELECT SNAPSHOTS TO COMPARE</h3>
        <div id="snapshot-selector">
            <!-- Timeline Scrubber (Visual Timeline) -->
            <div id="timeline-scrubber" style="display: none;">
                <div class="timeline-container">
                    <div class="timeline-track" id="timeline-track">
                        <!-- Timeline markers will be generated here -->
                    </div>
                    <div class="timeline-handle previous" id="timeline-handle-previous"></div>
                    <div class="timeline-handle current" id="timeline-handle-current"></div>
                </div>
                <div class="timeline-labels">
                    <span id="timeline-label-previous">Previous</span>
                    <span id="timeline-label-current">Current</span>
                </div>
            </div>
            
            <!-- Fallback Dropdowns (shown by default, hidden when timeline is ready) -->
            <div id="snapshot-dropdowns">
                <div class="snapshot-select">
                    <label>Previous:</label>
                    <select id="previous-snapshot"></select>
                </div>
                <div class="snapshot-select">
                    <label>Current:</label>
                    <select id="current-snapshot"></select>
                </div>
            </div>
            
            <div style="display: flex; gap: 8px; margin-top: 12px;">
                <button onclick="window.playTimeline()" id="play-btn" style="background: var(--accent); color: #000; border: none; padding: 6px 12px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer;">‚ñ∂ PLAY</button>
                <button onclick="compareSnapshots()" id="compare-btn">COMPARE</button>
                <button onclick="toggleShowContext()" id="context-btn" style="background: transparent; border: 1px solid var(--border); color: var(--text-secondary); padding: 6px 12px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer;">SHOW CONTEXT</button>
                <button onclick="generateDiffStory()" id="story-btn" style="background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 6px 12px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer;">üìñ TELL ME WHAT CHANGED</button>
            </div>
        </div>
    </div>
    
    <!-- Diff Storytelling Panel -->
    <div id="diff-story-panel" style="display: none;">
        <h3>üìñ CHANGE NARRATIVE</h3>
        <div id="diff-story-content"></div>
        <button onclick="closeDiffStory()" style="margin-top: 12px; width: 100%; padding: 8px; background: transparent; border: 1px solid var(--border); color: var(--text-secondary); border-radius: 4px; cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 9px; text-transform: uppercase;">CLOSE</button>
    </div>
    
    <!-- Diff Summary Panel -->
    <div id="diff-summary" style="display: none;">
        <h3>üìä DIFF IMPACT</h3>
        <div id="diff-summary-content"></div>
    </div>
    
    <!-- Floating Filter Pills (shown in diff mode) -->
    <div id="diff-filters" style="display: none;">
        <button class="filter-pill active" data-filter="all" onclick="applyDiffFilter('all')">
            <span class="pill-icon">‚óè</span>
            <span class="pill-label">All</span>
        </button>
        <button class="filter-pill" data-filter="added" onclick="applyDiffFilter('added')">
            <span class="pill-icon">+</span>
            <span class="pill-label">Added</span>
            <span class="pill-badge" id="added-count">0</span>
        </button>
        <button class="filter-pill" data-filter="removed" onclick="applyDiffFilter('removed')">
            <span class="pill-icon">-</span>
            <span class="pill-label">Removed</span>
            <span class="pill-badge" id="removed-count">0</span>
        </button>
        <button class="filter-pill" data-filter="changed" onclick="applyDiffFilter('changed')">
            <span class="pill-icon">~</span>
            <span class="pill-label">Changed</span>
            <span class="pill-badge" id="changed-count">0</span>
        </button>
    </div>
    
    <!-- Node Info - Bottom Left (shown on node click) -->
    <div id="node-info"></div>
    
    <!-- Toast -->
    <div id="toast" class="toast"></div>
    
    <!-- Watermark (shown in snapshot mode) -->
    <div class="watermark" id="watermark">
        GENERATED BY ROHKUN // SYSTEM MAP v2.0<br>
        TIMESTAMP: <span id="watermark-time"></span>
    </div>
    
    <!-- Graveyard Zone (Second Consultation Specification) -->
    <div id="graveyard-zone" class="graveyard-zone">
        <div class="graveyard-header" onclick="toggleGraveyard()">
            <h4>
                ü™¶ REMOVED
                <span class="graveyard-count" id="graveyard-count">0</span>
            </h4>
            <span class="graveyard-toggle">‚ñº</span>
        </div>
        <div class="graveyard-items" id="graveyard-items">
            <div class="graveyard-empty">‚úÖ No endpoints removed</div>
        </div>
    </div>
    
    <!-- SVG Patterns for Accessibility (Second Consultation) -->
    <svg width="0" height="0" style="position: absolute;">
        <defs>
            <!-- Pattern for Added Nodes -->
            <pattern id="pattern-added" width="8" height="8" patternUnits="userSpaceOnUse">
                <path d="M0,4 L8,4 M4,0 L4,8" stroke="#00FFA3" stroke-width="1" opacity="0.3"/>
            </pattern>
            
            <!-- Pattern for Removed Nodes -->
            <pattern id="pattern-removed" width="8" height="8" patternUnits="userSpaceOnUse">
                <path d="M0,4 L8,4" stroke="#FF1744" stroke-width="1" opacity="0.3"/>
            </pattern>
            
            <!-- Pattern for Changed Nodes -->
            <pattern id="pattern-changed" width="8" height="8" patternUnits="userSpaceOnUse">
                <path d="M0,0 L8,8 M0,8 L8,0" stroke="#FFB300" stroke-width="1" opacity="0.2"/>
            </pattern>
        </defs>
    </svg>
    
    
    <script id="embedded-graph-data" type="application/json">
{
  "api": {
    "nodes": [
      {
        "id": "endpoint_func_0",
        "label": "GET /",
        "title": "Endpoint Function\nGET /\nFile: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py\nLine: 28\nConnections: 0",
        "type": "endpoint_function",
        "method": "GET",
        "path": "/",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
        "line": 28,
        "value": 15,
        "size": 15,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "connections": 0,
        "high_impact": false
      },
      {
        "id": "endpoint_func_1",
        "label": "POST /chat",
        "title": "Endpoint Function\nPOST /chat\nFile: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py\nLine: 7\nConnections: 0",
        "type": "endpoint_function",
        "method": "POST",
        "path": "/chat",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
        "line": 7,
        "value": 15,
        "size": 15,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "connections": 0,
        "high_impact": false
      },
      {
        "id": "endpoint_func_2",
        "label": "POST /translate-pdf",
        "title": "Endpoint Function\nPOST /translate-pdf\nFile: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py\nLine: 12\nConnections: 0",
        "type": "endpoint_function",
        "method": "POST",
        "path": "/translate-pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
        "line": 12,
        "value": 15,
        "size": 15,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "connections": 0,
        "high_impact": false
      },
      {
        "id": "endpoint_func_3",
        "label": "POST /process",
        "title": "Endpoint Function\nPOST /process\nFile: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py\nLine: 10\nConnections: 0",
        "type": "endpoint_function",
        "method": "POST",
        "path": "/process",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
        "line": 10,
        "value": 15,
        "size": 15,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "connections": 0,
        "high_impact": false
      }
    ],
    "edges": [],
    "summary": {
      "total_nodes": 4,
      "total_edges": 0,
      "endpoint_functions": 4,
      "api_call_functions": 0,
      "high_impact": 0,
      "orphaned": 4
    }
  },
  "dependencies": {
    "nodes": [
      {
        "id": "file_0",
        "label": "rag_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py\nEndpoints: 0\nFunctions: 6\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "file_name": "rag_service.py",
        "extension": ".py",
        "value": 26,
        "size": 26,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 6,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_1",
        "label": "pdf_translation_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py\nEndpoints: 0\nFunctions: 4\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
        "file_name": "pdf_translation_service.py",
        "extension": ".py",
        "value": 24,
        "size": 24,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 4,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_2",
        "label": "debug_translation.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py\nEndpoints: 0\nFunctions: 0\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
        "file_name": "debug_translation.py",
        "extension": ".py",
        "value": 20,
        "size": 20,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 0,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_3",
        "label": "layout_extraction_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py\nEndpoints: 0\nFunctions: 11\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "file_name": "layout_extraction_service.py",
        "extension": ".py",
        "value": 31,
        "size": 31,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 11,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_4",
        "label": "error_handler.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py\nEndpoints: 0\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
        "file_name": "error_handler.py",
        "extension": ".py",
        "value": 21,
        "size": 21,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 1,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_5",
        "label": "translate_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py\nEndpoints: 0\nFunctions: 5\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "file_name": "translate_service.py",
        "extension": ".py",
        "value": 25,
        "size": 25,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 5,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_6",
        "label": "main.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py\nEndpoints: 1\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
        "file_name": "main.py",
        "extension": ".py",
        "value": 23,
        "size": 23,
        "color": {
          "background": "#BC13FE",
          "border": "#BC13FE",
          "highlight": {
            "background": "#BC13FE",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 1,
        "function_count": 1,
        "import_count": 0,
        "high_impact": true
      },
      {
        "id": "file_7",
        "label": "ocr_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py\nEndpoints: 0\nFunctions: 4\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
        "file_name": "ocr_service.py",
        "extension": ".py",
        "value": 24,
        "size": 24,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 4,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_8",
        "label": "ocr_controller.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py\nEndpoints: 1\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
        "file_name": "ocr_controller.py",
        "extension": ".py",
        "value": 23,
        "size": 23,
        "color": {
          "background": "#BC13FE",
          "border": "#BC13FE",
          "highlight": {
            "background": "#BC13FE",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 1,
        "function_count": 1,
        "import_count": 0,
        "high_impact": true
      },
      {
        "id": "file_9",
        "label": "table_extraction_service.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py\nEndpoints: 0\nFunctions: 7\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "file_name": "table_extraction_service.py",
        "extension": ".py",
        "value": 27,
        "size": 27,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 7,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_10",
        "label": "file_utils.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py\nEndpoints: 0\nFunctions: 3\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
        "file_name": "file_utils.py",
        "extension": ".py",
        "value": 23,
        "size": 23,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 3,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_11",
        "label": "chat_controller.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py\nEndpoints: 1\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
        "file_name": "chat_controller.py",
        "extension": ".py",
        "value": 23,
        "size": 23,
        "color": {
          "background": "#BC13FE",
          "border": "#BC13FE",
          "highlight": {
            "background": "#BC13FE",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 1,
        "function_count": 1,
        "import_count": 0,
        "high_impact": true
      },
      {
        "id": "file_12",
        "label": "chat.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/models/chat.py\nEndpoints: 0\nFunctions: 0\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/models/chat.py",
        "file_name": "chat.py",
        "extension": ".py",
        "value": 20,
        "size": 20,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 0,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_13",
        "label": "validators.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py\nEndpoints: 0\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
        "file_name": "validators.py",
        "extension": ".py",
        "value": 21,
        "size": 21,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 0,
        "function_count": 1,
        "import_count": 0,
        "high_impact": false
      },
      {
        "id": "file_14",
        "label": "pdf_controller.py",
        "title": "File: /Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py\nEndpoints: 1\nFunctions: 1\nImports: 0",
        "type": "file",
        "file_path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
        "file_name": "pdf_controller.py",
        "extension": ".py",
        "value": 23,
        "size": 23,
        "color": {
          "background": "#BC13FE",
          "border": "#BC13FE",
          "highlight": {
            "background": "#BC13FE",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "endpoint_count": 1,
        "function_count": 1,
        "import_count": 0,
        "high_impact": true
      }
    ],
    "edges": [],
    "summary": {
      "total_nodes": 15,
      "total_edges": 0,
      "files": 15,
      "high_impact": 4,
      "orphaned": 0
    }
  },
  "function_dependencies": {
    "nodes": [
      {
        "id": "func_0",
        "label": "read_root",
        "title": "Function: read_root\nFile: main.py\nLine: 29",
        "type": "function",
        "name": "read_root",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
        "line": 29,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_1",
        "label": "validate_pdf",
        "title": "Function: validate_pdf\nFile: validators.py\nLine: 3",
        "type": "function",
        "name": "validate_pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
        "line": 3,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_2",
        "label": "save_content_to_temp",
        "title": "Function: save_content_to_temp\nFile: file_utils.py\nLine: 5",
        "type": "function",
        "name": "save_content_to_temp",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
        "line": 5,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_3",
        "label": "cleanup_file",
        "title": "Function: cleanup_file\nFile: file_utils.py\nLine: 15",
        "type": "function",
        "name": "cleanup_file",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
        "line": 15,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_4",
        "label": "temporary_file",
        "title": "Function: temporary_file\nFile: file_utils.py\nLine: 26",
        "type": "function",
        "name": "temporary_file",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
        "line": 26,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_5",
        "label": "chat_endpoint",
        "title": "Function: chat_endpoint\nFile: chat_controller.py\nLine: 8",
        "type": "function",
        "name": "chat_endpoint",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
        "line": 8,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_6",
        "label": "translate_pdf_endpoint",
        "title": "Function: translate_pdf_endpoint\nFile: pdf_controller.py\nLine: 13",
        "type": "function",
        "name": "translate_pdf_endpoint",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
        "line": 13,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_7",
        "label": "process_pdf",
        "title": "Function: process_pdf\nFile: ocr_controller.py\nLine: 11",
        "type": "function",
        "name": "process_pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
        "line": 11,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_8",
        "label": "global_exception_handler",
        "title": "Function: global_exception_handler\nFile: error_handler.py\nLine: 4",
        "type": "function",
        "name": "global_exception_handler",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
        "line": 4,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_9",
        "label": "_ensure_searchable_pdf",
        "title": "Function: _ensure_searchable_pdf\nFile: pdf_translation_service.py\nLine: 38",
        "type": "function",
        "name": "_ensure_searchable_pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
        "line": 38,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_10",
        "label": "translate_pdf_inplace",
        "title": "Function: translate_pdf_inplace\nFile: pdf_translation_service.py\nLine: 95",
        "type": "function",
        "name": "translate_pdf_inplace",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
        "line": 95,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_11",
        "label": "translate_pdf_with_layout",
        "title": "Function: translate_pdf_with_layout\nFile: pdf_translation_service.py\nLine: 492",
        "type": "function",
        "name": "translate_pdf_with_layout",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
        "line": 492,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_12",
        "label": "normalize_arabic_numerals",
        "title": "Function: normalize_arabic_numerals\nFile: pdf_translation_service.py\nLine: 508",
        "type": "function",
        "name": "normalize_arabic_numerals",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
        "line": 508,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_13",
        "label": "__init__",
        "title": "Function: __init__\nFile: rag_service.py\nLine: 20",
        "type": "function",
        "name": "__init__",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 20,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_14",
        "label": "_ensure_collection",
        "title": "Function: _ensure_collection\nFile: rag_service.py\nLine: 41",
        "type": "function",
        "name": "_ensure_collection",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 41,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_15",
        "label": "_get_embedding",
        "title": "Function: _get_embedding\nFile: rag_service.py\nLine: 66",
        "type": "function",
        "name": "_get_embedding",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 66,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_16",
        "label": "index_document",
        "title": "Function: index_document\nFile: rag_service.py\nLine: 76",
        "type": "function",
        "name": "index_document",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 76,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_17",
        "label": "chat_with_document",
        "title": "Function: chat_with_document\nFile: rag_service.py\nLine: 125",
        "type": "function",
        "name": "chat_with_document",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 125,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_18",
        "label": "_chunk_text",
        "title": "Function: _chunk_text\nFile: rag_service.py\nLine: 185",
        "type": "function",
        "name": "_chunk_text",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
        "line": 185,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_19",
        "label": "__init__",
        "title": "Function: __init__\nFile: layout_extraction_service.py\nLine: 20",
        "type": "function",
        "name": "__init__",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 20,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_20",
        "label": "extract_text_blocks_with_layout",
        "title": "Function: extract_text_blocks_with_layout\nFile: layout_extraction_service.py\nLine: 34",
        "type": "function",
        "name": "extract_text_blocks_with_layout",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 34,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_21",
        "label": "_extract_with_pymupdf",
        "title": "Function: _extract_with_pymupdf\nFile: layout_extraction_service.py\nLine: 82",
        "type": "function",
        "name": "_extract_with_pymupdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 82,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_22",
        "label": "_group_words_into_blocks",
        "title": "Function: _group_words_into_blocks\nFile: layout_extraction_service.py\nLine: 168",
        "type": "function",
        "name": "_group_words_into_blocks",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 168,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_23",
        "label": "_create_block_from_words",
        "title": "Function: _create_block_from_words\nFile: layout_extraction_service.py\nLine: 203",
        "type": "function",
        "name": "_create_block_from_words",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 203,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_24",
        "label": "_iou",
        "title": "Function: _iou\nFile: layout_extraction_service.py\nLine: 257",
        "type": "function",
        "name": "_iou",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 257,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_25",
        "label": "_postprocess_blocks",
        "title": "Function: _postprocess_blocks\nFile: layout_extraction_service.py\nLine: 271",
        "type": "function",
        "name": "_postprocess_blocks",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 271,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_26",
        "label": "_extract_table_blocks",
        "title": "Function: _extract_table_blocks\nFile: layout_extraction_service.py\nLine: 301",
        "type": "function",
        "name": "_extract_table_blocks",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 301,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_27",
        "label": "_extract_with_ocr",
        "title": "Function: _extract_with_ocr\nFile: layout_extraction_service.py\nLine: 319",
        "type": "function",
        "name": "_extract_with_ocr",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 319,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_28",
        "label": "_create_block_from_ocr_words",
        "title": "Function: _create_block_from_ocr_words\nFile: layout_extraction_service.py\nLine: 436",
        "type": "function",
        "name": "_create_block_from_ocr_words",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 436,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_29",
        "label": "normalize_arabic_numerals",
        "title": "Function: normalize_arabic_numerals\nFile: layout_extraction_service.py\nLine: 459",
        "type": "function",
        "name": "normalize_arabic_numerals",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
        "line": 459,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_30",
        "label": "get_translation_model",
        "title": "Function: get_translation_model\nFile: translate_service.py\nLine: 9",
        "type": "function",
        "name": "get_translation_model",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "line": 9,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_31",
        "label": "translate_to_english",
        "title": "Function: translate_to_english\nFile: translate_service.py\nLine: 41",
        "type": "function",
        "name": "translate_to_english",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "line": 41,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_32",
        "label": "_is_bad_translation",
        "title": "Function: _is_bad_translation\nFile: translate_service.py\nLine: 144",
        "type": "function",
        "name": "_is_bad_translation",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "line": 144,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_33",
        "label": "_translate_batch",
        "title": "Function: _translate_batch\nFile: translate_service.py\nLine: 186",
        "type": "function",
        "name": "_translate_batch",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "line": 186,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_34",
        "label": "_translate_chunks",
        "title": "Function: _translate_chunks\nFile: translate_service.py\nLine: 276",
        "type": "function",
        "name": "_translate_chunks",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
        "line": 276,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_35",
        "label": "extract_arabic_text",
        "title": "Function: extract_arabic_text\nFile: ocr_service.py\nLine: 12",
        "type": "function",
        "name": "extract_arabic_text",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
        "line": 12,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_36",
        "label": "_preprocess_for_ocr",
        "title": "Function: _preprocess_for_ocr\nFile: ocr_service.py\nLine: 161",
        "type": "function",
        "name": "_preprocess_for_ocr",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
        "line": 161,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_37",
        "label": "_estimate_skew_angle",
        "title": "Function: _estimate_skew_angle\nFile: ocr_service.py\nLine: 197",
        "type": "function",
        "name": "_estimate_skew_angle",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
        "line": 197,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_38",
        "label": "_rotate_image",
        "title": "Function: _rotate_image\nFile: ocr_service.py\nLine: 213",
        "type": "function",
        "name": "_rotate_image",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
        "line": 213,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_39",
        "label": "__init__",
        "title": "Function: __init__\nFile: table_extraction_service.py\nLine: 22",
        "type": "function",
        "name": "__init__",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 22,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_40",
        "label": "bbox",
        "title": "Function: bbox\nFile: table_extraction_service.py\nLine: 51",
        "type": "function",
        "name": "bbox",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 51,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_41",
        "label": "extract_tables_from_pdf",
        "title": "Function: extract_tables_from_pdf\nFile: table_extraction_service.py\nLine: 54",
        "type": "function",
        "name": "extract_tables_from_pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 54,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_42",
        "label": "_extract_tables_with_pdfplumber",
        "title": "Function: _extract_tables_with_pdfplumber\nFile: table_extraction_service.py\nLine: 116",
        "type": "function",
        "name": "_extract_tables_with_pdfplumber",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 116,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_43",
        "label": "extract_tables_from_ocr",
        "title": "Function: extract_tables_from_ocr\nFile: table_extraction_service.py\nLine: 238",
        "type": "function",
        "name": "extract_tables_from_ocr",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 238,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_44",
        "label": "_detect_table_structure",
        "title": "Function: _detect_table_structure\nFile: table_extraction_service.py\nLine: 276",
        "type": "function",
        "name": "_detect_table_structure",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
        "line": 276,
        "value": 20,
        "size": 20,
        "color": {
          "background": "#FFE600",
          "border": "#FFE600",
          "highlight": {
            "background": "#FFE600",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 13,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2,
        "high_impact": false
      },
      {
        "id": "func_45",
        "label": "sys.path.append",
        "title": "Called Function: sys.path.append\n(External/Library)",
        "type": "external_function",
        "name": "sys.path.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_46",
        "label": "os.path.dirname",
        "title": "Called Function: os.path.dirname\n(External/Library)",
        "type": "external_function",
        "name": "os.path.dirname",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_47",
        "label": "os.path.abspath",
        "title": "Called Function: os.path.abspath\n(External/Library)",
        "type": "external_function",
        "name": "os.path.abspath",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_48",
        "label": "print",
        "title": "Called Function: print\n(External/Library)",
        "type": "external_function",
        "name": "print",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_49",
        "label": "FastAPI",
        "title": "Called Function: FastAPI\n(External/Library)",
        "type": "external_function",
        "name": "FastAPI",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_50",
        "label": "app.add_middleware",
        "title": "Called Function: app.add_middleware\n(External/Library)",
        "type": "external_function",
        "name": "app.add_middleware",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_51",
        "label": "app.add_exception_handler",
        "title": "Called Function: app.add_exception_handler\n(External/Library)",
        "type": "external_function",
        "name": "app.add_exception_handler",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_52",
        "label": "app.include_router",
        "title": "Called Function: app.include_router\n(External/Library)",
        "type": "external_function",
        "name": "app.include_router",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_53",
        "label": "app.get",
        "title": "Called Function: app.get\n(External/Library)",
        "type": "external_function",
        "name": "app.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_54",
        "label": "uvicorn.run",
        "title": "Called Function: uvicorn.run\n(External/Library)",
        "type": "external_function",
        "name": "uvicorn.run",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_55",
        "label": "file.filename.endswith",
        "title": "Called Function: file.filename.endswith\n(External/Library)",
        "type": "external_function",
        "name": "file.filename.endswith",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_56",
        "label": "HTTPException",
        "title": "Called Function: HTTPException\n(External/Library)",
        "type": "external_function",
        "name": "HTTPException",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_57",
        "label": "file.read",
        "title": "Called Function: file.read\n(External/Library)",
        "type": "external_function",
        "name": "file.read",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_58",
        "label": "len",
        "title": "Called Function: len\n(External/Library)",
        "type": "external_function",
        "name": "len",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_59",
        "label": "content.startswith",
        "title": "Called Function: content.startswith\n(External/Library)",
        "type": "external_function",
        "name": "content.startswith",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_60",
        "label": "tempfile.NamedTemporaryFile",
        "title": "Called Function: tempfile.NamedTemporaryFile\n(External/Library)",
        "type": "external_function",
        "name": "tempfile.NamedTemporaryFile",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_61",
        "label": "tmp.write",
        "title": "Called Function: tmp.write\n(External/Library)",
        "type": "external_function",
        "name": "tmp.write",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_62",
        "label": "tmp.flush",
        "title": "Called Function: tmp.flush\n(External/Library)",
        "type": "external_function",
        "name": "tmp.flush",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_63",
        "label": "os.path.exists",
        "title": "Called Function: os.path.exists\n(External/Library)",
        "type": "external_function",
        "name": "os.path.exists",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_64",
        "label": "os.unlink",
        "title": "Called Function: os.unlink\n(External/Library)",
        "type": "external_function",
        "name": "os.unlink",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_65",
        "label": "APIRouter",
        "title": "Called Function: APIRouter\n(External/Library)",
        "type": "external_function",
        "name": "APIRouter",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_66",
        "label": "router.post",
        "title": "Called Function: router.post\n(External/Library)",
        "type": "external_function",
        "name": "router.post",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_67",
        "label": "rag_service.chat_with_document",
        "title": "Called Function: rag_service.chat_with_document\n(External/Library)",
        "type": "external_function",
        "name": "rag_service.chat_with_document",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_68",
        "label": "str",
        "title": "Called Function: str\n(External/Library)",
        "type": "external_function",
        "name": "str",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_69",
        "label": "File",
        "title": "Called Function: File\n(External/Library)",
        "type": "external_function",
        "name": "File",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_70",
        "label": "uuid.uuid4",
        "title": "Called Function: uuid.uuid4\n(External/Library)",
        "type": "external_function",
        "name": "uuid.uuid4",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_71",
        "label": "stats.get",
        "title": "Called Function: stats.get\n(External/Library)",
        "type": "external_function",
        "name": "stats.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_72",
        "label": "rag_service.index_document",
        "title": "Called Function: rag_service.index_document\n(External/Library)",
        "type": "external_function",
        "name": "rag_service.index_document",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_73",
        "label": "background_tasks.add_task",
        "title": "Called Function: background_tasks.add_task\n(External/Library)",
        "type": "external_function",
        "name": "background_tasks.add_task",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_74",
        "label": "FileResponse",
        "title": "Called Function: FileResponse\n(External/Library)",
        "type": "external_function",
        "name": "FileResponse",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_75",
        "label": "arabic_text.strip",
        "title": "Called Function: arabic_text.strip\n(External/Library)",
        "type": "external_function",
        "name": "arabic_text.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_76",
        "label": "JSONResponse",
        "title": "Called Function: JSONResponse\n(External/Library)",
        "type": "external_function",
        "name": "JSONResponse",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_77",
        "label": "isinstance",
        "title": "Called Function: isinstance\n(External/Library)",
        "type": "external_function",
        "name": "isinstance",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_78",
        "label": "error_msg.lower",
        "title": "Called Function: error_msg.lower\n(External/Library)",
        "type": "external_function",
        "name": "error_msg.lower",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_79",
        "label": "fitz.open",
        "title": "Called Function: fitz.open\n(External/Library)",
        "type": "external_function",
        "name": "fitz.open",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_80",
        "label": "range",
        "title": "Called Function: range\n(External/Library)",
        "type": "external_function",
        "name": "range",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_81",
        "label": "min",
        "title": "Called Function: min\n(External/Library)",
        "type": "external_function",
        "name": "min",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_82",
        "label": "doc[i].get_text",
        "title": "Called Function: doc[i].get_text\n(External/Library)",
        "type": "external_function",
        "name": "doc[i].get_text",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_83",
        "label": "text.strip",
        "title": "Called Function: text.strip\n(External/Library)",
        "type": "external_function",
        "name": "text.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_84",
        "label": "doc.close",
        "title": "Called Function: doc.close\n(External/Library)",
        "type": "external_function",
        "name": "doc.close",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_85",
        "label": "tempfile.mkstemp",
        "title": "Called Function: tempfile.mkstemp\n(External/Library)",
        "type": "external_function",
        "name": "tempfile.mkstemp",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_86",
        "label": "os.close",
        "title": "Called Function: os.close\n(External/Library)",
        "type": "external_function",
        "name": "os.close",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_87",
        "label": "ocrmypdf.ocr",
        "title": "Called Function: ocrmypdf.ocr\n(External/Library)",
        "type": "external_function",
        "name": "ocrmypdf.ocr",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_88",
        "label": "Exception",
        "title": "Called Function: Exception\n(External/Library)",
        "type": "external_function",
        "name": "Exception",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_89",
        "label": "re.compile",
        "title": "Called Function: re.compile\n(External/Library)",
        "type": "external_function",
        "name": "re.compile",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_90",
        "label": "os.path.join",
        "title": "Called Function: os.path.join\n(External/Library)",
        "type": "external_function",
        "name": "os.path.join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_91",
        "label": "page.insert_font",
        "title": "Called Function: page.insert_font\n(External/Library)",
        "type": "external_function",
        "name": "page.insert_font",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_92",
        "label": "page.find_tables",
        "title": "Called Function: page.find_tables\n(External/Library)",
        "type": "external_function",
        "name": "page.find_tables",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_93",
        "label": "table_exclusion_rects.append",
        "title": "Called Function: table_exclusion_rects.append\n(External/Library)",
        "type": "external_function",
        "name": "table_exclusion_rects.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_94",
        "label": "page.get_text(\"text\", clip=cell).strip",
        "title": "Called Function: page.get_text(\"text\", clip=cell).strip\n(External/Library)",
        "type": "external_function",
        "name": "page.get_text(\"text\", clip=cell).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_95",
        "label": "page.get_text",
        "title": "Called Function: page.get_text\n(External/Library)",
        "type": "external_function",
        "name": "page.get_text",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_96",
        "label": "arabic_pattern.search",
        "title": "Called Function: arabic_pattern.search\n(External/Library)",
        "type": "external_function",
        "name": "arabic_pattern.search",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_97",
        "label": "numeric_pattern.match",
        "title": "Called Function: numeric_pattern.match\n(External/Library)",
        "type": "external_function",
        "name": "numeric_pattern.match",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_98",
        "label": "stats['full_translated_text'].append",
        "title": "Called Function: stats['full_translated_text'].append\n(External/Library)",
        "type": "external_function",
        "name": "stats['full_translated_text'].append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_99",
        "label": "fitz.Rect",
        "title": "Called Function: fitz.Rect\n(External/Library)",
        "type": "external_function",
        "name": "fitz.Rect",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_100",
        "label": "page.new_shape",
        "title": "Called Function: page.new_shape\n(External/Library)",
        "type": "external_function",
        "name": "page.new_shape",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_101",
        "label": "shape.draw_rect",
        "title": "Called Function: shape.draw_rect\n(External/Library)",
        "type": "external_function",
        "name": "shape.draw_rect",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_102",
        "label": "shape.finish",
        "title": "Called Function: shape.finish\n(External/Library)",
        "type": "external_function",
        "name": "shape.finish",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_103",
        "label": "shape.commit",
        "title": "Called Function: shape.commit\n(External/Library)",
        "type": "external_function",
        "name": "shape.commit",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_104",
        "label": "page.insert_textbox",
        "title": "Called Function: page.insert_textbox\n(External/Library)",
        "type": "external_function",
        "name": "page.insert_textbox",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_105",
        "label": "fitz.Rect(t_rect).intersects",
        "title": "Called Function: fitz.Rect(t_rect).intersects\n(External/Library)",
        "type": "external_function",
        "name": "fitz.Rect(t_rect).intersects",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_106",
        "label": "float",
        "title": "Called Function: float\n(External/Library)",
        "type": "external_function",
        "name": "float",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_107",
        "label": "\" \".join",
        "title": "Called Function: \" \".join\n(External/Library)",
        "type": "external_function",
        "name": "\" \".join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_108",
        "label": "s.get",
        "title": "Called Function: s.get\n(External/Library)",
        "type": "external_function",
        "name": "s.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_109",
        "label": "bool",
        "title": "Called Function: bool\n(External/Library)",
        "type": "external_function",
        "name": "bool",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_110",
        "label": "spans.sort",
        "title": "Called Function: spans.sort\n(External/Library)",
        "type": "external_function",
        "name": "spans.sort",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_111",
        "label": "span.get(\"text\", \"\").strip",
        "title": "Called Function: span.get(\"text\", \"\").strip\n(External/Library)",
        "type": "external_function",
        "name": "span.get(\"text\", \"\").strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_112",
        "label": "span.get",
        "title": "Called Function: span.get\n(External/Library)",
        "type": "external_function",
        "name": "span.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_113",
        "label": "block_text_parts.append",
        "title": "Called Function: block_text_parts.append\n(External/Library)",
        "type": "external_function",
        "name": "block_text_parts.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_114",
        "label": "block_spans.append",
        "title": "Called Function: block_spans.append\n(External/Library)",
        "type": "external_function",
        "name": "block_spans.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_115",
        "label": "max",
        "title": "Called Function: max\n(External/Library)",
        "type": "external_function",
        "name": "max",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_116",
        "label": "sum",
        "title": "Called Function: sum\n(External/Library)",
        "type": "external_function",
        "name": "sum",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_117",
        "label": "text_blocks.append",
        "title": "Called Function: text_blocks.append\n(External/Library)",
        "type": "external_function",
        "name": "text_blocks.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_118",
        "label": "enumerate",
        "title": "Called Function: enumerate\n(External/Library)",
        "type": "external_function",
        "name": "enumerate",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_119",
        "label": "text_block.get",
        "title": "Called Function: text_block.get\n(External/Library)",
        "type": "external_function",
        "name": "text_block.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_120",
        "label": "doc.save",
        "title": "Called Function: doc.save\n(External/Library)",
        "type": "external_function",
        "name": "doc.save",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_121",
        "label": "\"\\n\\n\".join",
        "title": "Called Function: \"\\n\\n\".join\n(External/Library)",
        "type": "external_function",
        "name": "\"\\n\\n\".join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_122",
        "label": "locals",
        "title": "Called Function: locals\n(External/Library)",
        "type": "external_function",
        "name": "locals",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_123",
        "label": "norm",
        "title": "Called Function: norm\n(External/Library)",
        "type": "external_function",
        "name": "norm",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_124",
        "label": "os.getenv",
        "title": "Called Function: os.getenv\n(External/Library)",
        "type": "external_function",
        "name": "os.getenv",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#374151",
          "border": "#374151",
          "highlight": {
            "background": "#374151",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_125",
        "label": "int",
        "title": "Called Function: int\n(External/Library)",
        "type": "external_function",
        "name": "int",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_126",
        "label": "QdrantClient",
        "title": "Called Function: QdrantClient\n(External/Library)",
        "type": "external_function",
        "name": "QdrantClient",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_127",
        "label": "SentenceTransformer",
        "title": "Called Function: SentenceTransformer\n(External/Library)",
        "type": "external_function",
        "name": "SentenceTransformer",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_128",
        "label": "self._ensure_collection",
        "title": "Called Function: self._ensure_collection\n(External/Library)",
        "type": "external_function",
        "name": "self._ensure_collection",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_129",
        "label": "ollama.Client",
        "title": "Called Function: ollama.Client\n(External/Library)",
        "type": "external_function",
        "name": "ollama.Client",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_130",
        "label": "self.client.get_collections",
        "title": "Called Function: self.client.get_collections\n(External/Library)",
        "type": "external_function",
        "name": "self.client.get_collections",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_131",
        "label": "any",
        "title": "Called Function: any\n(External/Library)",
        "type": "external_function",
        "name": "any",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_132",
        "label": "self.client.create_collection",
        "title": "Called Function: self.client.create_collection\n(External/Library)",
        "type": "external_function",
        "name": "self.client.create_collection",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_133",
        "label": "models.VectorParams",
        "title": "Called Function: models.VectorParams\n(External/Library)",
        "type": "external_function",
        "name": "models.VectorParams",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_134",
        "label": "self.encoder.encode",
        "title": "Called Function: self.encoder.encode\n(External/Library)",
        "type": "external_function",
        "name": "self.encoder.encode",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_135",
        "label": "embedding.tolist",
        "title": "Called Function: embedding.tolist\n(External/Library)",
        "type": "external_function",
        "name": "embedding.tolist",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_136",
        "label": "self._chunk_text",
        "title": "Called Function: self._chunk_text\n(External/Library)",
        "type": "external_function",
        "name": "self._chunk_text",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_137",
        "label": "chunk.strip",
        "title": "Called Function: chunk.strip\n(External/Library)",
        "type": "external_function",
        "name": "chunk.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_138",
        "label": "self._get_embedding",
        "title": "Called Function: self._get_embedding\n(External/Library)",
        "type": "external_function",
        "name": "self._get_embedding",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_139",
        "label": "points.append",
        "title": "Called Function: points.append\n(External/Library)",
        "type": "external_function",
        "name": "points.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_140",
        "label": "models.PointStruct",
        "title": "Called Function: models.PointStruct\n(External/Library)",
        "type": "external_function",
        "name": "models.PointStruct",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_141",
        "label": "self.client.upsert",
        "title": "Called Function: self.client.upsert\n(External/Library)",
        "type": "external_function",
        "name": "self.client.upsert",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_142",
        "label": "self.client.query_points",
        "title": "Called Function: self.client.query_points\n(External/Library)",
        "type": "external_function",
        "name": "self.client.query_points",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_143",
        "label": "models.Filter",
        "title": "Called Function: models.Filter\n(External/Library)",
        "type": "external_function",
        "name": "models.Filter",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_144",
        "label": "models.FieldCondition",
        "title": "Called Function: models.FieldCondition\n(External/Library)",
        "type": "external_function",
        "name": "models.FieldCondition",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_145",
        "label": "models.MatchValue",
        "title": "Called Function: models.MatchValue\n(External/Library)",
        "type": "external_function",
        "name": "models.MatchValue",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_146",
        "label": "self.ollama_client.chat",
        "title": "Called Function: self.ollama_client.chat\n(External/Library)",
        "type": "external_function",
        "name": "self.ollama_client.chat",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_147",
        "label": "text.rfind",
        "title": "Called Function: text.rfind\n(External/Library)",
        "type": "external_function",
        "name": "text.rfind",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_148",
        "label": "text[start:end].strip",
        "title": "Called Function: text[start:end].strip\n(External/Library)",
        "type": "external_function",
        "name": "text[start:end].strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_149",
        "label": "chunks.append",
        "title": "Called Function: chunks.append\n(External/Library)",
        "type": "external_function",
        "name": "chunks.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_150",
        "label": "RAGService",
        "title": "Called Function: RAGService\n(External/Library)",
        "type": "external_function",
        "name": "RAGService",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_151",
        "label": "pdfplumber.open",
        "title": "Called Function: pdfplumber.open\n(External/Library)",
        "type": "external_function",
        "name": "pdfplumber.open",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_152",
        "label": "page.extract_words",
        "title": "Called Function: page.extract_words\n(External/Library)",
        "type": "external_function",
        "name": "page.extract_words",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_153",
        "label": "blocks.extend",
        "title": "Called Function: blocks.extend\n(External/Library)",
        "type": "external_function",
        "name": "blocks.extend",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_154",
        "label": "page.extract_tables",
        "title": "Called Function: page.extract_tables\n(External/Library)",
        "type": "external_function",
        "name": "page.extract_tables",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_155",
        "label": "doc.load_page",
        "title": "Called Function: doc.load_page\n(External/Library)",
        "type": "external_function",
        "name": "doc.load_page",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_156",
        "label": "data.get",
        "title": "Called Function: data.get\n(External/Library)",
        "type": "external_function",
        "name": "data.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_157",
        "label": "block.get",
        "title": "Called Function: block.get\n(External/Library)",
        "type": "external_function",
        "name": "block.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_158",
        "label": "line.get",
        "title": "Called Function: line.get\n(External/Library)",
        "type": "external_function",
        "name": "line.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_159",
        "label": "line_spans.append",
        "title": "Called Function: line_spans.append\n(External/Library)",
        "type": "external_function",
        "name": "line_spans.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_160",
        "label": "all_spans.append",
        "title": "Called Function: all_spans.append\n(External/Library)",
        "type": "external_function",
        "name": "all_spans.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_161",
        "label": "arabic_re.search",
        "title": "Called Function: arabic_re.search\n(External/Library)",
        "type": "external_function",
        "name": "arabic_re.search",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_162",
        "label": "sorted",
        "title": "Called Function: sorted\n(External/Library)",
        "type": "external_function",
        "name": "sorted",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_163",
        "label": "' '.join",
        "title": "Called Function: ' '.join\n(External/Library)",
        "type": "external_function",
        "name": "' '.join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_164",
        "label": "line_texts.append",
        "title": "Called Function: line_texts.append\n(External/Library)",
        "type": "external_function",
        "name": "line_texts.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_165",
        "label": "'\\n'.join(line_texts).strip",
        "title": "Called Function: '\\n'.join(line_texts).strip\n(External/Library)",
        "type": "external_function",
        "name": "'\\n'.join(line_texts).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_166",
        "label": "'\\n'.join",
        "title": "Called Function: '\\n'.join\n(External/Library)",
        "type": "external_function",
        "name": "'\\n'.join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_167",
        "label": "results.append",
        "title": "Called Function: results.append\n(External/Library)",
        "type": "external_function",
        "name": "results.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_168",
        "label": "TextBlock",
        "title": "Called Function: TextBlock\n(External/Library)",
        "type": "external_function",
        "name": "TextBlock",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_169",
        "label": "traceback.print_exc",
        "title": "Called Function: traceback.print_exc\n(External/Library)",
        "type": "external_function",
        "name": "traceback.print_exc",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_170",
        "label": "abs",
        "title": "Called Function: abs\n(External/Library)",
        "type": "external_function",
        "name": "abs",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_171",
        "label": "current_line.append",
        "title": "Called Function: current_line.append\n(External/Library)",
        "type": "external_function",
        "name": "current_line.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_172",
        "label": "blocks.append",
        "title": "Called Function: blocks.append\n(External/Library)",
        "type": "external_function",
        "name": "blocks.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_173",
        "label": "lines.append",
        "title": "Called Function: lines.append\n(External/Library)",
        "type": "external_function",
        "name": "lines.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_174",
        "label": "w.get",
        "title": "Called Function: w.get\n(External/Library)",
        "type": "external_function",
        "name": "w.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_175",
        "label": "by_page.setdefault(b.page_num, []).append",
        "title": "Called Function: by_page.setdefault(b.page_num, []).append\n(External/Library)",
        "type": "external_function",
        "name": "by_page.setdefault(b.page_num, []).append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_176",
        "label": "by_page.setdefault",
        "title": "Called Function: by_page.setdefault\n(External/Library)",
        "type": "external_function",
        "name": "by_page.setdefault",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_177",
        "label": "by_page.items",
        "title": "Called Function: by_page.items\n(External/Library)",
        "type": "external_function",
        "name": "by_page.items",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_178",
        "label": "b.text.strip",
        "title": "Called Function: b.text.strip\n(External/Library)",
        "type": "external_function",
        "name": "b.text.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_179",
        "label": "kept.append",
        "title": "Called Function: kept.append\n(External/Library)",
        "type": "external_function",
        "name": "kept.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_180",
        "label": "cleaned.extend",
        "title": "Called Function: cleaned.extend\n(External/Library)",
        "type": "external_function",
        "name": "cleaned.extend",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_181",
        "label": "str(cell).strip",
        "title": "Called Function: str(cell).strip\n(External/Library)",
        "type": "external_function",
        "name": "str(cell).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_182",
        "label": "convert_from_path",
        "title": "Called Function: convert_from_path\n(External/Library)",
        "type": "external_function",
        "name": "convert_from_path",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_183",
        "label": "pytesseract.image_to_data",
        "title": "Called Function: pytesseract.image_to_data\n(External/Library)",
        "type": "external_function",
        "name": "pytesseract.image_to_data",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_184",
        "label": "ocr_data['text'][i].strip",
        "title": "Called Function: ocr_data['text'][i].strip\n(External/Library)",
        "type": "external_function",
        "name": "ocr_data['text'][i].strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_185",
        "label": "current_block_words.append",
        "title": "Called Function: current_block_words.append\n(External/Library)",
        "type": "external_function",
        "name": "current_block_words.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_186",
        "label": "page_blocks.append",
        "title": "Called Function: page_blocks.append\n(External/Library)",
        "type": "external_function",
        "name": "page_blocks.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_187",
        "label": "str.maketrans",
        "title": "Called Function: str.maketrans\n(External/Library)",
        "type": "external_function",
        "name": "str.maketrans",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_188",
        "label": "text.translate",
        "title": "Called Function: text.translate\n(External/Library)",
        "type": "external_function",
        "name": "text.translate",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_189",
        "label": "MarianTokenizer.from_pretrained",
        "title": "Called Function: MarianTokenizer.from_pretrained\n(External/Library)",
        "type": "external_function",
        "name": "MarianTokenizer.from_pretrained",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_190",
        "label": "MarianMTModel.from_pretrained",
        "title": "Called Function: MarianMTModel.from_pretrained\n(External/Library)",
        "type": "external_function",
        "name": "MarianMTModel.from_pretrained",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_191",
        "label": "_model.eval",
        "title": "Called Function: _model.eval\n(External/Library)",
        "type": "external_function",
        "name": "_model.eval",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_192",
        "label": "torch.device",
        "title": "Called Function: torch.device\n(External/Library)",
        "type": "external_function",
        "name": "torch.device",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_193",
        "label": "torch.cuda.is_available",
        "title": "Called Function: torch.cuda.is_available\n(External/Library)",
        "type": "external_function",
        "name": "torch.cuda.is_available",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_194",
        "label": "_model.to",
        "title": "Called Function: _model.to\n(External/Library)",
        "type": "external_function",
        "name": "_model.to",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_195",
        "label": "re.search",
        "title": "Called Function: re.search\n(External/Library)",
        "type": "external_function",
        "name": "re.search",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_196",
        "label": "re.sub",
        "title": "Called Function: re.sub\n(External/Library)",
        "type": "external_function",
        "name": "re.sub",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_197",
        "label": "text.split",
        "title": "Called Function: text.split\n(External/Library)",
        "type": "external_function",
        "name": "text.split",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_198",
        "label": "line.strip",
        "title": "Called Function: line.strip\n(External/Library)",
        "type": "external_function",
        "name": "line.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_199",
        "label": "translated_lines.append",
        "title": "Called Function: translated_lines.append\n(External/Library)",
        "type": "external_function",
        "name": "translated_lines.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_200",
        "label": "re.split",
        "title": "Called Function: re.split\n(External/Library)",
        "type": "external_function",
        "name": "re.split",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_201",
        "label": "sentences[i].strip",
        "title": "Called Function: sentences[i].strip\n(External/Library)",
        "type": "external_function",
        "name": "sentences[i].strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_202",
        "label": "sentence_pairs.append",
        "title": "Called Function: sentence_pairs.append\n(External/Library)",
        "type": "external_function",
        "name": "sentence_pairs.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_203",
        "label": "sentence.strip",
        "title": "Called Function: sentence.strip\n(External/Library)",
        "type": "external_function",
        "name": "sentence.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_204",
        "label": "line_translated_parts.append",
        "title": "Called Function: line_translated_parts.append\n(External/Library)",
        "type": "external_function",
        "name": "line_translated_parts.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_205",
        "label": "translated.strip",
        "title": "Called Function: translated.strip\n(External/Library)",
        "type": "external_function",
        "name": "translated.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_206",
        "label": "'\\n'.join(translated_lines).strip",
        "title": "Called Function: '\\n'.join(translated_lines).strip\n(External/Library)",
        "type": "external_function",
        "name": "'\\n'.join(translated_lines).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_207",
        "label": "translated.lower",
        "title": "Called Function: translated.lower\n(External/Library)",
        "type": "external_function",
        "name": "translated.lower",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_208",
        "label": "translated_lower.count",
        "title": "Called Function: translated_lower.count\n(External/Library)",
        "type": "external_function",
        "name": "translated_lower.count",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_209",
        "label": "translated_lower.split",
        "title": "Called Function: translated_lower.split\n(External/Library)",
        "type": "external_function",
        "name": "translated_lower.split",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_210",
        "label": "word_counts.get",
        "title": "Called Function: word_counts.get\n(External/Library)",
        "type": "external_function",
        "name": "word_counts.get",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_211",
        "label": "word_counts.values",
        "title": "Called Function: word_counts.values\n(External/Library)",
        "type": "external_function",
        "name": "word_counts.values",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_212",
        "label": "original.strip",
        "title": "Called Function: original.strip\n(External/Library)",
        "type": "external_function",
        "name": "original.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_213",
        "label": "tokenizer",
        "title": "Called Function: tokenizer\n(External/Library)",
        "type": "external_function",
        "name": "tokenizer",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_214",
        "label": "next",
        "title": "Called Function: next\n(External/Library)",
        "type": "external_function",
        "name": "next",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_215",
        "label": "model.parameters",
        "title": "Called Function: model.parameters\n(External/Library)",
        "type": "external_function",
        "name": "model.parameters",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_216",
        "label": "v.to",
        "title": "Called Function: v.to\n(External/Library)",
        "type": "external_function",
        "name": "v.to",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_217",
        "label": "inputs.items",
        "title": "Called Function: inputs.items\n(External/Library)",
        "type": "external_function",
        "name": "inputs.items",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_218",
        "label": "torch.no_grad",
        "title": "Called Function: torch.no_grad\n(External/Library)",
        "type": "external_function",
        "name": "torch.no_grad",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_219",
        "label": "model.generate",
        "title": "Called Function: model.generate\n(External/Library)",
        "type": "external_function",
        "name": "model.generate",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_220",
        "label": "tokenizer.decode",
        "title": "Called Function: tokenizer.decode\n(External/Library)",
        "type": "external_function",
        "name": "tokenizer.decode",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_221",
        "label": "translated[0].detach().cpu",
        "title": "Called Function: translated[0].detach().cpu\n(External/Library)",
        "type": "external_function",
        "name": "translated[0].detach().cpu",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_222",
        "label": "translated[0].detach",
        "title": "Called Function: translated[0].detach\n(External/Library)",
        "type": "external_function",
        "name": "translated[0].detach",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_223",
        "label": "translated_text.strip",
        "title": "Called Function: translated_text.strip\n(External/Library)",
        "type": "external_function",
        "name": "translated_text.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_224",
        "label": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True).strip",
        "title": "Called Function: tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True).strip\n(External/Library)",
        "type": "external_function",
        "name": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_225",
        "label": "(trans1 + \" \" + trans2).strip",
        "title": "Called Function: (trans1 + \" \" + trans2).strip\n(External/Library)",
        "type": "external_function",
        "name": "(trans1 + \" \" + trans2).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_226",
        "label": "c.strip",
        "title": "Called Function: c.strip\n(External/Library)",
        "type": "external_function",
        "name": "c.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_227",
        "label": "results.extend",
        "title": "Called Function: results.extend\n(External/Library)",
        "type": "external_function",
        "name": "results.extend",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_228",
        "label": "tokenizer.batch_decode",
        "title": "Called Function: tokenizer.batch_decode\n(External/Library)",
        "type": "external_function",
        "name": "tokenizer.batch_decode",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_229",
        "label": "outputs.detach().cpu",
        "title": "Called Function: outputs.detach().cpu\n(External/Library)",
        "type": "external_function",
        "name": "outputs.detach().cpu",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_230",
        "label": "outputs.detach",
        "title": "Called Function: outputs.detach\n(External/Library)",
        "type": "external_function",
        "name": "outputs.detach",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_231",
        "label": "d.strip",
        "title": "Called Function: d.strip\n(External/Library)",
        "type": "external_function",
        "name": "d.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_232",
        "label": "os.path.getsize",
        "title": "Called Function: os.path.getsize\n(External/Library)",
        "type": "external_function",
        "name": "os.path.getsize",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_233",
        "label": "image.convert",
        "title": "Called Function: image.convert\n(External/Library)",
        "type": "external_function",
        "name": "image.convert",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_234",
        "label": "pytesseract.image_to_string",
        "title": "Called Function: pytesseract.image_to_string\n(External/Library)",
        "type": "external_function",
        "name": "pytesseract.image_to_string",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_235",
        "label": "extracted_texts.append",
        "title": "Called Function: extracted_texts.append\n(External/Library)",
        "type": "external_function",
        "name": "extracted_texts.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_236",
        "label": "'\\n\\n'.join",
        "title": "Called Function: '\\n\\n'.join\n(External/Library)",
        "type": "external_function",
        "name": "'\\n\\n'.join",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_237",
        "label": "full_text.replace",
        "title": "Called Function: full_text.replace\n(External/Library)",
        "type": "external_function",
        "name": "full_text.replace",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_238",
        "label": "full_text.split",
        "title": "Called Function: full_text.split\n(External/Library)",
        "type": "external_function",
        "name": "full_text.split",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_239",
        "label": "cleaned_lines.append",
        "title": "Called Function: cleaned_lines.append\n(External/Library)",
        "type": "external_function",
        "name": "cleaned_lines.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_240",
        "label": "full_text.strip",
        "title": "Called Function: full_text.strip\n(External/Library)",
        "type": "external_function",
        "name": "full_text.strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_241",
        "label": "PdfReader",
        "title": "Called Function: PdfReader\n(External/Library)",
        "type": "external_function",
        "name": "PdfReader",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_242",
        "label": "page.extract_text",
        "title": "Called Function: page.extract_text\n(External/Library)",
        "type": "external_function",
        "name": "page.extract_text",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_243",
        "label": "np.array",
        "title": "Called Function: np.array\n(External/Library)",
        "type": "external_function",
        "name": "np.array",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_244",
        "label": "cv2.cvtColor",
        "title": "Called Function: cv2.cvtColor\n(External/Library)",
        "type": "external_function",
        "name": "cv2.cvtColor",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_245",
        "label": "cv2.bilateralFilter",
        "title": "Called Function: cv2.bilateralFilter\n(External/Library)",
        "type": "external_function",
        "name": "cv2.bilateralFilter",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_246",
        "label": "cv2.adaptiveThreshold",
        "title": "Called Function: cv2.adaptiveThreshold\n(External/Library)",
        "type": "external_function",
        "name": "cv2.adaptiveThreshold",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_247",
        "label": "np.mean",
        "title": "Called Function: np.mean\n(External/Library)",
        "type": "external_function",
        "name": "np.mean",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_248",
        "label": "cv2.bitwise_not",
        "title": "Called Function: cv2.bitwise_not\n(External/Library)",
        "type": "external_function",
        "name": "cv2.bitwise_not",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_249",
        "label": "cv2.getStructuringElement",
        "title": "Called Function: cv2.getStructuringElement\n(External/Library)",
        "type": "external_function",
        "name": "cv2.getStructuringElement",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_250",
        "label": "cv2.morphologyEx",
        "title": "Called Function: cv2.morphologyEx\n(External/Library)",
        "type": "external_function",
        "name": "cv2.morphologyEx",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_251",
        "label": "cv2.Canny",
        "title": "Called Function: cv2.Canny\n(External/Library)",
        "type": "external_function",
        "name": "cv2.Canny",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_252",
        "label": "cv2.HoughLines",
        "title": "Called Function: cv2.HoughLines\n(External/Library)",
        "type": "external_function",
        "name": "cv2.HoughLines",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_253",
        "label": "angles.append",
        "title": "Called Function: angles.append\n(External/Library)",
        "type": "external_function",
        "name": "angles.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_254",
        "label": "np.median",
        "title": "Called Function: np.median\n(External/Library)",
        "type": "external_function",
        "name": "np.median",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_255",
        "label": "cv2.getRotationMatrix2D",
        "title": "Called Function: cv2.getRotationMatrix2D\n(External/Library)",
        "type": "external_function",
        "name": "cv2.getRotationMatrix2D",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_256",
        "label": "cv2.warpAffine",
        "title": "Called Function: cv2.warpAffine\n(External/Library)",
        "type": "external_function",
        "name": "cv2.warpAffine",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_257",
        "label": "camelot.read_pdf",
        "title": "Called Function: camelot.read_pdf\n(External/Library)",
        "type": "external_function",
        "name": "camelot.read_pdf",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_258",
        "label": "hasattr",
        "title": "Called Function: hasattr\n(External/Library)",
        "type": "external_function",
        "name": "hasattr",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_259",
        "label": "getattr",
        "title": "Called Function: getattr\n(External/Library)",
        "type": "external_function",
        "name": "getattr",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_260",
        "label": "df.iterrows",
        "title": "Called Function: df.iterrows\n(External/Library)",
        "type": "external_function",
        "name": "df.iterrows",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_261",
        "label": "pd.notna",
        "title": "Called Function: pd.notna\n(External/Library)",
        "type": "external_function",
        "name": "pd.notna",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_262",
        "label": "str(cell_text).strip",
        "title": "Called Function: str(cell_text).strip\n(External/Library)",
        "type": "external_function",
        "name": "str(cell_text).strip",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_263",
        "label": "TableCell",
        "title": "Called Function: TableCell\n(External/Library)",
        "type": "external_function",
        "name": "TableCell",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_264",
        "label": "cells.append",
        "title": "Called Function: cells.append\n(External/Library)",
        "type": "external_function",
        "name": "cells.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_265",
        "label": "Table",
        "title": "Called Function: Table\n(External/Library)",
        "type": "external_function",
        "name": "Table",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_266",
        "label": "tables.append",
        "title": "Called Function: tables.append\n(External/Library)",
        "type": "external_function",
        "name": "tables.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_267",
        "label": "table_obj.extract",
        "title": "Called Function: table_obj.extract\n(External/Library)",
        "type": "external_function",
        "name": "table_obj.extract",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_268",
        "label": "list",
        "title": "Called Function: list\n(External/Library)",
        "type": "external_function",
        "name": "list",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_269",
        "label": "blocks_by_page[block.page_num].append",
        "title": "Called Function: blocks_by_page[block.page_num].append\n(External/Library)",
        "type": "external_function",
        "name": "blocks_by_page[block.page_num].append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_270",
        "label": "blocks_by_page.items",
        "title": "Called Function: blocks_by_page.items\n(External/Library)",
        "type": "external_function",
        "name": "blocks_by_page.items",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_271",
        "label": "current_row.append",
        "title": "Called Function: current_row.append\n(External/Library)",
        "type": "external_function",
        "name": "current_row.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      },
      {
        "id": "func_272",
        "label": "rows.append",
        "title": "Called Function: rows.append\n(External/Library)",
        "type": "external_function",
        "name": "rows.append",
        "file": null,
        "file_path": null,
        "value": 12,
        "size": 12,
        "color": {
          "background": "#00F0FF",
          "border": "#00F0FF",
          "highlight": {
            "background": "#00F0FF",
            "border": "#ffffff"
          }
        },
        "font": {
          "color": "#ffffff",
          "size": 12,
          "face": "JetBrains Mono"
        },
        "borderWidth": 2
      }
    ],
    "edges": [
      {
        "from": "func_0",
        "to": "func_54",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_1",
        "to": "func_55",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_1",
        "to": "func_56",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_1",
        "to": "func_57",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_1",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_1",
        "to": "func_59",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_2",
        "to": "func_60",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_2",
        "to": "func_61",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_2",
        "to": "func_62",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_3",
        "to": "func_63",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_3",
        "to": "func_64",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_4",
        "to": "func_2",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_4",
        "to": "func_3",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_5",
        "to": "func_67",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_5",
        "to": "func_56",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_5",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_69",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_1",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_2",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_11",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_70",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_71",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_72",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_73",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_74",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_6",
        "to": "func_3",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_69",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_1",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_4",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_35",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_75",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_56",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_31",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_7",
        "to": "func_76",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_8",
        "to": "func_77",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_8",
        "to": "func_76",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_8",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_8",
        "to": "func_78",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_79",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_82",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_83",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_84",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_85",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_86",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_87",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_63",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_9",
        "to": "func_64",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_88",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_9",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_79",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_90",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_46",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_63",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_91",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_92",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_93",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_94",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_95",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_96",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_12",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_97",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_31",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_98",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_99",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_100",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_101",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_102",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_103",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_104",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_105",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_106",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_107",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_108",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_109",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_110",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_111",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_112",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_113",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_114",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_116",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_117",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_119",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_120",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_84",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_64",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_121",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_122",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_10",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_11",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_11",
        "to": "func_10",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_12",
        "to": "func_123",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_13",
        "to": "func_126",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_13",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_13",
        "to": "func_127",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_13",
        "to": "func_128",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_13",
        "to": "func_129",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_14",
        "to": "func_130",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_14",
        "to": "func_131",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_14",
        "to": "func_132",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_14",
        "to": "func_133",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_14",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_15",
        "to": "func_134",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_15",
        "to": "func_135",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_15",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_136",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_137",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_138",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_139",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_140",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_70",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_141",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_16",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_138",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_142",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_143",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_144",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_145",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_121",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_129",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_17",
        "to": "func_146",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_18",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_18",
        "to": "func_147",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_18",
        "to": "func_148",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_18",
        "to": "func_149",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_18",
        "to": "func_150",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_19",
        "to": "func_83",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_21",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_151",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_152",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_22",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_153",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_154",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_26",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_27",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_20",
        "to": "func_25",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_79",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_155",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_95",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_156",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_157",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_158",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_111",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_112",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_159",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_160",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_131",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_161",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_162",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_163",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_164",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_165",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_166",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_167",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_168",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_84",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_21",
        "to": "func_169",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_22",
        "to": "func_170",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_22",
        "to": "func_171",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_22",
        "to": "func_23",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_22",
        "to": "func_172",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_170",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_171",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_173",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_131",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_161",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_174",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_162",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_163",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_164",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_166",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_23",
        "to": "func_168",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_24",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_24",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_175",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_176",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_177",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_162",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_178",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_24",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_179",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_25",
        "to": "func_180",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_26",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_26",
        "to": "func_181",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_26",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_26",
        "to": "func_168",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_26",
        "to": "func_172",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_182",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_183",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_184",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_125",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_185",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_170",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_116",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_28",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_186",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_153",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_27",
        "to": "func_169",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_131",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_161",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_174",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_162",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_163",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_28",
        "to": "func_168",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_29",
        "to": "func_187",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_29",
        "to": "func_188",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_189",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_190",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_191",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_192",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_193",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_30",
        "to": "func_194",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_75",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_96",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_195",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_30",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_196",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_197",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_198",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_199",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_200",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_201",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_202",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_203",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_204",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_33",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_205",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_32",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_163",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_206",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_31",
        "to": "func_166",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_207",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_208",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_209",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_210",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_211",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_205",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_212",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_32",
        "to": "func_195",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_83",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_89",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_96",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_163",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_197",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_213",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_214",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_215",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_216",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_217",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_218",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_219",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_220",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_221",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_222",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_223",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_32",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_224",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_80",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_33",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_33",
        "to": "func_225",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_226",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_227",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_213",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_214",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_215",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_216",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_217",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_218",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_219",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_228",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_229",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_230",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_231",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_167",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_34",
        "to": "func_33",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_63",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_88",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_232",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_182",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_233",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_36",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_234",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_83",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_166",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_198",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_197",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_235",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_236",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_196",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_237",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_238",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_239",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_240",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_60",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_87",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_241",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_242",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_64",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_35",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_243",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_244",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_245",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_246",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_247",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_248",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_249",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_250",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_37",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_170",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_36",
        "to": "func_38",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_37",
        "to": "func_251",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_37",
        "to": "func_252",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_37",
        "to": "func_253",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_37",
        "to": "func_106",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_37",
        "to": "func_254",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_38",
        "to": "func_255",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_38",
        "to": "func_256",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_39",
        "to": "func_83",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_39",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_39",
        "to": "func_81",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_257",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_258",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_259",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_260",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_261",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_262",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_263",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_125",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_264",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_265",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_266",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_41",
        "to": "func_42",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_151",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_92",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_267",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_258",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_268",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_48",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_115",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_262",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_68",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_263",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_264",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_265",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_266",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_42",
        "to": "func_169",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_269",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_270",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_44",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_118",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_263",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_264",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_265",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_43",
        "to": "func_266",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_162",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_116",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_58",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_170",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_271",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      },
      {
        "from": "func_44",
        "to": "func_272",
        "label": "calls",
        "arrows": "to",
        "color": {
          "color": "#7c3aed",
          "opacity": 0.6,
          "highlight": "#ffffff"
        },
        "width": 2,
        "smooth": {
          "type": "continuous",
          "roundness": 0.5
        }
      }
    ],
    "summary": {
      "total_nodes": 273,
      "total_edges": 418,
      "defined_functions": 45,
      "external_functions": 228,
      "high_impact": 0,
      "orphaned": 11
    }
  },
  "report": {
    "version": "2.0.0",
    "generated_at": "2026-01-02T15:48:47.052446Z",
    "project": {
      "path": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend",
      "name": "backend"
    },
    "summary": {
      "total_endpoints": 4,
      "total_api_calls": 0,
      "total_connections": 0,
      "total_imports": 87,
      "total_function_calls": 690,
      "total_function_definitions": 46,
      "certain_connections": 0,
      "high_confidence_connections": 0,
      "medium_confidence_connections": 0,
      "low_confidence_connections": 0,
      "high_impact_nodes": 5,
      "ui_issues": {
        "total": 0,
        "high": 0,
        "medium": 0,
        "low": 0
      }
    },
    "endpoints": [
      {
        "method": "GET",
        "path": "/",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
        "line": 28,
        "language": "python",
        "type": "endpoint",
        "framework": "fastapi",
        "confidence": "confident",
        "detection_method": "ast"
      },
      {
        "method": "POST",
        "path": "/chat",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
        "line": 7,
        "language": "python",
        "type": "endpoint",
        "framework": "fastapi",
        "confidence": "confident",
        "detection_method": "ast"
      },
      {
        "method": "POST",
        "path": "/translate-pdf",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
        "line": 12,
        "language": "python",
        "type": "endpoint",
        "framework": "fastapi",
        "confidence": "confident",
        "detection_method": "ast"
      },
      {
        "method": "POST",
        "path": "/process",
        "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
        "line": 10,
        "language": "python",
        "type": "endpoint",
        "framework": "fastapi",
        "confidence": "confident",
        "detection_method": "ast"
      }
    ],
    "api_calls": [],
    "connections": [],
    "dependencies": {
      "imports": [
        {
          "type": "import",
          "module": "sys",
          "imported_names": [
            "sys"
          ],
          "line": 1,
          "code": "import sys",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 2,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "translate_to_english",
          "imported_names": [],
          "line": 7,
          "code": "from services.translate_service import translate_to_english",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "FastAPI",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import FastAPI",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "CORSMiddleware",
          "imported_names": [],
          "line": 2,
          "code": "from fastapi.middleware.cors import CORSMiddleware",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "controllers.ocr_controller",
          "imported_names": [
            "router"
          ],
          "line": 3,
          "code": "from controllers.ocr_controller import router as ocr_router",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "controllers.pdf_controller",
          "imported_names": [
            "router"
          ],
          "line": 4,
          "code": "from controllers.pdf_controller import router as pdf_router",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "controllers.chat_controller",
          "imported_names": [
            "router"
          ],
          "line": 5,
          "code": "from controllers.chat_controller import router as chat_router",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "global_exception_handler",
          "imported_names": [],
          "line": 6,
          "code": "from handlers.error_handler import global_exception_handler",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "uvicorn",
          "imported_names": [
            "uvicorn"
          ],
          "line": 40,
          "code": "import uvicorn",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "UploadFile",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import HTTPException, UploadFile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "tempfile",
          "imported_names": [
            "tempfile"
          ],
          "line": 1,
          "code": "import tempfile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 2,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "contextlib",
          "imported_names": [
            "contextlib"
          ],
          "line": 3,
          "code": "import contextlib",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "BaseModel",
          "imported_names": [],
          "line": 1,
          "code": "from pydantic import BaseModel",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/models/chat.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "HTTPException",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import APIRouter, HTTPException",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "ChatRequest",
          "imported_names": [],
          "line": 2,
          "code": "from models.chat import ChatRequest",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "rag_service",
          "imported_names": [],
          "line": 3,
          "code": "from services.rag_service import rag_service",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "BackgroundTasks",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import APIRouter, File, UploadFile, HTTPException, BackgroundTasks",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "FileResponse",
          "imported_names": [],
          "line": 2,
          "code": "from fastapi.responses import FileResponse",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "uuid",
          "imported_names": [
            "uuid"
          ],
          "line": 3,
          "code": "import uuid",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 4,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "translate_pdf_with_layout",
          "imported_names": [],
          "line": 5,
          "code": "from services.pdf_translation_service import translate_pdf_with_layout",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "rag_service",
          "imported_names": [],
          "line": 6,
          "code": "from services.rag_service import rag_service",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "validate_pdf",
          "imported_names": [],
          "line": 7,
          "code": "from utils.validators import validate_pdf",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "cleanup_file",
          "imported_names": [],
          "line": 8,
          "code": "from utils.file_utils import save_content_to_temp, cleanup_file",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "HTTPException",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import APIRouter, File, UploadFile, HTTPException",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "JSONResponse",
          "imported_names": [],
          "line": 2,
          "code": "from fastapi.responses import JSONResponse",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "extract_arabic_text",
          "imported_names": [],
          "line": 3,
          "code": "from services.ocr_service import extract_arabic_text",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "translate_to_english",
          "imported_names": [],
          "line": 4,
          "code": "from services.translate_service import translate_to_english",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "validate_pdf",
          "imported_names": [],
          "line": 5,
          "code": "from utils.validators import validate_pdf",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "temporary_file",
          "imported_names": [],
          "line": 6,
          "code": "from utils.file_utils import temporary_file",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "HTTPException",
          "imported_names": [],
          "line": 1,
          "code": "from fastapi import Request, HTTPException",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "JSONResponse",
          "imported_names": [],
          "line": 2,
          "code": "from fastapi.responses import JSONResponse",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "tempfile",
          "imported_names": [
            "tempfile"
          ],
          "line": 5,
          "code": "import tempfile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 6,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 7,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "shutil",
          "imported_names": [
            "shutil"
          ],
          "line": 8,
          "code": "import shutil",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "Optional",
          "imported_names": [],
          "line": 9,
          "code": "from typing import Tuple, List, Optional",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "normalize_arabic_numerals",
          "imported_names": [],
          "line": 10,
          "code": "from services.layout_extraction_service import (\n    extract_text_blocks_with_layout,\n    TextBlock,\n    normalize_arabic_numerals\n)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "Table",
          "imported_names": [],
          "line": 15,
          "code": "from services.table_extraction_service import (\n    extract_tables_from_pdf,\n    extract_tables_from_ocr,\n    Table\n)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "translate_to_english",
          "imported_names": [],
          "line": 20,
          "code": "from services.translate_service import translate_to_english",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "fitz",
          "imported_names": [
            "fitz"
          ],
          "line": 24,
          "code": "import fitz",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "ocrmypdf",
          "imported_names": [
            "ocrmypdf"
          ],
          "line": 32,
          "code": "import ocrmypdf",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "services.layout_extraction_service",
          "imported_names": [
            "normalize_arabic_numerals"
          ],
          "line": 510,
          "code": "from services.layout_extraction_service import normalize_arabic_numerals as norm",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 1,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "uuid",
          "imported_names": [
            "uuid"
          ],
          "line": 2,
          "code": "import uuid",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "Optional",
          "imported_names": [],
          "line": 3,
          "code": "from typing import List, Dict, Any, Optional",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "QdrantClient",
          "imported_names": [],
          "line": 4,
          "code": "from qdrant_client import QdrantClient",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "models",
          "imported_names": [],
          "line": 5,
          "code": "from qdrant_client.http import models",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "ollama",
          "imported_names": [
            "ollama"
          ],
          "line": 6,
          "code": "import ollama",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "SentenceTransformer",
          "imported_names": [],
          "line": 7,
          "code": "from sentence_transformers import SentenceTransformer",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "pdfplumber",
          "imported_names": [
            "pdfplumber"
          ],
          "line": 5,
          "code": "import pdfplumber",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "pytesseract",
          "imported_names": [
            "pytesseract"
          ],
          "line": 6,
          "code": "import pytesseract",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "fitz",
          "imported_names": [
            "fitz"
          ],
          "line": 8,
          "code": "import fitz",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "tempfile",
          "imported_names": [
            "tempfile"
          ],
          "line": 12,
          "code": "import tempfile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 13,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "convert_from_path",
          "imported_names": [],
          "line": 14,
          "code": "from pdf2image import convert_from_path",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "Tuple",
          "imported_names": [],
          "line": 15,
          "code": "from typing import List, Dict, Tuple",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 16,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 99,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "traceback",
          "imported_names": [
            "traceback"
          ],
          "line": 163,
          "code": "import traceback",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 216,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "traceback",
          "imported_names": [
            "traceback"
          ],
          "line": 431,
          "code": "import traceback",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 448,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "MarianTokenizer",
          "imported_names": [],
          "line": 1,
          "code": "from transformers import MarianMTModel, MarianTokenizer",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "torch",
          "imported_names": [
            "torch"
          ],
          "line": 2,
          "code": "import torch",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 50,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 149,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 192,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "ocrmypdf",
          "imported_names": [
            "ocrmypdf"
          ],
          "line": 1,
          "code": "import ocrmypdf",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "ocrmypdf.exceptions",
          "imported_names": [
            "ocrmypdf.exceptions"
          ],
          "line": 2,
          "code": "import ocrmypdf.exceptions",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "pytesseract",
          "imported_names": [
            "pytesseract"
          ],
          "line": 3,
          "code": "import pytesseract",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "tempfile",
          "imported_names": [
            "tempfile"
          ],
          "line": 4,
          "code": "import tempfile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 5,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "re",
          "imported_names": [
            "re"
          ],
          "line": 6,
          "code": "import re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "convert_from_path",
          "imported_names": [],
          "line": 7,
          "code": "from pdf2image import convert_from_path",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "PdfReader",
          "imported_names": [],
          "line": 8,
          "code": "from PyPDF2 import PdfReader",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "cv2",
          "imported_names": [
            "cv2"
          ],
          "line": 9,
          "code": "import cv2",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "pdfplumber",
          "imported_names": [
            "pdfplumber"
          ],
          "line": 5,
          "code": "import pdfplumber",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "tempfile",
          "imported_names": [
            "tempfile"
          ],
          "line": 6,
          "code": "import tempfile",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "os",
          "imported_names": [
            "os"
          ],
          "line": 7,
          "code": "import os",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "Tuple",
          "imported_names": [],
          "line": 9,
          "code": "from typing import List, Dict, Tuple",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import_from",
          "module": "TextBlock",
          "imported_names": [],
          "line": 10,
          "code": "from services.layout_extraction_service import TextBlock",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "camelot",
          "imported_names": [
            "camelot"
          ],
          "line": 14,
          "code": "import camelot",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "traceback",
          "imported_names": [
            "traceback"
          ],
          "line": 226,
          "code": "import traceback",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "import",
          "module": "traceback",
          "imported_names": [
            "traceback"
          ],
          "line": 232,
          "code": "import traceback",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        }
      ],
      "function_calls": [
        {
          "type": "function_call",
          "function": "sys.path.append",
          "line": 5,
          "code": "sys.path.append(os.path.dirname(os.path.abspath(__file__)))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.dirname",
          "line": 5,
          "code": "os.path.dirname(os.path.abspath(__file__))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.abspath",
          "line": 5,
          "code": "os.path.abspath(__file__)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 17,
          "code": "print(\"Starting Translation Debug...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 18,
          "code": "print(\"-\" * 50)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 21,
          "code": "print(f\"Original: {text}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 22,
          "code": "print(\"-\" * 20)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_to_english",
          "line": 24,
          "code": "translate_to_english(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 25,
          "code": "print(f\"Translated: {translated}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 27,
          "code": "print(f\"Error: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 28,
          "code": "print(\"-\" * 50)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/debug_translation.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "FastAPI",
          "line": 8,
          "code": "FastAPI(title=\"Arabic OCR Translation API\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.add_middleware",
          "line": 11,
          "code": "app.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"http://localhost:517",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.add_exception_handler",
          "line": 21,
          "code": "app.add_exception_handler(Exception, global_exception_handler)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.include_router",
          "line": 24,
          "code": "app.include_router(ocr_router)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.include_router",
          "line": 25,
          "code": "app.include_router(pdf_router)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.include_router",
          "line": 26,
          "code": "app.include_router(chat_router)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "app.get",
          "line": 28,
          "code": "app.get(\"/\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "uvicorn.run",
          "line": 41,
          "code": "uvicorn.run(app, host=\"0.0.0.0\", port=8000)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "file.filename.endswith",
          "line": 8,
          "code": "file.filename.endswith('.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "HTTPException",
          "line": 9,
          "code": "HTTPException(status_code=400, detail=\"File must be a PDF\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "file.read",
          "line": 11,
          "code": "file.read()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 13,
          "code": "len(content)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "HTTPException",
          "line": 14,
          "code": "HTTPException(status_code=400, detail=\"Uploaded file is empty\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "content.startswith",
          "line": 16,
          "code": "content.startswith(b'%PDF')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "HTTPException",
          "line": 17,
          "code": "HTTPException(status_code=400, detail=\"File does not appear to be a valid PDF\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tempfile.NamedTemporaryFile",
          "line": 10,
          "code": "tempfile.NamedTemporaryFile(delete=False, suffix=suffix)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tmp.write",
          "line": 11,
          "code": "tmp.write(content)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tmp.flush",
          "line": 12,
          "code": "tmp.flush()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 19,
          "code": "os.path.exists(path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.unlink",
          "line": 21,
          "code": "os.unlink(path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "save_content_to_temp",
          "line": 31,
          "code": "save_content_to_temp(content, suffix)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cleanup_file",
          "line": 35,
          "code": "cleanup_file(path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "APIRouter",
          "line": 5,
          "code": "APIRouter()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "router.post",
          "line": 7,
          "code": "router.post(\"/chat\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "rag_service.chat_with_document",
          "line": 13,
          "code": "rag_service.chat_with_document(request.doc_id, request.query)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "HTTPException",
          "line": 16,
          "code": "HTTPException(status_code=500, detail=str(e))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 16,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "APIRouter",
          "line": 10,
          "code": "APIRouter()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "router.post",
          "line": 12,
          "code": "router.post(\"/translate-pdf\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "File",
          "line": 13,
          "code": "File(...)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "validate_pdf",
          "line": 22,
          "code": "validate_pdf(file)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "save_content_to_temp",
          "line": 25,
          "code": "save_content_to_temp(content, suffix='.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "save_content_to_temp",
          "line": 27,
          "code": "save_content_to_temp(b\"\", suffix='.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_pdf_with_layout",
          "line": 30,
          "code": "translate_pdf_with_layout(input_pdf_path, output_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 40,
          "code": "str(uuid.uuid4())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "uuid.uuid4",
          "line": 40,
          "code": "uuid.uuid4()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats.get",
          "line": 41,
          "code": "stats.get('full_text_content', '')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 44,
          "code": "print(f\"Indexing document {doc_id} for RAG...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "rag_service.index_document",
          "line": 45,
          "code": "rag_service.index_document(doc_id, full_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 46,
          "code": "print(f\"Indexing complete for {doc_id}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "background_tasks.add_task",
          "line": 52,
          "code": "background_tasks.add_task(cleanup_file, output_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "background_tasks.add_task",
          "line": 53,
          "code": "background_tasks.add_task(cleanup_file, input_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "FileResponse",
          "line": 55,
          "code": "FileResponse(\n            output_pdf_path,\n            media_type='application/p",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats.get",
          "line": 60,
          "code": "stats.get('pages_processed', 0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats.get",
          "line": 61,
          "code": "stats.get('text_blocks_translated', 0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats.get",
          "line": 62,
          "code": "stats.get('tables_translated', 0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cleanup_file",
          "line": 69,
          "code": "cleanup_file(input_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cleanup_file",
          "line": 70,
          "code": "cleanup_file(output_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "APIRouter",
          "line": 8,
          "code": "APIRouter()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "router.post",
          "line": 10,
          "code": "router.post(\"/process\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "File",
          "line": 11,
          "code": "File(...)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "validate_pdf",
          "line": 20,
          "code": "validate_pdf(file)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "temporary_file",
          "line": 23,
          "code": "temporary_file(content, suffix='.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "extract_arabic_text",
          "line": 25,
          "code": "extract_arabic_text(tmp_file_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_text.strip",
          "line": 27,
          "code": "arabic_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "HTTPException",
          "line": 28,
          "code": "HTTPException(\n                    status_code=400, \n                    detail=",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_to_english",
          "line": 34,
          "code": "translate_to_english(arabic_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "JSONResponse",
          "line": 36,
          "code": "JSONResponse(\n                status_code=200,\n                content={\n       ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "isinstance",
          "line": 5,
          "code": "isinstance(exc, HTTPException)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "JSONResponse",
          "line": 6,
          "code": "JSONResponse(\n            status_code=exc.status_code,\n            content={\"det",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 11,
          "code": "str(exc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "error_msg.lower",
          "line": 18,
          "code": "error_msg.lower()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "error_msg.lower",
          "line": 21,
          "code": "error_msg.lower()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "error_msg.lower",
          "line": 21,
          "code": "error_msg.lower()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "error_msg.lower",
          "line": 24,
          "code": "error_msg.lower()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "JSONResponse",
          "line": 28,
          "code": "JSONResponse(\n        status_code=status_code,\n        content={\"detail\": detail",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 28,
          "code": "print(\"Warning: PyMuPDF not available. In-place PDF editing will not work.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 36,
          "code": "print(\"Warning: ocrmypdf not available. Scanned PDFs will not be processed corre",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.open",
          "line": 47,
          "code": "fitz.open(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 52,
          "code": "range(min(3, len(doc)))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 52,
          "code": "min(3, len(doc))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 52,
          "code": "len(doc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc[i].get_text",
          "line": 53,
          "code": "doc[i].get_text()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 54,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 55,
          "code": "len(text.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 55,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.close",
          "line": 57,
          "code": "doc.close()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 65,
          "code": "print(\"Warning: PDF seems scanned but ocrmypdf is not available.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 68,
          "code": "print(\"PDF appears to be scanned/image-based. Running OCR...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tempfile.mkstemp",
          "line": 71,
          "code": "tempfile.mkstemp(suffix='.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.close",
          "line": 72,
          "code": "os.close(temp_fd)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "ocrmypdf.ocr",
          "line": 75,
          "code": "ocrmypdf.ocr(\n                pdf_path,\n                temp_path,\n             ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 83,
          "code": "print(\"OCR complete. Using searchable PDF version.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 86,
          "code": "print(f\"OCR failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 87,
          "code": "os.path.exists(temp_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.unlink",
          "line": 88,
          "code": "os.unlink(temp_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 92,
          "code": "print(f\"Error checking/OCRing PDF: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 101,
          "code": "Exception(\"PyMuPDF is required for in-place PDF editing but is not available.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_ensure_searchable_pdf",
          "line": 104,
          "code": "_ensure_searchable_pdf(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 107,
          "code": "print(\"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 108,
          "code": "print(\"Starting in-place PDF translation (block-level processing)\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 109,
          "code": "print(\"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.open",
          "line": 112,
          "code": "fitz.open(working_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 113,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 116,
          "code": "re.compile(r'^[\\d\\s\\.,\\-%$\u20ac\u00a3/]+$')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 119,
          "code": "len(doc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.join",
          "line": 126,
          "code": "os.path.join(os.path.dirname(os.path.dirname(__file__)), \"assets\", \"fonts\", \"Not",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.dirname",
          "line": 126,
          "code": "os.path.dirname(os.path.dirname(__file__))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.dirname",
          "line": 126,
          "code": "os.path.dirname(__file__)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.join",
          "line": 127,
          "code": "os.path.join(os.path.dirname(os.path.dirname(__file__)), \"assets\", \"fonts\", \"Not",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.dirname",
          "line": 127,
          "code": "os.path.dirname(os.path.dirname(__file__))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.dirname",
          "line": 127,
          "code": "os.path.dirname(__file__)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 129,
          "code": "os.path.exists(font_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 130,
          "code": "os.path.exists(font_path_bold)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 133,
          "code": "print(f\"Using custom font: {font_path}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 135,
          "code": "print(f\"Using custom bold font: {font_path_bold}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 138,
          "code": "range(len(doc))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 138,
          "code": "len(doc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_font",
          "line": 144,
          "code": "page.insert_font(fontname=\"noto\", fontfile=font_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 146,
          "code": "print(f\"Font registration warning: {fe}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_font",
          "line": 151,
          "code": "page.insert_font(fontname=\"noto-bold\", fontfile=font_path_bold)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 153,
          "code": "print(f\"Bold Font registration warning: {fe}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 155,
          "code": "print(f\"\\nProcessing page {page_num + 1}/{len(doc)}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 155,
          "code": "len(doc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.find_tables",
          "line": 163,
          "code": "page.find_tables()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 165,
          "code": "print(f\"  Found {len(tables)} tables.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 165,
          "code": "len(tables)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "table_exclusion_rects.append",
          "line": 167,
          "code": "table_exclusion_rects.append(table.bbox)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.get_text(\"text\", clip=cell).strip",
          "line": 173,
          "code": "page.get_text(\"text\", clip=cell).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.get_text",
          "line": 173,
          "code": "page.get_text(\"text\", clip=cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 179,
          "code": "arabic_pattern.search(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "normalize_arabic_numerals",
          "line": 181,
          "code": "normalize_arabic_numerals(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "numeric_pattern.match",
          "line": 184,
          "code": "numeric_pattern.match(normalized_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_to_english",
          "line": 190,
          "code": "translate_to_english(normalized_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 192,
          "code": "print(f\"    Table cell translation error: {te}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats['full_translated_text'].append",
          "line": 197,
          "code": "stats['full_translated_text'].append(translated_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 200,
          "code": "fitz.Rect(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 201,
          "code": "fitz.Rect(cell_rect[0]-1, cell_rect[1]-1, cell_rect[2]+1, cell_rect[3]+1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.new_shape",
          "line": 203,
          "code": "page.new_shape()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.draw_rect",
          "line": 204,
          "code": "shape.draw_rect(cover_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.finish",
          "line": 205,
          "code": "shape.finish(color=(1, 1, 1), fill=(1, 1, 1), width=0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.commit",
          "line": 206,
          "code": "shape.commit()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_textbox",
          "line": 215,
          "code": "page.insert_textbox(\n                                            cell_rect,\n    ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.new_shape",
          "line": 227,
          "code": "page.new_shape()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.draw_rect",
          "line": 228,
          "code": "shape.draw_rect(cover_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.finish",
          "line": 229,
          "code": "shape.finish(color=(1, 1, 1), fill=(1, 1, 1), width=0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.commit",
          "line": 230,
          "code": "shape.commit()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_textbox",
          "line": 232,
          "code": "page.insert_textbox(\n                                                cell_rect,\n",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 240,
          "code": "len(tables)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 243,
          "code": "print(f\"  Table processing warning: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.get_text",
          "line": 248,
          "code": "page.get_text(\"dict\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 258,
          "code": "fitz.Rect(block[\"bbox\"])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect(t_rect).intersects",
          "line": 261,
          "code": "fitz.Rect(t_rect).intersects(block_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 261,
          "code": "fitz.Rect(t_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "float",
          "line": 272,
          "code": "float('inf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "float",
          "line": 272,
          "code": "float('inf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "float",
          "line": 273,
          "code": "float('-inf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "float",
          "line": 273,
          "code": "float('-inf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "\" \".join",
          "line": 286,
          "code": "\" \".join([s.get(\"text\", \"\") for s in spans])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "s.get",
          "line": 286,
          "code": "s.get(\"text\", \"\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "bool",
          "line": 287,
          "code": "bool(arabic_pattern.search(line_text))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 287,
          "code": "arabic_pattern.search(line_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "spans.sort",
          "line": 292,
          "code": "spans.sort(key=lambda s: s[\"bbox\"][0], reverse=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "spans.sort",
          "line": 295,
          "code": "spans.sort(key=lambda s: s[\"bbox\"][0])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "span.get(\"text\", \"\").strip",
          "line": 298,
          "code": "span.get(\"text\", \"\").strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "span.get",
          "line": 298,
          "code": "span.get(\"text\", \"\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "block_text_parts.append",
          "line": 300,
          "code": "block_text_parts.append(span_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "block_spans.append",
          "line": 301,
          "code": "block_spans.append(span)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 304,
          "code": "min(min_x, bbox[0])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 305,
          "code": "min(min_y, bbox[1])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 306,
          "code": "max(max_x, bbox[2])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 307,
          "code": "max(max_y, bbox[3])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "\" \".join",
          "line": 313,
          "code": "\" \".join(block_text_parts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 316,
          "code": "arabic_pattern.search(combined_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "s.get",
          "line": 318,
          "code": "s.get(\"size\", 12)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sum",
          "line": 319,
          "code": "sum(font_sizes)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 319,
          "code": "len(font_sizes)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text_blocks.append",
          "line": 321,
          "code": "text_blocks.append({\n                            'text': combined_text,\n        ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 328,
          "code": "print(f\"Found {len(text_blocks)} Arabic text blocks on page {page_num + 1}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 328,
          "code": "len(text_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sum",
          "line": 335,
          "code": "sum(all_sizes)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 335,
          "code": "len(all_sizes)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 336,
          "code": "print(f\"Page {page_num+1} stats: Avg Font Size={page_avg_size:.2f}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 356,
          "code": "enumerate(text_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "normalize_arabic_numerals",
          "line": 365,
          "code": "normalize_arabic_numerals(original_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_to_english",
          "line": 373,
          "code": "translate_to_english(normalized_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 376,
          "code": "arabic_pattern.search(translated_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "stats['full_translated_text'].append",
          "line": 378,
          "code": "stats['full_translated_text'].append(translated_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 381,
          "code": "fitz.Rect(bbox)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.Rect",
          "line": 385,
          "code": "fitz.Rect(bbox[0]-1, bbox[1]-1, bbox[2]+1, bbox[3]+1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.new_shape",
          "line": 389,
          "code": "page.new_shape()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.draw_rect",
          "line": 390,
          "code": "shape.draw_rect(cover_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.finish",
          "line": 391,
          "code": "shape.finish(color=(1, 1, 1), fill=(1, 1, 1), width=0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.commit",
          "line": 392,
          "code": "shape.commit()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text_block.get",
          "line": 409,
          "code": "text_block.get('type', 'body')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_textbox",
          "line": 418,
          "code": "page.insert_textbox(\n                                rect,\n                     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.new_shape",
          "line": 439,
          "code": "page.new_shape()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.draw_rect",
          "line": 440,
          "code": "shape.draw_rect(cover_rect)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.finish",
          "line": 441,
          "code": "shape.finish(color=(1, 1, 1), fill=(1, 1, 1), width=0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "shape.commit",
          "line": 442,
          "code": "shape.commit()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.insert_textbox",
          "line": 444,
          "code": "page.insert_textbox(\n                                        rect,\n             ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 455,
          "code": "print(f\"    Text insertion error: {insert_error}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 460,
          "code": "print(f\"    Skipping: Translation failed or empty\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 463,
          "code": "print(f\"    Block processing error: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.save",
          "line": 466,
          "code": "doc.save(output_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.close",
          "line": 467,
          "code": "doc.close()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 470,
          "code": "os.path.exists(working_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.unlink",
          "line": 472,
          "code": "os.unlink(working_pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 476,
          "code": "print(\"\\n\" + \"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 477,
          "code": "print(f\"In-place translation complete!\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 478,
          "code": "print(f\"Output saved to: {output_path}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 479,
          "code": "print(\"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "\"\\n\\n\".join",
          "line": 481,
          "code": "\"\\n\\n\".join(stats['full_translated_text'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "locals",
          "line": 487,
          "code": "locals()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.close",
          "line": 488,
          "code": "doc.close()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 489,
          "code": "Exception(f\"In-place PDF translation failed: {str(e)}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 489,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 499,
          "code": "print(\"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 500,
          "code": "print(\"STRICT MODE: Using In-Place Translation Only\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 501,
          "code": "print(\"Reconstruction/Re-rendering is disabled to preserve specific layout.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 502,
          "code": "print(\"=\" * 60)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translate_pdf_inplace",
          "line": 505,
          "code": "translate_pdf_inplace(pdf_path, output_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "norm",
          "line": 511,
          "code": "norm(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.getenv",
          "line": 10,
          "code": "os.getenv(\"QDRANT_HOST\", \"localhost\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "int",
          "line": 11,
          "code": "int(os.getenv(\"QDRANT_PORT\", 6333))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.getenv",
          "line": 11,
          "code": "os.getenv(\"QDRANT_PORT\", 6333)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.getenv",
          "line": 14,
          "code": "os.getenv(\"OLLAMA_MODEL\", \"llama3.2:3b-instruct-q4_k_m\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.getenv",
          "line": 15,
          "code": "os.getenv(\"OLLAMA_HOST\", \"http://localhost:11434\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "QdrantClient",
          "line": 22,
          "code": "QdrantClient(host=QDRANT_HOST, port=QDRANT_PORT)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 25,
          "code": "print(f\"Loading embedding model: {EMBEDDING_MODEL_NAME}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "SentenceTransformer",
          "line": 26,
          "code": "SentenceTransformer(EMBEDDING_MODEL_NAME)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 27,
          "code": "print(\"Embedding model loaded.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self._ensure_collection",
          "line": 29,
          "code": "self._ensure_collection()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 30,
          "code": "print(f\"Connected to Qdrant at {QDRANT_HOST}:{QDRANT_PORT}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "ollama.Client",
          "line": 33,
          "code": "ollama.Client(host=OLLAMA_HOST)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 34,
          "code": "print(f\"Connected to Ollama at {OLLAMA_HOST} using model {CHAT_MODEL}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 37,
          "code": "print(f\"Failed to connect to services: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.client.get_collections",
          "line": 46,
          "code": "self.client.get_collections()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "any",
          "line": 47,
          "code": "any(c.name == COLLECTION_NAME for c in collections.collections)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.client.create_collection",
          "line": 57,
          "code": "self.client.create_collection(\n                collection_name=COLLECTION_NAME,\n",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "models.VectorParams",
          "line": 59,
          "code": "models.VectorParams(\n                    size=vector_size,\n                    d",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 64,
          "code": "print(f\"Created collection: {COLLECTION_NAME}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.encoder.encode",
          "line": 70,
          "code": "self.encoder.encode(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "embedding.tolist",
          "line": 71,
          "code": "embedding.tolist()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 73,
          "code": "print(f\"Error getting embedding: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 81,
          "code": "print(\"Qdrant client not initialized.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self._chunk_text",
          "line": 86,
          "code": "self._chunk_text(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 89,
          "code": "enumerate(chunks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "chunk.strip",
          "line": 90,
          "code": "chunk.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self._get_embedding",
          "line": 94,
          "code": "self._get_embedding(chunk)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "points.append",
          "line": 102,
          "code": "points.append(models.PointStruct(\n                    id=str(uuid.uuid4()),\n    ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "models.PointStruct",
          "line": 102,
          "code": "models.PointStruct(\n                    id=str(uuid.uuid4()),\n                  ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 103,
          "code": "str(uuid.uuid4())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "uuid.uuid4",
          "line": 103,
          "code": "uuid.uuid4()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 108,
          "code": "print(f\"Error embedding chunk {i}: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.client.upsert",
          "line": 113,
          "code": "self.client.upsert(\n                    collection_name=COLLECTION_NAME,\n       ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 117,
          "code": "print(f\"Indexed {len(points)} chunks for document {doc_id}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 117,
          "code": "len(points)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 120,
          "code": "print(f\"Error upserting to Qdrant: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self._get_embedding",
          "line": 134,
          "code": "self._get_embedding(query)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 136,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.client.query_points",
          "line": 140,
          "code": "self.client.query_points(\n                collection_name=COLLECTION_NAME,\n     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "models.Filter",
          "line": 143,
          "code": "models.Filter(\n                    must=[\n                        models.FieldCo",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "models.FieldCondition",
          "line": 145,
          "code": "models.FieldCondition(\n                            key=\"doc_id\",\n               ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "models.MatchValue",
          "line": 147,
          "code": "models.MatchValue(value=doc_id)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 154,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "\"\\n\\n\".join",
          "line": 160,
          "code": "\"\\n\\n\".join([hit.payload[\"text\"] for hit in search_result])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "ollama.Client",
          "line": 178,
          "code": "ollama.Client(host=OLLAMA_HOST)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "self.ollama_client.chat",
          "line": 180,
          "code": "self.ollama_client.chat(model=CHAT_MODEL, messages=messages)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 183,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 192,
          "code": "len(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.rfind",
          "line": 200,
          "code": "text.rfind('\\n', start, end)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.rfind",
          "line": 205,
          "code": "text.rfind('. ', start, end)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text[start:end].strip",
          "line": 209,
          "code": "text[start:end].strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "chunks.append",
          "line": 211,
          "code": "chunks.append(chunk)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "RAGService",
          "line": 220,
          "code": "RAGService()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 22,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_extract_with_pymupdf",
          "line": 45,
          "code": "_extract_with_pymupdf(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 47,
          "code": "print(f\"PyMuPDF extraction failed: {e}, trying pdfplumber...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pdfplumber.open",
          "line": 53,
          "code": "pdfplumber.open(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 54,
          "code": "enumerate(pdf.pages, 1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.extract_words",
          "line": 56,
          "code": "page.extract_words(\n                        x_tolerance=3,\n                     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_group_words_into_blocks",
          "line": 64,
          "code": "_group_words_into_blocks(words, page_num, page.height)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.extend",
          "line": 65,
          "code": "blocks.extend(text_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.extract_tables",
          "line": 68,
          "code": "page.extract_tables()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_extract_table_blocks",
          "line": 71,
          "code": "_extract_table_blocks(table, page_num, page.height)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.extend",
          "line": 72,
          "code": "blocks.extend(table_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 74,
          "code": "print(f\"Text-based extraction failed: {e}, trying OCR...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_extract_with_ocr",
          "line": 76,
          "code": "_extract_with_ocr(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_postprocess_blocks",
          "line": 79,
          "code": "_postprocess_blocks(blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "fitz.open",
          "line": 86,
          "code": "fitz.open(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 87,
          "code": "range(len(doc))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 87,
          "code": "len(doc)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.load_page",
          "line": 88,
          "code": "doc.load_page(page_index)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.get_text",
          "line": 91,
          "code": "page.get_text(\"dict\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "data.get",
          "line": 94,
          "code": "data.get(\"blocks\", [])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "block.get",
          "line": 95,
          "code": "block.get(\"type\", 0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 100,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "block.get",
          "line": 105,
          "code": "block.get(\"lines\", [])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.get",
          "line": 107,
          "code": "line.get(\"spans\", [])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "span.get(\"text\", \"\").strip",
          "line": 108,
          "code": "span.get(\"text\", \"\").strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "span.get",
          "line": 108,
          "code": "span.get(\"text\", \"\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line_spans.append",
          "line": 123,
          "code": "line_spans.append(span_data)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "all_spans.append",
          "line": 124,
          "code": "all_spans.append(span_data)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "any",
          "line": 130,
          "code": "any(arabic_re.search(s['text']) for s in line_spans)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_re.search",
          "line": 130,
          "code": "arabic_re.search(s['text'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 134,
          "code": "sorted(line_spans, key=lambda s: s['x1'], reverse=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 137,
          "code": "sorted(line_spans, key=lambda s: s['x0'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "' '.join",
          "line": 139,
          "code": "' '.join(s['text'] for s in ordered)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line_texts.append",
          "line": 140,
          "code": "line_texts.append(line_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join(line_texts).strip",
          "line": 142,
          "code": "'\\n'.join(line_texts).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 142,
          "code": "'\\n'.join(line_texts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 150,
          "code": "min(s['x0'] for s in spans)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 151,
          "code": "min(s['y0'] for s in spans)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 152,
          "code": "max(s['x1'] for s in spans)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 153,
          "code": "max(s['y1'] for s in spans)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "results.append",
          "line": 157,
          "code": "results.append(TextBlock(text, x0, y0, x1, y1, page_num))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TextBlock",
          "line": 157,
          "code": "TextBlock(text, x0, y0, x1, y1, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "doc.close",
          "line": 159,
          "code": "doc.close()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 160,
          "code": "print(f\"PyMuPDF extracted {len(results)} text blocks\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 160,
          "code": "len(results)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 162,
          "code": "print(f\"PyMuPDF extraction failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "traceback.print_exc",
          "line": 164,
          "code": "traceback.print_exc()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 181,
          "code": "abs(word_y - current_y)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "current_line.append",
          "line": 183,
          "code": "current_line.append(word)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_create_block_from_words",
          "line": 189,
          "code": "_create_block_from_words(current_line, page_num, page_height)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.append",
          "line": 191,
          "code": "blocks.append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_create_block_from_words",
          "line": 197,
          "code": "_create_block_from_words(current_line, page_num, page_height)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.append",
          "line": 199,
          "code": "blocks.append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 209,
          "code": "min(w['x0'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 210,
          "code": "max(w['top'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 211,
          "code": "max(w['x1'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 212,
          "code": "min(w['top'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 217,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 227,
          "code": "abs(word_y - current_y)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "current_line.append",
          "line": 228,
          "code": "current_line.append(word)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "lines.append",
          "line": 233,
          "code": "lines.append(current_line)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "lines.append",
          "line": 238,
          "code": "lines.append(current_line)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "any",
          "line": 243,
          "code": "any(arabic_re.search(str(w.get('text',''))) for w in line_words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_re.search",
          "line": 243,
          "code": "arabic_re.search(str(w.get('text','')))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 243,
          "code": "str(w.get('text',''))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "w.get",
          "line": 243,
          "code": "w.get('text','')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 246,
          "code": "sorted(line_words, key=lambda w: w['x1'], reverse=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 249,
          "code": "sorted(line_words, key=lambda w: w['x0'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "' '.join",
          "line": 250,
          "code": "' '.join(w['text'] for w in ordered)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line_texts.append",
          "line": 251,
          "code": "line_texts.append(line_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 253,
          "code": "'\\n'.join(line_texts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TextBlock",
          "line": 255,
          "code": "TextBlock(text, x0, y0, x1, y1, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 260,
          "code": "max(ax0, bx0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 260,
          "code": "max(ay0, by0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 261,
          "code": "min(ax1, bx1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 261,
          "code": "min(ay1, by1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 262,
          "code": "max(0.0, ix1 - ix0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 262,
          "code": "max(0.0, iy1 - iy0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 268,
          "code": "max(area_a + area_b - inter, 1e-6)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "by_page.setdefault(b.page_num, []).append",
          "line": 277,
          "code": "by_page.setdefault(b.page_num, []).append(b)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "by_page.setdefault",
          "line": 277,
          "code": "by_page.setdefault(b.page_num, [])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "by_page.items",
          "line": 279,
          "code": "by_page.items()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 281,
          "code": "sorted(arr, key=lambda b: (-b.y1, b.x0))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 284,
          "code": "len(b.text.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "b.text.strip",
          "line": 284,
          "code": "b.text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_iou",
          "line": 292,
          "code": "_iou(k, b)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "kept.append",
          "line": 297,
          "code": "kept.append(b)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cleaned.extend",
          "line": 298,
          "code": "cleaned.extend(kept)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 306,
          "code": "enumerate(table)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 307,
          "code": "enumerate(row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str(cell).strip",
          "line": 308,
          "code": "str(cell).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 308,
          "code": "str(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TextBlock",
          "line": 310,
          "code": "TextBlock(\n                    str(cell).strip(),\n                    0, 0, 0, 0",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str(cell).strip",
          "line": 311,
          "code": "str(cell).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 311,
          "code": "str(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.append",
          "line": 316,
          "code": "blocks.append(text_block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "convert_from_path",
          "line": 325,
          "code": "convert_from_path(pdf_path, dpi=400)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 327,
          "code": "enumerate(images, 1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pytesseract.image_to_data",
          "line": 335,
          "code": "pytesseract.image_to_data(\n                        image,\n                      ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 349,
          "code": "range(len(ocr_data['text']))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 349,
          "code": "len(ocr_data['text'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "ocr_data['text'][i].strip",
          "line": 350,
          "code": "ocr_data['text'][i].strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "int",
          "line": 351,
          "code": "int(ocr_data['conf'][i])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "current_block_words.append",
          "line": 368,
          "code": "current_block_words.append({\n                                'text': text,\n     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 378,
          "code": "abs(y - current_y)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "current_block_words.append",
          "line": 380,
          "code": "current_block_words.append({\n                                'text': text,\n     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sum",
          "line": 389,
          "code": "sum(w['y0'] for w in current_block_words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 389,
          "code": "len(current_block_words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_create_block_from_ocr_words",
          "line": 393,
          "code": "_create_block_from_ocr_words(\n                                    current_block_",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page_blocks.append",
          "line": 397,
          "code": "page_blocks.append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_create_block_from_ocr_words",
          "line": 413,
          "code": "_create_block_from_ocr_words(\n                            current_block_words, p",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page_blocks.append",
          "line": 417,
          "code": "page_blocks.append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 420,
          "code": "len(page_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 420,
          "code": "len(best_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 424,
          "code": "print(f\"OCR extraction with PSM {psm} failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks.extend",
          "line": 427,
          "code": "blocks.extend(best_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 430,
          "code": "print(f\"OCR extraction failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "traceback.print_exc",
          "line": 432,
          "code": "traceback.print_exc()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 442,
          "code": "min(w['x0'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 443,
          "code": "min(w['y0'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 444,
          "code": "max(w['x1'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 445,
          "code": "max(w['y1'] for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 449,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "any",
          "line": 450,
          "code": "any(arabic_re.search(str(w.get('text',''))) for w in words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_re.search",
          "line": 450,
          "code": "arabic_re.search(str(w.get('text','')))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 450,
          "code": "str(w.get('text',''))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "w.get",
          "line": 450,
          "code": "w.get('text','')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 452,
          "code": "sorted(words, key=lambda w: w['x1'], reverse=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 454,
          "code": "sorted(words, key=lambda w: w['x0'])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "' '.join",
          "line": 455,
          "code": "' '.join(w['text'] for w in ordered)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TextBlock",
          "line": 457,
          "code": "TextBlock(text, x0, y0, x1, y1, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str.maketrans",
          "line": 464,
          "code": "str.maketrans(arabic_numerals, western_numerals)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.translate",
          "line": 465,
          "code": "text.translate(translation_table)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 22,
          "code": "print(f\"Loading translation model: {model_name}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "MarianTokenizer.from_pretrained",
          "line": 23,
          "code": "MarianTokenizer.from_pretrained(model_name)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "MarianMTModel.from_pretrained",
          "line": 24,
          "code": "MarianMTModel.from_pretrained(model_name)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_model.eval",
          "line": 27,
          "code": "_model.eval()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "torch.device",
          "line": 28,
          "code": "torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "torch.cuda.is_available",
          "line": 28,
          "code": "torch.cuda.is_available()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_model.to",
          "line": 29,
          "code": "_model.to(_device)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 31,
          "code": "print(f\"Translation model loaded successfully: {model_name}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 34,
          "code": "print(f\"Failed to load {model_name}: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_text.strip",
          "line": 46,
          "code": "arabic_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 51,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 52,
          "code": "arabic_pattern.search(arabic_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.search",
          "line": 55,
          "code": "re.search(r'[a-zA-Z]', arabic_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_text.strip",
          "line": 56,
          "code": "arabic_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_text.strip",
          "line": 58,
          "code": "arabic_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "get_translation_model",
          "line": 60,
          "code": "get_translation_model()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_text.strip",
          "line": 63,
          "code": "arabic_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.sub",
          "line": 67,
          "code": "re.sub(r'[ \\t]+', ' ', text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.sub",
          "line": 68,
          "code": "re.sub(r'\\n\\s*\\n', '\\n\\n', text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.split",
          "line": 73,
          "code": "text.split('\\n')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 77,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_lines.append",
          "line": 78,
          "code": "translated_lines.append(\"\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.split",
          "line": 83,
          "code": "re.split(sentence_endings, line)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 87,
          "code": "range(0, len(sentences) - 1, 2)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 87,
          "code": "len(sentences)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sentences[i].strip",
          "line": 88,
          "code": "sentences[i].strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 89,
          "code": "len(sentences)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sentence_pairs.append",
          "line": 91,
          "code": "sentence_pairs.append((sentence, punct))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 95,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sentence.strip",
          "line": 100,
          "code": "sentence.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 104,
          "code": "arabic_pattern.search(sentence)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line_translated_parts.append",
          "line": 105,
          "code": "line_translated_parts.append(sentence + punct)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_translate_batch",
          "line": 110,
          "code": "_translate_batch(sentence, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated.strip",
          "line": 112,
          "code": "translated.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 114,
          "code": "arabic_pattern.search(translated)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_translate_batch",
          "line": 116,
          "code": "_translate_batch(sentence, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 117,
          "code": "arabic_pattern.search(translated)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 118,
          "code": "print(f\"Warning: Failed to translate sentence: {sentence[:50]}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_is_bad_translation",
          "line": 122,
          "code": "_is_bad_translation(translated, sentence)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 123,
          "code": "print(f\"Warning: Bad translation detected, skipping: {sentence[:50]}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line_translated_parts.append",
          "line": 126,
          "code": "line_translated_parts.append(translated.strip() + punct)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated.strip",
          "line": 126,
          "code": "translated.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 128,
          "code": "print(f\"Translation error for sentence: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_lines.append",
          "line": 132,
          "code": "translated_lines.append(' '.join(line_translated_parts))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "' '.join",
          "line": 132,
          "code": "' '.join(line_translated_parts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_lines.append",
          "line": 134,
          "code": "translated_lines.append(\"\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join(translated_lines).strip",
          "line": 136,
          "code": "'\\n'.join(translated_lines).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 136,
          "code": "'\\n'.join(translated_lines)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 139,
          "code": "arabic_pattern.search(result)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 140,
          "code": "print(f\"Warning: Translation result still contains Arabic characters\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated.lower",
          "line": 153,
          "code": "translated.lower()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_lower.count",
          "line": 157,
          "code": "translated_lower.count(phrase)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_lower.split",
          "line": 162,
          "code": "translated_lower.split()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 163,
          "code": "len(words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "word_counts.get",
          "line": 169,
          "code": "word_counts.get(word, 0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 171,
          "code": "max(word_counts.values())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "word_counts.values",
          "line": 171,
          "code": "word_counts.values()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 172,
          "code": "len(words)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 177,
          "code": "len(translated.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated.strip",
          "line": 177,
          "code": "translated.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 177,
          "code": "len(original.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "original.strip",
          "line": 177,
          "code": "original.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.search",
          "line": 181,
          "code": "re.search(r'\\b(\\w+)\\s*,\\s*\\1\\s*,\\s*\\1', translated, re.IGNORECASE)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 188,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.compile",
          "line": 193,
          "code": "re.compile(r'[\\u0600-\\u06FF]')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 194,
          "code": "arabic_pattern.search(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 196,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "' '.join",
          "line": 199,
          "code": "' '.join(text.split())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.split",
          "line": 199,
          "code": "text.split()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer",
          "line": 202,
          "code": "tokenizer(\n            text, \n            return_tensors=\"pt\", \n            padd",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "next",
          "line": 209,
          "code": "next(model.parameters())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "model.parameters",
          "line": 209,
          "code": "model.parameters()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "v.to",
          "line": 210,
          "code": "v.to(model.device)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "inputs.items",
          "line": 210,
          "code": "inputs.items()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "torch.no_grad",
          "line": 213,
          "code": "torch.no_grad()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "model.generate",
          "line": 214,
          "code": "model.generate(\n                **inputs, \n                max_length=512,  # Ou",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer.decode",
          "line": 225,
          "code": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated[0].detach().cpu",
          "line": 225,
          "code": "translated[0].detach().cpu()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated[0].detach",
          "line": 225,
          "code": "translated[0].detach()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated_text.strip",
          "line": 227,
          "code": "translated_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "arabic_pattern.search",
          "line": 230,
          "code": "arabic_pattern.search(result)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 231,
          "code": "print(f\"Warning: Translation result contains Arabic: {result[:50]}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_is_bad_translation",
          "line": 235,
          "code": "_is_bad_translation(result, text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 236,
          "code": "print(f\"Warning: Detected bad translation, retrying...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "torch.no_grad",
          "line": 238,
          "code": "torch.no_grad()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "model.generate",
          "line": 239,
          "code": "model.generate(\n                    **inputs,\n                    max_length=512",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True).strip",
          "line": 247,
          "code": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer.decode",
          "line": 247,
          "code": "tokenizer.decode(translated[0].detach().cpu(), skip_special_tokens=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated[0].detach().cpu",
          "line": 247,
          "code": "translated[0].detach().cpu()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "translated[0].detach",
          "line": 247,
          "code": "translated[0].detach()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_is_bad_translation",
          "line": 250,
          "code": "_is_bad_translation(result, text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 251,
          "code": "print(f\"Warning: Translation still appears bad: {result[:50]}...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 257,
          "code": "print(f\"Translation error: {str(e)}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 257,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 259,
          "code": "len(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 260,
          "code": "len(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "range",
          "line": 262,
          "code": "range(mid, min(mid + 50, len(text)))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 262,
          "code": "min(mid + 50, len(text))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 262,
          "code": "len(text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_translate_batch",
          "line": 267,
          "code": "_translate_batch(part1, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_translate_batch",
          "line": 268,
          "code": "_translate_batch(part2, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "(trans1 + \" \" + trans2).strip",
          "line": 270,
          "code": "(trans1 + \" \" + trans2).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 279,
          "code": "len(chunks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "c.strip",
          "line": 280,
          "code": "c.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "results.extend",
          "line": 282,
          "code": "results.extend([\"\" for _ in chunks[i:i+batch_size]])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer",
          "line": 286,
          "code": "tokenizer(\n                batch,\n                return_tensors=\"pt\",\n         ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "next",
          "line": 293,
          "code": "next(model.parameters())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "model.parameters",
          "line": 293,
          "code": "model.parameters()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "v.to",
          "line": 294,
          "code": "v.to(model.device)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "inputs.items",
          "line": 294,
          "code": "inputs.items()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "torch.no_grad",
          "line": 295,
          "code": "torch.no_grad()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "model.generate",
          "line": 296,
          "code": "model.generate(\n                    **inputs,\n                    max_length=512",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tokenizer.batch_decode",
          "line": 304,
          "code": "tokenizer.batch_decode(outputs.detach().cpu(), skip_special_tokens=True)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "outputs.detach().cpu",
          "line": 304,
          "code": "outputs.detach().cpu()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "outputs.detach",
          "line": 304,
          "code": "outputs.detach()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "results.extend",
          "line": 305,
          "code": "results.extend([d.strip() for d in decoded])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "d.strip",
          "line": 305,
          "code": "d.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "results.append",
          "line": 308,
          "code": "results.append(_translate_batch(c, model, tokenizer))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_translate_batch",
          "line": 308,
          "code": "_translate_batch(c, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 18,
          "code": "os.path.exists(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 19,
          "code": "Exception(f\"PDF file not found: {pdf_path}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.getsize",
          "line": 21,
          "code": "os.path.getsize(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 22,
          "code": "Exception(\"PDF file is empty\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "convert_from_path",
          "line": 27,
          "code": "convert_from_path(pdf_path, dpi=400, fmt='png')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 30,
          "code": "Exception(\"Could not convert PDF pages to images. The PDF might be corrupted.\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 34,
          "code": "enumerate(images)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "image.convert",
          "line": 39,
          "code": "image.convert('RGB')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_preprocess_for_ocr",
          "line": 42,
          "code": "_preprocess_for_ocr(image)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pytesseract.image_to_string",
          "line": 55,
          "code": "pytesseract.image_to_string(\n                            preprocessed,\n         ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 61,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 63,
          "code": "'\\n'.join(line.strip() for line in text.split('\\n') if line.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 63,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.split",
          "line": 63,
          "code": "text.split('\\n')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 63,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 66,
          "code": "len(cleaned_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 66,
          "code": "len(best_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "extracted_texts.append",
          "line": 72,
          "code": "extracted_texts.append(best_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pytesseract.image_to_string",
          "line": 78,
          "code": "pytesseract.image_to_string(preprocessed, lang='ara', config=config)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 79,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 80,
          "code": "'\\n'.join(line.strip() for line in text.split('\\n') if line.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 80,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.split",
          "line": 80,
          "code": "text.split('\\n')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 80,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "extracted_texts.append",
          "line": 82,
          "code": "extracted_texts.append(cleaned_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 88,
          "code": "Exception(\"No text could be extracted from the PDF. The PDF might not contain re",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n\\n'.join",
          "line": 91,
          "code": "'\\n\\n'.join(extracted_texts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "re.sub",
          "line": 97,
          "code": "re.sub(r'([\\u0600-\\u06FF])\\1+', r'\\1', full_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.replace",
          "line": 100,
          "code": "full_text.replace('\u061b', '\u061b')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.replace",
          "line": 101,
          "code": "full_text.replace('\u060c', '\u060c')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.replace",
          "line": 103,
          "code": "full_text.replace('\u0621\u0621', '\u0621')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.replace",
          "line": 104,
          "code": "full_text.replace('  ', ' ')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.split",
          "line": 107,
          "code": "full_text.split('\\n')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "line.strip",
          "line": 110,
          "code": "line.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cleaned_lines.append",
          "line": 112,
          "code": "cleaned_lines.append(line)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n'.join",
          "line": 114,
          "code": "'\\n'.join(cleaned_lines)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "full_text.strip",
          "line": 116,
          "code": "full_text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tempfile.NamedTemporaryFile",
          "line": 121,
          "code": "tempfile.NamedTemporaryFile(delete=False, suffix='.pdf')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "ocrmypdf.ocr",
          "line": 126,
          "code": "ocrmypdf.ocr(\n                    pdf_path,\n                    output_path,\n   ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "PdfReader",
          "line": 136,
          "code": "PdfReader(output_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.extract_text",
          "line": 140,
          "code": "page.extract_text()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 141,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "extracted_texts.append",
          "line": 142,
          "code": "extracted_texts.append(text.strip())",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 142,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "'\\n\\n'.join",
          "line": 147,
          "code": "'\\n\\n'.join(extracted_texts)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.path.exists",
          "line": 150,
          "code": "os.path.exists(output_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "os.unlink",
          "line": 152,
          "code": "os.unlink(output_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Exception",
          "line": 159,
          "code": "Exception(f\"Image-based text extraction failed: {str(e)}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 159,
          "code": "str(e)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "np.array",
          "line": 164,
          "code": "np.array(pil_image)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.cvtColor",
          "line": 165,
          "code": "cv2.cvtColor(img, cv2.COLOR_RGB2BGR)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.cvtColor",
          "line": 168,
          "code": "cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.bilateralFilter",
          "line": 171,
          "code": "cv2.bilateralFilter(gray, d=9, sigmaColor=75, sigmaSpace=75)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.adaptiveThreshold",
          "line": 174,
          "code": "cv2.adaptiveThreshold(\n        gray, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.TH",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "np.mean",
          "line": 180,
          "code": "np.mean(bin_img)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.bitwise_not",
          "line": 182,
          "code": "cv2.bitwise_not(bin_img)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.getStructuringElement",
          "line": 185,
          "code": "cv2.getStructuringElement(cv2.MORPH_RECT, (1, 1))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.morphologyEx",
          "line": 186,
          "code": "cv2.morphologyEx(bin_img, cv2.MORPH_OPEN, kernel, iterations=1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_estimate_skew_angle",
          "line": 189,
          "code": "_estimate_skew_angle(bin_img)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 190,
          "code": "abs(angle)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 190,
          "code": "abs(angle)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_rotate_image",
          "line": 191,
          "code": "_rotate_image(bin_img, angle)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.cvtColor",
          "line": 194,
          "code": "cv2.cvtColor(bin_img, cv2.COLOR_GRAY2RGB)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.Canny",
          "line": 198,
          "code": "cv2.Canny(binary_img, 50, 150, apertureSize=3)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.HoughLines",
          "line": 199,
          "code": "cv2.HoughLines(edges, 1, np.pi / 180, threshold=200)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "angles.append",
          "line": 208,
          "code": "angles.append(angle)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "float",
          "line": 211,
          "code": "float(np.median(angles))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "np.median",
          "line": 211,
          "code": "np.median(angles)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.getRotationMatrix2D",
          "line": 216,
          "code": "cv2.getRotationMatrix2D(center, angle, 1.0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cv2.warpAffine",
          "line": 217,
          "code": "cv2.warpAffine(img, M, (w, h), flags=cv2.INTER_LINEAR, borderMode=cv2.BORDER_REP",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 18,
          "code": "print(\"Warning: camelot-py not installed. Table extraction will use pdfplumber o",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "text.strip",
          "line": 24,
          "code": "text.strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 40,
          "code": "max(cell.row for cell in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 41,
          "code": "max(cell.col for cell in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 44,
          "code": "min(c.x0 for c in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "min",
          "line": 45,
          "code": "min(c.y0 for c in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 46,
          "code": "max(c.x1 for c in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 47,
          "code": "max(c.y1 for c in cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "camelot.read_pdf",
          "line": 65,
          "code": "camelot.read_pdf(pdf_path, pages='all', flavor=flavor)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 66,
          "code": "enumerate(camelot_tables)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 68,
          "code": "hasattr(camelot_table, 'page')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "getattr",
          "line": 73,
          "code": "getattr(camelot_table, '_bbox', None)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "df.iterrows",
          "line": 74,
          "code": "df.iterrows()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 75,
          "code": "enumerate(row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pd.notna",
          "line": 76,
          "code": "pd.notna(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str(cell_text).strip",
          "line": 76,
          "code": "str(cell_text).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 76,
          "code": "str(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 78,
          "code": "len(row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 79,
          "code": "len(df)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 80,
          "code": "max(num_cols, 1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 81,
          "code": "max(num_rows, 1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TableCell",
          "line": 88,
          "code": "TableCell(\n                                        str(cell_text).strip(),\n     ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str(cell_text).strip",
          "line": 89,
          "code": "str(cell_text).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 89,
          "code": "str(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "int",
          "line": 90,
          "code": "int(row_idx)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "int",
          "line": 91,
          "code": "int(col_idx)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cells.append",
          "line": 95,
          "code": "cells.append(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Table",
          "line": 97,
          "code": "Table(cells, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tables.append",
          "line": 98,
          "code": "tables.append(table)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 100,
          "code": "print(f\"Error processing Camelot table {flavor} {table_idx}: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 105,
          "code": "print(f\"Camelot {flavor} extraction failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 107,
          "code": "print(\"Camelot found no tables; trying pdfplumber...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_extract_tables_with_pdfplumber",
          "line": 108,
          "code": "_extract_tables_with_pdfplumber(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 111,
          "code": "print(\"Camelot not available, using pdfplumber for table extraction...\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_extract_tables_with_pdfplumber",
          "line": 112,
          "code": "_extract_tables_with_pdfplumber(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "pdfplumber.open",
          "line": 121,
          "code": "pdfplumber.open(pdf_path)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 122,
          "code": "enumerate(pdf.pages, 1)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "page.find_tables",
          "line": 124,
          "code": "page.find_tables()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 132,
          "code": "enumerate(found_tables)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "table_obj.extract",
          "line": 135,
          "code": "table_obj.extract()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 151,
          "code": "hasattr(table_obj, 'rows')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 152,
          "code": "enumerate(table_obj.rows)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 153,
          "code": "hasattr(row_obj, 'cells')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 154,
          "code": "enumerate(row_obj.cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 156,
          "code": "hasattr(cell_obj, 'bbox')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 161,
          "code": "hasattr(table_obj, 'cells')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "list",
          "line": 163,
          "code": "list(table_obj.cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 164,
          "code": "enumerate(cell_list)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 167,
          "code": "hasattr(cell_obj, 'row')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 167,
          "code": "hasattr(cell_obj, 'col')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "hasattr",
          "line": 170,
          "code": "hasattr(cell_obj, 'bbox')",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 175,
          "code": "print(f\"  Warning: Could not access table cell positions: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 178,
          "code": "len(table_data)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "max",
          "line": 179,
          "code": "max(len(r) for r in table_data)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 179,
          "code": "len(r)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 181,
          "code": "enumerate(table_data)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 185,
          "code": "enumerate(row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str(cell_text).strip",
          "line": 189,
          "code": "str(cell_text).strip()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "str",
          "line": 189,
          "code": "str(cell_text)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TableCell",
          "line": 211,
          "code": "TableCell(\n                                    cell_text,\n                      ",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cells.append",
          "line": 218,
          "code": "cells.append(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Table",
          "line": 221,
          "code": "Table(cells, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tables.append",
          "line": 222,
          "code": "tables.append(table)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 223,
          "code": "print(f\"Extracted table {table_idx+1} on page {page_num} with {len(cells)} cells",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 223,
          "code": "len(cells)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 225,
          "code": "print(f\"Error processing table {table_idx} on page {page_num}: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "traceback.print_exc",
          "line": 227,
          "code": "traceback.print_exc()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 231,
          "code": "print(f\"pdfplumber table extraction failed: {e}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "traceback.print_exc",
          "line": 233,
          "code": "traceback.print_exc()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "print",
          "line": 235,
          "code": "print(f\"Total tables extracted: {len(tables)}\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 235,
          "code": "len(tables)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks_by_page[block.page_num].append",
          "line": 248,
          "code": "blocks_by_page[block.page_num].append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "blocks_by_page.items",
          "line": 252,
          "code": "blocks_by_page.items()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "_detect_table_structure",
          "line": 255,
          "code": "_detect_table_structure(blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 259,
          "code": "enumerate(table_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "enumerate",
          "line": 260,
          "code": "enumerate(row_blocks)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "TableCell",
          "line": 261,
          "code": "TableCell(\n                        block.text,\n                        row_idx,\n",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "cells.append",
          "line": 268,
          "code": "cells.append(cell)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "Table",
          "line": 271,
          "code": "Table(cells, page_num)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "tables.append",
          "line": 272,
          "code": "tables.append(table)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 285,
          "code": "sorted(blocks, key=lambda b: b.y0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sum",
          "line": 297,
          "code": "sum(b.y0 for b in current_row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 297,
          "code": "len(current_row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "abs",
          "line": 298,
          "code": "abs(block.y0 - avg_y)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "current_row.append",
          "line": 299,
          "code": "current_row.append(block)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "rows.append",
          "line": 302,
          "code": "rows.append(sorted(current_row, key=lambda b: b.x0))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 302,
          "code": "sorted(current_row, key=lambda b: b.x0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "rows.append",
          "line": 306,
          "code": "rows.append(sorted(current_row, key=lambda b: b.x0))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "sorted",
          "line": 306,
          "code": "sorted(current_row, key=lambda b: b.x0)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 309,
          "code": "len(row)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function_call",
          "function": "len",
          "line": 311,
          "code": "len(table_rows)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        }
      ],
      "function_definitions": [
        {
          "type": "function",
          "name": "read_root",
          "line": 29,
          "is_async": false,
          "params": "()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "validate_pdf",
          "line": 3,
          "is_async": true,
          "params": "(file: UploadFile)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/validators.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "save_content_to_temp",
          "line": 5,
          "is_async": false,
          "params": "(content: bytes, suffix: str = \".pdf\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "cleanup_file",
          "line": 15,
          "is_async": false,
          "params": "(path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "temporary_file",
          "line": 26,
          "is_async": false,
          "params": "(content: bytes, suffix: str = \".pdf\")",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/utils/file_utils.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "chat_endpoint",
          "line": 8,
          "is_async": true,
          "params": "(request: ChatRequest)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "translate_pdf_endpoint",
          "line": 13,
          "is_async": true,
          "params": "(background_tasks: BackgroundTasks, file: UploadFile = File(...))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "process_pdf",
          "line": 11,
          "is_async": true,
          "params": "(file: UploadFile = File(...))",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "global_exception_handler",
          "line": 4,
          "is_async": true,
          "params": "(request: Request, exc: Exception)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/handlers/error_handler.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_ensure_searchable_pdf",
          "line": 38,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "translate_pdf_inplace",
          "line": 95,
          "is_async": false,
          "params": "(pdf_path: str, output_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "translate_pdf_with_layout",
          "line": 492,
          "is_async": false,
          "params": "(pdf_path: str, output_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "normalize_arabic_numerals",
          "line": 508,
          "is_async": false,
          "params": "(text: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/pdf_translation_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "__init__",
          "line": 20,
          "is_async": false,
          "params": "(self)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_ensure_collection",
          "line": 41,
          "is_async": false,
          "params": "(self)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_get_embedding",
          "line": 66,
          "is_async": false,
          "params": "(self, text: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "index_document",
          "line": 76,
          "is_async": false,
          "params": "(self, doc_id: str, text: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "chat_with_document",
          "line": 125,
          "is_async": false,
          "params": "(self, doc_id: str, query: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_chunk_text",
          "line": 185,
          "is_async": false,
          "params": "(self, text: str, chunk_size: int = 1000, overlap: int = 100)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/rag_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "__init__",
          "line": 20,
          "is_async": false,
          "params": "(self, text: str, x0: float, y0: float, x1: float, y1: float, \n                 page_num: int, is_table: bool = False)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "extract_text_blocks_with_layout",
          "line": 34,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_extract_with_pymupdf",
          "line": 82,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_group_words_into_blocks",
          "line": 168,
          "is_async": false,
          "params": "(words: List[Dict], page_num: int, page_height: float)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_create_block_from_words",
          "line": 203,
          "is_async": false,
          "params": "(words: List[Dict], page_num: int, page_height: float)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_iou",
          "line": 257,
          "is_async": false,
          "params": "(a: TextBlock, b: TextBlock)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_postprocess_blocks",
          "line": 271,
          "is_async": false,
          "params": "(blocks: List[TextBlock])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_extract_table_blocks",
          "line": 301,
          "is_async": false,
          "params": "(table: List[List], page_num: int, page_height: float)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_extract_with_ocr",
          "line": 319,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_create_block_from_ocr_words",
          "line": 436,
          "is_async": false,
          "params": "(words: List[Dict], page_num: int, \n                                 page_width: float, page_height: float)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "normalize_arabic_numerals",
          "line": 459,
          "is_async": false,
          "params": "(text: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/layout_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "get_translation_model",
          "line": 9,
          "is_async": false,
          "params": "()",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "translate_to_english",
          "line": 41,
          "is_async": false,
          "params": "(arabic_text: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_is_bad_translation",
          "line": 144,
          "is_async": false,
          "params": "(translated: str, original: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_translate_batch",
          "line": 186,
          "is_async": false,
          "params": "(text: str, model, tokenizer)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_translate_chunks",
          "line": 276,
          "is_async": false,
          "params": "(chunks, model, tokenizer, batch_size: int = 8)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/translate_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "extract_arabic_text",
          "line": 12,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_preprocess_for_ocr",
          "line": 161,
          "is_async": false,
          "params": "(pil_image)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_estimate_skew_angle",
          "line": 197,
          "is_async": false,
          "params": "(binary_img)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_rotate_image",
          "line": 213,
          "is_async": false,
          "params": "(img, angle)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/ocr_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "__init__",
          "line": 22,
          "is_async": false,
          "params": "(self, text: str, row: int, col: int, x0: float, y0: float, \n                 x1: float, y1: float, page_num: int)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "__init__",
          "line": 37,
          "is_async": false,
          "params": "(self, cells: List[TableCell], page_num: int)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "bbox",
          "line": 51,
          "is_async": false,
          "params": "(self)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "extract_tables_from_pdf",
          "line": 54,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_extract_tables_with_pdfplumber",
          "line": 116,
          "is_async": false,
          "params": "(pdf_path: str)",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "extract_tables_from_ocr",
          "line": 238,
          "is_async": false,
          "params": "(text_blocks: List[TextBlock])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        },
        {
          "type": "function",
          "name": "_detect_table_structure",
          "line": 276,
          "is_async": false,
          "params": "(blocks: List[TextBlock])",
          "file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/services/table_extraction_service.py",
          "confidence": "confident",
          "detection_method": "ast"
        }
      ]
    },
    "blast_radius": [
      {
        "target": "GET:/",
        "target_type": "endpoint",
        "target_file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/main.py",
        "target_line": 28,
        "direct_dependents": 0,
        "total_dependents": 0,
        "affected_files": [],
        "affected_endpoints": [],
        "severity": "low",
        "impact_description": "Changing endpoint 'GET:/' has no detected dependents."
      },
      {
        "target": "POST:/chat",
        "target_type": "endpoint",
        "target_file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/chat_controller.py",
        "target_line": 7,
        "direct_dependents": 0,
        "total_dependents": 0,
        "affected_files": [],
        "affected_endpoints": [],
        "severity": "low",
        "impact_description": "Changing endpoint 'POST:/chat' has no detected dependents."
      },
      {
        "target": "POST:/translate-pdf",
        "target_type": "endpoint",
        "target_file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/pdf_controller.py",
        "target_line": 12,
        "direct_dependents": 0,
        "total_dependents": 0,
        "affected_files": [],
        "affected_endpoints": [],
        "severity": "low",
        "impact_description": "Changing endpoint 'POST:/translate-pdf' has no detected dependents."
      },
      {
        "target": "POST:/process",
        "target_type": "endpoint",
        "target_file": "/Users/shaikmohammedjabirhussain/Desktop/SAMPLE-OCR/backend/controllers/ocr_controller.py",
        "target_line": 10,
        "direct_dependents": 0,
        "total_dependents": 0,
        "affected_files": [],
        "affected_endpoints": [],
        "severity": "low",
        "impact_description": "Changing endpoint 'POST:/process' has no detected dependents."
      }
    ],
    "high_impact_nodes": [
      {
        "target": "func:str",
        "severity": "critical",
        "total_dependents": 9,
        "impact_description": "Changing function 'func:str' has no detected dependents."
      },
      {
        "target": "func:print",
        "severity": "high",
        "total_dependents": 7,
        "impact_description": "Changing function 'func:print' has no detected dependents."
      },
      {
        "target": "func:len",
        "severity": "high",
        "total_dependents": 7,
        "impact_description": "Changing function 'func:len' has no detected dependents."
      },
      {
        "target": "func:text.strip",
        "severity": "high",
        "total_dependents": 5,
        "impact_description": "Changing function 'func:text.strip' has no detected dependents."
      },
      {
        "target": "func:enumerate",
        "severity": "high",
        "total_dependents": 5,
        "impact_description": "Changing function 'func:enumerate' has no detected dependents."
      }
    ],
    "accuracy": {},
    "metadata": {
      "files_scanned": 28
    },
    "semantic_context": {
      "health_status": "critical",
      "health_description": "Low integration: 0% of endpoints have matching API calls. Many endpoints may be unused, or API calls may be missing.",
      "connection_rate": 0.0,
      "key_insights": [
        "Endpoints found but no API calls detected - may be used by external clients or missing frontend code",
        "5 high-impact nodes detected - changes to these would affect many files"
      ],
      "field_descriptions": {
        "endpoints": "Backend API endpoints (routes) that accept HTTP requests",
        "api_calls": "Frontend/client code that makes HTTP requests to APIs",
        "connections": "Matched pairs showing which API calls connect to which endpoints",
        "blast_radius": "Impact analysis showing how many files/endpoints would be affected by changes",
        "high_impact_nodes": "Critical endpoints/files that have many dependencies"
      }
    },
    "ui_inspection": {
      "snapshots": [],
      "issues": [],
      "summary": {
        "total_files": 0,
        "total_elements": 0,
        "total_issues": 0,
        "issues_by_type": {}
      },
      "enabled": true
    }
  }
}
    </script>
    
    <script>
        // Toggle Info Panel
        window.toggleInfoPanel = function() {
            const panel = document.getElementById('info-panel');
            const toggle = document.getElementById('panel-toggle');
            
            if (panel && toggle) {
                panel.classList.toggle('hidden');
                if (panel.classList.contains('hidden')) {
                    toggle.classList.add('visible');
                } else {
                    toggle.classList.remove('visible');
                }
            }
        };
        
        // Get API URL from query param or use default
        const urlParams = new URLSearchParams(window.location.search);
        const apiUrl = urlParams.get('api') || 'http://localhost:8002';
        const reportName = urlParams.get('report') || null;
        
        // Initialize variables first (before any functions that use them)
        let network = null;
        let nodes = null;
        let edges = null;
        let physicsEnabled = true;
        let labelsEnabled = true;
        let focusModeEnabled = false;
        let diffModeEnabled = false;
        let allNodes = [];
        let allEdges = [];
        let currentGraphType = 'api'; // Initialize before use
        let selectedNodeId = null;
        let renderStartTime = null;
        
        // Diff mode state
        let currentSnapshotData = null;
        let previousSnapshotData = null;
        let diffData = null;
        let showUnchangedNodes = false;
        let activeDiffFilters = ['all'];
        let availableReports = [];
        
        // Extract current report number from file path
        function getCurrentReportNumber() {
            try {
                // Primary: extract from current file path (most reliable)
                const pathMatch = window.location.pathname.match(/reports[\/\\](\d+)[\/\\]/);
                if (pathMatch) {
                    return parseInt(pathMatch[1]);
                }
                
                // Fallback: try to extract from embedded data
                const embeddedData = document.getElementById('embedded-graph-data');
                if (embeddedData) {
                    const data = JSON.parse(embeddedData.textContent);
                    const reportPath = data.report?.project?.path || '';
                    // Extract report number from path like: .../reports/26/report.json
                    const match = reportPath.match(/reports[\/\\](\d+)[\/\\]/);
                    if (match) {
                        return parseInt(match[1]);
                    }
                }
            } catch (e) {
                console.warn('Could not extract report number:', e);
            }
            return null;
        }
        
        // Navigate to previous/next report while preserving graph type
        window.navigateReport = function(direction) {
            const currentReportNum = getCurrentReportNumber();
            if (currentReportNum === null) {
                console.warn('Could not determine current report number');
                return;
            }
            
            const targetReportNum = currentReportNum + direction;
            if (targetReportNum < 0) {
                console.log('Already at first report');
                return;
            }
            
            // Get current graph type
            const currentGraphType = window.currentGraphType || 'api';
            
            // Construct new path - replace report number in current path
            let newPath = window.location.pathname;
            newPath = newPath.replace(/reports[\/\\]\d+[\/\\]/, `reports/${targetReportNum}/`);
            
            // Add graph type to URL so it's preserved
            const newUrl = new URL(window.location.href);
            newUrl.pathname = newPath;
            newUrl.searchParams.set('graph', currentGraphType);
            
            // Navigate to new report
            window.location.href = newUrl.toString();
        };
        
        // Update navigation button states on load
        function updateNavigationButtons() {
            const currentReportNum = getCurrentReportNumber();
            const prevBtn = document.getElementById('nav-prev');
            const nextBtn = document.getElementById('nav-next');
            
            if (currentReportNum !== null) {
                // Disable prev button if we're at report 0
                if (prevBtn) {
                    prevBtn.disabled = currentReportNum <= 0;
                    prevBtn.style.opacity = currentReportNum <= 0 ? '0.3' : '1';
                    prevBtn.style.cursor = currentReportNum <= 0 ? 'not-allowed' : 'pointer';
                }
                
                // For next button, we can't easily check if next exists without trying
                // So we'll enable it and let it fail gracefully if report doesn't exist
                if (nextBtn) {
                    nextBtn.disabled = false;
                    nextBtn.style.opacity = '1';
                    nextBtn.style.cursor = 'pointer';
                }
            } else {
                // Hide buttons if we can't determine report number
                if (prevBtn) prevBtn.style.display = 'none';
                if (nextBtn) nextBtn.style.display = 'none';
            }
        }
        
        // Check for graph type in URL and restore it (after variable declaration)
        const graphTypeFromUrl = urlParams.get('graph');
        if (graphTypeFromUrl && ['api', 'functions', 'files'].includes(graphTypeFromUrl)) {
            currentGraphType = graphTypeFromUrl;
        }
        
        // Console log entries
        const consoleLog = document.getElementById('console-log');
        let logEntries = [];
        
        function addLogEntry(message) {
            const entry = document.createElement('div');
            entry.className = 'log-entry new';
            entry.textContent = `> [SYSTEM] ${message}`;
            logEntries.push(entry);
            consoleLog.appendChild(entry);
            
            // Keep only last 10 entries
            if (logEntries.length > 10) {
                const oldEntry = logEntries.shift();
                oldEntry.remove();
            }
            
            // Auto-scroll to bottom
            consoleLog.scrollTop = consoleLog.scrollHeight;
            
            // Remove 'new' class after animation
            setTimeout(() => entry.classList.remove('new'), 300);
        }
        
        // --- GRAPH DATA TRANSLATOR ---
// Unified translator: converts any graph type (API, dependencies, function_dependencies)
// into a normalized format of just nodes (balls) and edges (lines)
// The renderer only ever sees this normalized format
window.GraphDataTranslator = {
    // Cache for embedded data and translated results
    _cache: {
        allData: null,
        parsed: false,
        translated: {}  // Cache translated results per graph type
    },
    
    // Parse embedded data once
    _parseEmbeddedData: function() {
        if (this._cache.parsed) {
            return this._cache.allData;
        }
        
        const embeddedScript = document.getElementById('embedded-graph-data');
        if (embeddedScript && embeddedScript.textContent) {
            try {
                this._cache.allData = JSON.parse(embeddedScript.textContent);
                this._cache.parsed = true;
                console.log('[TRANSLATOR] Parsed embedded graph data');
            } catch (e) {
                console.error('[TRANSLATOR] Failed to parse embedded data:', e);
                return null;
            }
        }
        return this._cache.allData;
    },
    
    // Translate any graph type to normalized format: { nodes: [], edges: [] }
    // Results are cached per graph type to avoid repeated translation
    translate: function(graphType, forceRefresh = false) {
        // Return cached result if available and not forcing refresh
        if (!forceRefresh && this._cache.translated[graphType]) {
            return this._cache.translated[graphType];
        }
        
        const allData = this._parseEmbeddedData();
        if (!allData) {
            console.error('[TRANSLATOR] No embedded data available');
            return { nodes: [], edges: [] };
        }
        
        // Map graph type to data key
        let dataKey = graphType;
        // NOTE: The UI Labels map as follows:
        // "FILES" button -> switchGraph('files') -> Maps to 'dependencies' (File Imports) -> Uses Code Metropolis (City)
        // "FUNCTIONS" button -> switchGraph('functions') -> Maps to 'function_dependencies' (Function Calls) -> Uses Spheres/Blobs
        // "APIs" button -> switchGraph('api') -> Maps to 'api' (Endpoints) -> Uses Spheres/Blobs
        
        if (graphType === 'files' || graphType === 'dependency') {
            // Support both old 'dependency' and new 'files' for backward compatibility
            dataKey = 'dependencies';
        } else if (graphType === 'functions' || graphType === 'function_dependency') {
            // Support both old 'function_dependency' and new 'functions' for backward compatibility
            dataKey = 'function_dependencies';
        }
        
        // Get the graph data for this type
        const graphData = allData[dataKey] || allData.api || { nodes: [], edges: [] };
        
        // Normalize: ensure nodes and edges are arrays
        const normalized = {
            nodes: Array.isArray(graphData.nodes) ? graphData.nodes : [],
            edges: Array.isArray(graphData.edges) ? graphData.edges : [],
            summary: graphData.summary || {},
            report: allData.report || {}
        };
        
        // Cache the result
        this._cache.translated[graphType] = normalized;
        
        // Only log on first translation or when forcing refresh
        if (forceRefresh || !this._cache.translated[graphType + '_logged']) {
            console.log(`[TRANSLATOR] ${graphType} -> ${dataKey}: ${normalized.nodes.length} balls, ${normalized.edges.length} lines`);
            this._cache.translated[graphType + '_logged'] = true;
        }
        
        return normalized;
    },
    
    // Clear cache for a specific graph type (useful when switching)
    clearCache: function(graphType) {
        if (graphType) {
            delete this._cache.translated[graphType];
            delete this._cache.translated[graphType + '_logged'];
        } else {
            // Clear all caches
            this._cache.translated = {};
        }
    }
};

// --- 3D ENGINE VARIABLES ---
let scene3d, camera3d, renderer3d;
let nodes3d = [];
let edgeLines3d;
let transitionTo2DStarted = false;
let final2DPositions = new Map(); // Stores the destination X,Y
let finalCameraDistance3D = 200;  // Calculated based on bounds
let orthoCam, perspectiveCam;     // Store camera references

// Toggle Camera Mode (Global)
window.toggleCameraMode = function() {
    if (window.currentGraphType !== 'dependency') return; // Only for City View
    
    const btn = document.getElementById('btn-cam');
    
    if (camera3d.isOrthographicCamera) {
        // Switch to Perspective
        const pos = camera3d.position.clone();
        camera3d = perspectiveCam;
        camera3d.position.copy(pos);
        camera3d.lookAt(0,0,0);
        console.log('[CAMERA] Switched to Perspective');
        if(btn) btn.textContent = 'üé• CAM: PERSP';
    } else {
        // Switch to Orthographic
        const pos = camera3d.position.clone();
        camera3d = orthoCam;
        camera3d.position.copy(pos);
        camera3d.lookAt(0,0,0);
        camera3d.zoom = 1.0; 
        camera3d.updateProjectionMatrix();
        console.log('[CAMERA] Switched to Orthographic (Blueprint)');
        if(btn) btn.textContent = 'üìê CAM: ORTHO';
    }
};

// Keyboard Shortcut 'B'
window.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'b') {
        window.toggleCameraMode();
    }
});
function updateGridMouse(cam) {
    if (window.gridMesh && cam && renderer3d && renderer3d.domElement) {
        // Default to center if mouse not moved yet
        if (window.mouseX === 0 && window.mouseY === 0) return;
        
        const rect = renderer3d.domElement.getBoundingClientRect();
        const mx = ((window.mouseX - rect.left) / rect.width) * 2 - 1;
        const my = -((window.mouseY - rect.top) / rect.height) * 2 + 1;
        
        const ray = new THREE.Raycaster();
        ray.setFromCamera(new THREE.Vector2(mx, my), cam);
        
        const planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), 20); // Z = -20
        const target = new THREE.Vector3();
        ray.ray.intersectPlane(planeZ, target);
        
        if (target) {
            window.gridMesh.material.uniforms.uMouse.value.copy(target);
        }
    }
}

// --- CITY LAYOUT ENGINE ---
// Ground-up rebuild for "Code Metropolis"
const CityLayout = {
    config: {
        unitSize: 20,       // Base building footprint
        padding: 15,        // Increased padding between buildings (was 10) for better label spacing
        street: 50,         // Increased street width between districts (was 40) for better separation
        districtPadding: 25 // Increased padding inside district walls (was 20) for better spacing
    },

    // Main: Returns Map<id, {x,y,...}>
    layout: function(nodes, edges) {
        console.log('[CITY] üèóÔ∏è Building Code Metropolis...');
        
        // Separate connected and unconnected files
        const connectedNodeIds = new Set();
        if (edges && edges.length > 0) {
            edges.forEach(e => {
                connectedNodeIds.add(e.from);
                connectedNodeIds.add(e.to);
            });
        }
        
        // Mark files as connected/unconnected but keep them together in tree structure
        nodes.forEach(node => {
            node.isConnected = connectedNodeIds.has(node.id);
        });
        
        const connectedCount = nodes.filter(n => n.isConnected).length;
        const unconnectedCount = nodes.filter(n => !n.isConnected).length;
        console.log(`[CITY] Connected files: ${connectedCount}, Unconnected files: ${unconnectedCount}`);
        
        // Build single tree structure preserving directory hierarchy
        const tree = this.buildTree(nodes);
        console.log('[CITY] Tree constructed. Root children:', tree.children.length);
        
        // Calculate sizes (bottom-up)
        this.calculateSizes(tree);
        console.log(`[CITY] Root Size: ${tree.w.toFixed(0)}x${tree.h.toFixed(0)}`);
        
        // Calculate positions (top-down) - organize by tree structure
        // Center the city at 0,0
        this.calculatePositions(tree, -tree.w/2, -tree.h/2);
        
        // Flatten to node map
        const nodeMap = new Map();
        this.flatten(tree, nodeMap);
        
        // Collect districts for visualization
        window.cityDistricts = [];
        this.collectDistricts(tree, window.cityDistricts);
        
        // Now apply separation: shift connected and unconnected files within their tree positions
        // This maintains tree structure but visually separates the two groups
        // Much larger separation - "punch 1" to the left, "punch 2" to the right
        const separationGap = 400; // Increased from 150 - much more space between groups
        
        // Find the center X of all nodes
        let minX = Infinity, maxX = -Infinity;
        nodeMap.forEach(n => {
            minX = Math.min(minX, n.x);
            maxX = Math.max(maxX, n.x);
        });
        const centerX = (minX + maxX) / 2;
        
        // Shift nodes: connected to left, unconnected to right
        // But maintain their relative positions within the tree
        nodeMap.forEach((n, nodeId) => {
            const node = nodes.find(nd => nd.id === nodeId);
            if (node && node.isConnected) {
                // Shift connected files significantly to the left (punch 1)
                n.x = n.x - separationGap / 2;
            } else {
                // Shift unconnected files significantly to the right (punch 2)
                n.x = n.x + separationGap / 2;
            }
        });
        
        return nodeMap;
    },

    buildTree: function(nodes) {
        const root = { path: 'root', children: [], files: [], type: 'root' };
        const map = { '': root };
        
        nodes.forEach(node => {
            const path = node.file_path || node.id;
            // Remove filename
            const parts = path.split('/');
            parts.pop(); 
            const dirPath = parts.join('/');
            
            // Ensure dir exists
            if (!map[dirPath]) {
                // Walk up and create
                const subParts = dirPath.split('/');
                let curr = '';
                let parent = root;
                subParts.forEach((p, i) => {
                    curr = i === 0 ? p : `${curr}/${p}`;
                    if (!map[curr]) {
                        const newDir = { path: curr, name: p, children: [], files: [], type: 'dir' };
                        map[curr] = newDir;
                        parent.children.push(newDir);
                    }
                    parent = map[curr];
                });
            }
            map[dirPath].files.push(node);
        });
        return root;
    },

    calculateSizes: function(node) {
        // 1. Size of Files Block (Grid)
        if (node.files.length > 0) {
            const count = node.files.length;
            const cols = Math.ceil(Math.sqrt(count));
            const rows = Math.ceil(count / cols);
            const u = this.config.unitSize + this.config.padding;
            
            node.filesBlock = {
                w: cols * u + this.config.districtPadding * 2,
                h: rows * u + this.config.districtPadding * 2,
                cols: cols
            };
        } else {
            node.filesBlock = { w: 0, h: 0 };
        }

        // 2. Recurse Children
        node.children.forEach(c => this.calculateSizes(c));
        
        // 3. Pack Children + FilesBlock using Shelf/Bin Packing
        // Items to pack:
        const items = [];
        if (node.filesBlock.w > 0) items.push({ ...node.filesBlock, type: 'files' });
        node.children.forEach(c => items.push({ ...c, type: 'dir' })); // c already has w/h
        
        // Sort by height (desc)
        items.sort((a, b) => b.h - a.h);
        
        let currentX = 0;
        let currentY = 0;
        let rowHeight = 0;
        let maxW = 0;
        
        // Target aspect ratio 1:1 roughly
        // Heuristic: Max width = sqrt(total_area)
        const totalArea = items.reduce((sum, i) => sum + i.w * i.h, 0);
        const targetW = Math.max(node.filesBlock.w, Math.sqrt(totalArea) * 1.2); 
        
        items.forEach(item => {
            if (currentX + item.w > targetW && currentX > 0) {
                // New Row
                currentX = 0;
                currentY += rowHeight + this.config.street;
                rowHeight = 0;
            }
            
            item.relX = currentX;
            item.relY = currentY;
            
            currentX += item.w + this.config.street;
            rowHeight = Math.max(rowHeight, item.h);
            maxW = Math.max(maxW, currentX);
        });
        
        node.w = Math.max(this.config.street, maxW); // Ensure non-zero
        node.h = currentY + rowHeight;
        // Store items back to node for positioning
        node.packedItems = items;
    },

    calculatePositions: function(node, absX, absY) {
        node.x = absX;
        node.y = absY;
        
        if (node.packedItems) {
            node.packedItems.forEach(item => {
                const myX = absX + item.relX;
                const myY = absY + item.relY;
                
                if (item.type === 'files') {
                    // Position individual files
                    // Grid layout
                    const u = this.config.unitSize + this.config.padding;
                    const startX = myX + this.config.districtPadding;
                    const startY = myY + this.config.districtPadding;
                    
                    node.files.forEach((f, i) => {
                        const col = i % item.cols;
                        const row = Math.floor(i / item.cols);
                        f.x = startX + col * u;
                        f.y = startY + row * u;
                    });
                } else if (item.type === 'dir') {
                    // Recurse - find the original child node object
                    // item is a copy or reference? It's a reference because we pushed 'c'
                    this.calculatePositions(item, myX, myY);
                }
            });
        }
    },

    flatten: function(node, map) {
        node.files.forEach(f => {
            map.set(f.id, {
                id: f.id,
                x: f.x,
                y: f.y,
                vx: 0, vy: 0,
                w: this.config.unitSize,
                h: this.config.unitSize
            });
        });
        node.children.forEach(c => this.flatten(c, map));
    },
    
    collectDistricts: function(node, list) {
        // Add this directory as a district
        if (node.path !== 'root') {
            list.push({
                path: node.path,
                name: node.name,
                x: node.x,
                y: node.y,
                w: node.w,
                h: node.h,
                depth: node.path.split('/').length,
                fileCount: node.files.length
            });
        }
        node.children.forEach(c => this.collectDistricts(c, list));
    }
};

// --- 1. PRE-CALCULATION (THE REFERENCE LOGIC) ---
// We calculate the 2D layout *before* showing the 3D scene
// This ensures a proper non-symmetric layout that the animation will transition to
function calculateReferenceLayout() {
    console.log('[LAYOUT] Calculating 2D positions via translator...');
    const nodeMap = new Map();
    
    // Use translator to get normalized data (translator -> renderer path)
    const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api');
    const nodes = graphData.nodes || [];
    const edges = graphData.edges || [];
    console.log(`[LAYOUT] Graph data: ${nodes.length} balls, ${edges.length} lines`);
    
    // === CITY LAYOUT (FILES) ===
    if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
         console.log('[LAYOUT] Running City Grid Layout...');
         return CityLayout.layout(nodes, edges);
    }

    // === FORCE-DIRECTED LAYOUT (APIs & FUNCTIONS) ===
    // Both APIs and Functions use the same blob/sphere force-directed layout
    // Separate connected nodes (center) from unconnected nodes (edges)
    
    // 1. Identify which nodes are connected (have edges)
    const connectedNodeIds = new Set();
    edges.forEach(e => {
        connectedNodeIds.add(e.from);
        connectedNodeIds.add(e.to);
    });
    
    const connectedNodes = [];
    const unconnectedNodes = [];
    nodes.forEach(n => {
        if (connectedNodeIds.has(n.id)) {
            connectedNodes.push(n);
        } else {
            unconnectedNodes.push(n);
        }
    });
    
    console.log(`[LAYOUT] Connected nodes: ${connectedNodes.length}, Unconnected nodes: ${unconnectedNodes.length}`);
    
    // 2. Initialize positions: connected in center, unconnected on edges
    // Increased spacing to prevent label overlap and better separation
    const centerSpread = 100;  // Increased from 60 - more space for connected nodes
    const edgeSpread = 250;    // Increased from 150 - much further separation for unconnected nodes
    const separationGap = 80;  // Minimum gap between connected and unconnected groups
    
    // Place connected nodes in center with better spacing
    connectedNodes.forEach((n, i) => {
        const seed = (i * 137.508) % 1; // Golden angle for better distribution
        const angle = seed * Math.PI * 2;
        // Use more of the center spread for better spacing
        const radius = (Math.random() * 0.4 + 0.1) * centerSpread; // 10-50% of center spread
        nodeMap.set(n.id, {
            id: n.id,
            x: Math.cos(angle) * radius + (Math.random() - 0.5) * 15, // Slightly more jitter
            y: Math.sin(angle) * radius + (Math.random() - 0.5) * 15,
            vx: 0, vy: 0,
            isConnected: true
        });
    });
    
    // Place unconnected nodes on edges/corners - much further away
    unconnectedNodes.forEach((n, i) => {
        // Distribute around the perimeter (corners and edges)
        const cornerCount = 4; // 4 corners
        const edgeCount = unconnectedNodes.length;
        const position = i % (cornerCount + 4); // 4 corners + 4 edge midpoints
        
        let x, y;
        // Ensure minimum distance from center (centerSpread + separationGap)
        const minRadius = centerSpread + separationGap;
        
        if (position < cornerCount) {
            // Place on corners - further out
            const corner = position;
            const cornerAngles = [Math.PI * 0.25, Math.PI * 0.75, Math.PI * 1.25, Math.PI * 1.75];
            const angle = cornerAngles[corner];
            const radius = Math.max(minRadius, edgeSpread * (0.8 + Math.random() * 0.2)); // 80-100% of edge spread
            x = Math.cos(angle) * radius;
            y = Math.sin(angle) * radius;
        } else {
            // Place on edge midpoints - further out
            const edge = position - cornerCount;
            const edgeAngles = [0, Math.PI * 0.5, Math.PI, Math.PI * 1.5];
            const angle = edgeAngles[edge % 4];
            const radius = Math.max(minRadius, edgeSpread * (0.7 + Math.random() * 0.3)); // 70-100% of edge spread
            x = Math.cos(angle) * radius;
            y = Math.sin(angle) * radius;
        }
        
        nodeMap.set(n.id, {
            id: n.id,
            x: x + (Math.random() - 0.5) * 20, // More jitter for better spacing
            y: y + (Math.random() - 0.5) * 20,
            vx: 0, vy: 0,
            isConnected: false
        });
    });
    
    const spread = Math.max(centerSpread, edgeSpread);
    
    // Physics Simulation with improved parameters
    // k is the ideal distance between nodes - increased for better label spacing
    const k = Math.sqrt((spread * spread * 2) / nodes.length) * 1.5; // Increased by 50% for better spacing
    const iterations = 300; // Increased iterations for better convergence
    
    // Cooling factor for simulated annealing effect
    let temperature = 1.0;
    const coolingRate = 0.95;
    
    for(let i=0; i<iterations; i++) {
        // Update temperature (simulated annealing)
        temperature *= coolingRate;
        
        // Central Gravity (different for connected vs unconnected)
        nodeMap.forEach(n => {
            if (n.isConnected) {
                // Strong gravity for connected nodes - keep them in center
                n.vx -= n.x * 0.02 * temperature;
                n.vy -= n.y * 0.02 * temperature;
            } else {
                // Weak/negative gravity for unconnected nodes - push to edges
                const dist = Math.sqrt(n.x * n.x + n.y * n.y);
                const targetDist = edgeSpread * 0.9; // Target distance from center
                if (dist < targetDist) {
                    // Push outward if too close to center
                    const pushForce = (targetDist - dist) / targetDist * 0.01 * temperature;
                    n.vx += (n.x / dist || 0) * pushForce;
                    n.vy += (n.y / dist || 0) * pushForce;
                } else {
                    // Light gravity to prevent infinite scattering
                    n.vx -= n.x * 0.003 * temperature;
                    n.vy -= n.y * 0.003 * temperature;
                }
            }
        });
        
        // Repulsion (Coulomb force - nodes repel each other)
        nodeMap.forEach(n1 => {
            let fx = 0, fy = 0;
            nodeMap.forEach(n2 => {
                if(n1.id === n2.id) return;
                const dx = n1.x - n2.x;
                const dy = n1.y - n2.y;
                const dist = Math.sqrt(dx*dx + dy*dy) || 0.1;
                // Repulsion force: k^2 / dist^2 (stronger repulsion)
                const force = (k * k) / (dist * dist);
                fx += (dx / dist) * force;
                fy += (dy / dist) * force;
            });
            n1.vx += fx * temperature;
            n1.vy += fy * temperature;
        });
        
        // Attraction (Spring force - edges pull nodes together)
        edges.forEach(e => {
            const n1 = nodeMap.get(e.from);
            const n2 = nodeMap.get(e.to);
            if(!n1 || !n2) return;
            const dx = n1.x - n2.x;
            const dy = n1.y - n2.y;
            const dist = Math.sqrt(dx*dx + dy*dy) || 0.1;
            // Attraction force: (dist - k) / k (spring-like)
            const force = (dist - k) / k;
            const fx = (dx / dist) * force;
            const fy = (dy / dist) * force;
            n1.vx -= fx * temperature;
            n1.vy -= fy * temperature;
            n2.vx += fx * temperature;
            n2.vy += fy * temperature;
        });
        
        // Update positions with adaptive damping
        const damping = 0.7 + (1 - temperature) * 0.2; // Increase damping as we cool
        nodeMap.forEach(n => {
            // Cap velocity to prevent explosions
            const maxVel = 10;
            const velMag = Math.sqrt(n.vx * n.vx + n.vy * n.vy);
            if (velMag > maxVel) {
                n.vx = (n.vx / velMag) * maxVel;
                n.vy = (n.vy / velMag) * maxVel;
            }
            
            n.x += n.vx * 0.1;
            n.y += n.vy * 0.1;
            n.vx *= damping;
            n.vy *= damping;
        });
    }
    
    // CRITICAL: Scale down if graph is too large (keep it visible)
    // Reference graphs are typically within ¬±200 units
    let maxDist = 0;
    nodeMap.forEach(n => {
        const dist = Math.sqrt(n.x * n.x + n.y * n.y);
        maxDist = Math.max(maxDist, dist);
    });
    
    if (maxDist > 200) {
        const scaleFactor = 200 / maxDist;
        console.log(`[LAYOUT] Scaling down by ${scaleFactor.toFixed(2)} (maxDist was ${maxDist.toFixed(1)})`);
        nodeMap.forEach(n => {
            n.x *= scaleFactor;
            n.y *= scaleFactor;
        });
    }
    
    // Calculate bounds for camera
    let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
    nodeMap.forEach(n => {
        minX = Math.min(minX, n.x);
        maxX = Math.max(maxX, n.x);
        minY = Math.min(minY, n.y);
        maxY = Math.max(maxY, n.y);
    });
    
    const width = maxX - minX;
    const height = maxY - minY;
    const maxDim = Math.max(width, height, 100);
    
    // Calculate camera distance to fit graph
    const fovRad = (50 * Math.PI) / 180;
    finalCameraDistance3D = (maxDim * 1.2) / (2 * Math.tan(fovRad / 2));
    
    console.log(`[LAYOUT] Bounds: X[${minX.toFixed(1)}, ${maxX.toFixed(1)}] Y[${minY.toFixed(1)}, ${maxY.toFixed(1)}]`);
    console.log(`[LAYOUT] Max dimension: ${maxDim.toFixed(1)}, Camera distance: ${finalCameraDistance3D.toFixed(1)}`);
    console.log(`[LAYOUT] 2D positions calculated for ${nodeMap.size} balls`);
    
    return nodeMap;
}

// === TREE/HIERARCHICAL LAYOUT FOR FUNCTIONS ===
// If A depends on B, then B is the root (top) and A is the dependent (below)
// This creates a normal tree: root at top, dependents below
function calculateTreeLayout(nodes, edges) {
    console.log('[TREE] Calculating hierarchical tree layout...');
    const nodeMap = new Map();
    const nodeLookup = new Map(nodes.map(n => [n.id, n]));
    
    // Build adjacency lists: who depends on whom
    // If edge is from: A, to: B, then A depends on B (B is dependency, A is dependent)
    const dependents = new Map(); // dependency -> [dependents]
    const dependencies = new Map(); // dependent -> [dependencies]
    const inDegree = new Map(); // node -> how many dependencies it has
    
    nodes.forEach(n => {
        dependents.set(n.id, []);
        dependencies.set(n.id, []);
        inDegree.set(n.id, 0);
    });
    
    edges.forEach(edge => {
        const dependent = edge.from; // A depends on B
        const dependency = edge.to;   // B is the dependency
        
        if (!dependents.has(dependency)) dependents.set(dependency, []);
        if (!dependencies.has(dependent)) dependencies.set(dependent, []);
        
        dependents.get(dependency).push(dependent);
        dependencies.get(dependent).push(dependency);
        inDegree.set(dependent, (inDegree.get(dependent) || 0) + 1);
    });
    
    // Find root nodes (nodes with no dependencies - inDegree = 0)
    const roots = [];
    inDegree.forEach((degree, nodeId) => {
        if (degree === 0) {
            roots.push(nodeId);
        }
    });
    
    // If no clear roots, pick nodes with most dependents (most important)
    if (roots.length === 0) {
        console.log('[TREE] No clear root nodes, selecting nodes with most dependents...');
        const dependentsCount = Array.from(dependents.entries())
            .map(([id, deps]) => [id, deps.length])
            .sort((a, b) => b[1] - a[1]);
        
        // Take top 3 as roots
        roots.push(...dependentsCount.slice(0, Math.min(3, dependentsCount.length)).map(([id]) => id));
    }
    
    console.log(`[TREE] Found ${roots.length} root(s):`, roots);
    
    // Tree layout parameters
    const levelHeight = 120; // Vertical spacing between levels
    const nodeSpacing = 80;  // Horizontal spacing between siblings
    const rootY = -200;      // Start roots at top (negative Y = up)
    
    // Assign levels using BFS from roots
    const level = new Map();
    const visited = new Set();
    const queue = [];
    
    // Initialize roots at level 0
    roots.forEach(rootId => {
        level.set(rootId, 0);
        visited.add(rootId);
        queue.push(rootId);
    });
    
    // BFS to assign levels
    while (queue.length > 0) {
        const current = queue.shift();
        const currentLevel = level.get(current);
        
        // Process dependents (children in tree)
        const children = dependents.get(current) || [];
        children.forEach(child => {
            if (!visited.has(child)) {
                level.set(child, currentLevel + 1);
                visited.add(child);
                queue.push(child);
            } else {
                // Already visited - might be in a cycle, assign to deeper level
                const existingLevel = level.get(child);
                if (existingLevel <= currentLevel) {
                    level.set(child, currentLevel + 1);
                }
            }
        });
    }
    
    // Assign levels to unvisited nodes (orphans or cycles)
    nodes.forEach(n => {
        if (!level.has(n.id)) {
            // Find max level of dependencies, or assign to max level + 1
            const depLevels = (dependencies.get(n.id) || []).map(depId => level.get(depId) || 0);
            const maxDepLevel = depLevels.length > 0 ? Math.max(...depLevels) : -1;
            level.set(n.id, maxDepLevel + 1);
        }
    });
    
    // Group nodes by level
    const nodesByLevel = new Map();
    level.forEach((lvl, nodeId) => {
        if (!nodesByLevel.has(lvl)) {
            nodesByLevel.set(lvl, []);
        }
        nodesByLevel.get(lvl).push(nodeId);
    });
    
    console.log(`[TREE] Levels:`, Array.from(nodesByLevel.keys()).sort((a, b) => a - b).map(l => `${l}: ${nodesByLevel.get(l).length} nodes`));
    
    // Position nodes: level determines Y, siblings spread horizontally
    const maxLevel = Math.max(...Array.from(level.values()));
    
    nodesByLevel.forEach((nodeIds, lvl) => {
        const y = rootY + (lvl * levelHeight);
        const count = nodeIds.length;
        const totalWidth = (count - 1) * nodeSpacing;
        const startX = -totalWidth / 2;
        
        nodeIds.forEach((nodeId, idx) => {
            const x = startX + (idx * nodeSpacing);
            
            // Add small random offset to break perfect alignment
            const jitterX = (Math.random() - 0.5) * 10;
            const jitterY = (Math.random() - 0.5) * 5;
            
            nodeMap.set(nodeId, {
                id: nodeId,
                x: x + jitterX,
                y: y + jitterY,
                level: lvl,
                vx: 0,
                vy: 0
            });
        });
    });
    
    // Calculate bounds for camera
    let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
    nodeMap.forEach(n => {
        minX = Math.min(minX, n.x);
        maxX = Math.max(maxX, n.x);
        minY = Math.min(minY, n.y);
        maxY = Math.max(maxY, n.y);
    });
    
    const width = maxX - minX;
    const height = maxY - minY;
    const maxDim = Math.max(width, height, 100);
    
    // Calculate camera distance
    const fovRad = (50 * Math.PI) / 180;
    finalCameraDistance3D = (maxDim * 1.2) / (2 * Math.tan(fovRad / 2));
    
    console.log(`[TREE] Bounds: X[${minX.toFixed(1)}, ${maxX.toFixed(1)}] Y[${minY.toFixed(1)}, ${maxY.toFixed(1)}]`);
    console.log(`[TREE] Max dimension: ${maxDim.toFixed(1)}, Camera distance: ${finalCameraDistance3D.toFixed(1)}`);
    console.log(`[TREE] Tree layout calculated for ${nodeMap.size} nodes`);
    
    return nodeMap;
}

// --- 2. 3D ENGINE (THREE.JS) ---
function init3DView() {
    console.log('[3D] ========================================');
    console.log('[3D] Initializing 3D renderer (translator -> renderer)');
    console.log('[3D] ========================================');
    const container = document.getElementById('canvas-3d');
    if (!container) {
        console.error('[3D] FATAL: canvas-3d container not found!');
        return;
    }
    console.log('[3D] Container found:', container);
    
    container.style.display = 'block';
    container.style.opacity = '1';
    console.log('[3D] Container display set to block, opacity to 1');
    
    // Inject Reset Button
    if (!document.getElementById('btn-reset')) {
        const camBtn = document.getElementById('btn-cam');
        if (camBtn && camBtn.parentNode) {
            const resetBtn = document.createElement('button');
            resetBtn.id = 'btn-reset';
            resetBtn.textContent = '‚Ü∫ RESET';
            resetBtn.onclick = window.resetView;
            // Insert before camera button
            camBtn.parentNode.insertBefore(resetBtn, camBtn); 
        }
    }
    
    // Scene
    scene3d = new THREE.Scene();
    // Subtle Fog for Depth Perception (consultant request)
    if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
        // City view: Minimal fog (depth perception without obscuring)
        scene3d.fog = new THREE.Fog(0x000000, 400, 1200);
    } else {
        // Space view: Dramatic fog
        scene3d.fog = new THREE.Fog(0x000000, 200, 900);
    } 
    
    // Camera
    const aspect = window.innerWidth / window.innerHeight;
    
    // Standard Perspective Camera for Space/Galaxy Views
    const perspectiveCam = new THREE.PerspectiveCamera(50, aspect, 0.1, 4000);
    
    // Orthographic Camera for City View (Isometric - SimCity style)
    // Frustum size = view size in world units
    const frustumSize = 300; 
    orthoCam = new THREE.OrthographicCamera(
        frustumSize * aspect / -2, 
        frustumSize * aspect / 2, 
        frustumSize / 2, 
        frustumSize / -2, 
        1, 
        2000
    );
    
    // Default to Perspective
    camera3d = perspectiveCam; 
    camera3d.position.set(0, 0, 50);
    camera3d.lookAt(0,0,0);
    
    // Renderer
    renderer3d = new THREE.WebGLRenderer({ antialias: true, alpha: true, preserveDrawingBuffer: true });
    renderer3d.setSize(window.innerWidth, window.innerHeight);
    renderer3d.setPixelRatio(window.devicePixelRatio);
    container.appendChild(renderer3d.domElement);
    
    // Lighting (Boosted for visibility)
    const ambientLight = new THREE.AmbientLight(0x222244, 0.8); // Increased from 0.3
    scene3d.add(ambientLight);
    
    // Nebula Lights (Background ambiance) - Color scheme separation
    if (window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
        // Functions: Warm ambient lighting (orange/red)
        const nebula1 = new THREE.PointLight(0xFF6B35, 1.2, 400);
        nebula1.position.set(100, 50, -100);
        scene3d.add(nebula1);
        
        const nebula2 = new THREE.PointLight(0xFF8C42, 1.0, 400);
        nebula2.position.set(-100, -50, 100);
        scene3d.add(nebula2);
    } else if (window.currentGraphType === 'api') {
        // APIs: Cool ambient lighting (blue/cyan)
        const nebula1 = new THREE.PointLight(0x3b82f6, 1.2, 400);
        nebula1.position.set(100, 50, -100);
        scene3d.add(nebula1);
        
        const nebula2 = new THREE.PointLight(0x60A5FA, 1.0, 400);
        nebula2.position.set(-100, -50, 100);
        scene3d.add(nebula2);
    } else {
        // Files: Default purple/cyan
        const nebula1 = new THREE.PointLight(0x7c3aed, 1.2, 400);
        nebula1.position.set(100, 50, -100);
        scene3d.add(nebula1);
        
        const nebula2 = new THREE.PointLight(0x00ff94, 1.0, 400);
        nebula2.position.set(-100, -50, 100);
        scene3d.add(nebula2);
    }
    
    // Key Light (Directional - for Low Poly definition)
    const keyLight = new THREE.DirectionalLight(0xffffff, 0.8);
    keyLight.position.set(50, 100, 50);
    scene3d.add(keyLight);
    
    // Rim Light (Backlight - to define silhouettes)
    const rimLight = new THREE.DirectionalLight(0xffffff, 0.6);
    rimLight.position.set(-50, 50, -100);
    scene3d.add(rimLight);
    
    // Calculate the Layout FIRST
    console.log('[3D] Calling calculateReferenceLayout...');
    final2DPositions = calculateReferenceLayout();
    console.log('[3D] Layout calculated, positions stored:', final2DPositions.size);
    
    // SETUP CAMERA BASED ON GRAPH TYPE
    if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
        // Switch to Orthographic for 2D City View (No perspective BS)
        camera3d = orthoCam;
        console.log('[3D] Using Orthographic Camera for 2D City View');
        
        // --- SET INITIAL VIEW ---
        // Zoom out to fit whole city
        const zoom = 0.5; // Adjust based on city size
        camera3d.zoom = zoom;
        camera3d.position.set(0, 0, 500); // Directly overhead
        camera3d.lookAt(0, 0, 0);
        camera3d.updateProjectionMatrix();
        
    } else {
        camera3d = perspectiveCam;
        console.log('[3D] Using Perspective Camera for Graph View');
    }
    
    // No 2D network needed - staying in 3D for interaction
    
    // Use translator to get normalized data (translator -> renderer path)
    const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api');
    console.log(`[3D] Graph data via translator: ${graphData.nodes.length} nodes, ${graphData.edges.length} edges`);
    console.log('[3D] Creating 3D nodes (balls) and edges (lines)...');
    
    // UPDATE UI STATS (Fix "LOADING..." issue)
    if (graphData.report && graphData.report.project) {
        const projName = graphData.report.project.name || 'Unknown Project';
        const projEl = document.getElementById('project-name');
        if (projEl) projEl.textContent = projName;
    }
    
    // Add Close Button to Panel if not present
    const infoPanel = document.getElementById('info-panel');
    if (infoPanel && !infoPanel.querySelector('.panel-close-btn')) {
        const closeBtn = document.createElement('button');
        closeBtn.className = 'panel-close-btn';
        closeBtn.innerHTML = '√ó';
        closeBtn.onclick = window.toggleInfoPanel;
        infoPanel.appendChild(closeBtn);
    }
    
    if (graphData.summary) {
        const nodeCountEl = document.getElementById('node-count');
        if (nodeCountEl) nodeCountEl.textContent = graphData.nodes.length;
        
        const edgeCountEl = document.getElementById('edge-count');
        if (edgeCountEl) edgeCountEl.textContent = graphData.edges.length;
        
        const impactEl = document.getElementById('high-impact-count');
        if (impactEl) impactEl.textContent = graphData.summary.high_impact || 0;
        
        const orphanEl = document.getElementById('orphaned-count');
        if (orphanEl) orphanEl.textContent = graphData.summary.orphaned || 0;
    }
    
    // --- 3D GRID BACKGROUND (Shader) ---
    const gridVertexShader = `
        varying vec3 vWorldPos;
        void main() {
            vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
    `;

    const gridFragmentShader = `
        varying vec3 vWorldPos;
        uniform vec3 uColor;
        uniform vec3 uHighlight;
        uniform vec3 uMouse;
        uniform float uRadius;
        uniform float uGridSize;
        uniform float uThickness;
        uniform float uCameraDistance;
        uniform float uBaseOpacity;

        void main() {
            vec2 pos = vWorldPos.xy;
            // Grid Lines
            vec2 grid = abs(fract(pos / uGridSize - 0.5) - 0.5) / fwidth(pos / uGridSize);
            float line = min(grid.x, grid.y);
            float alpha = 1.0 - smoothstep(0.0, uThickness, line);
            
            // Mouse Spotlight
            float dist = distance(pos, uMouse.xy);
            float spot = 1.0 - smoothstep(0.0, uRadius, dist);
            
            // Mix Colors
            vec3 finalColor = mix(uColor, uHighlight, spot * 0.8); 
            
            // Distance Fade (Fog-like)
            float fade = 1.0 - smoothstep(0.0, 1500.0, length(pos));
            
            // Adaptive opacity based on camera distance (zoom level)
            // When zoomed out (far camera), reduce opacity significantly
            // Camera distance typically ranges from ~50 (zoomed in) to ~500+ (zoomed out)
            float distanceOpacity = 1.0 - smoothstep(100.0, 400.0, uCameraDistance);
            distanceOpacity = max(distanceOpacity, 0.15); // Minimum 15% opacity even when very zoomed out
            
            if (alpha < 0.1 && spot < 0.1) discard;
            
            // Reduced base opacity from 0.6 to 0.3, then multiplied by distance factor
            gl_FragColor = vec4(finalColor, (alpha + spot * 0.2) * fade * uBaseOpacity * distanceOpacity);
        }
    `;

    const gridUniforms = {
        uColor: { value: new THREE.Color(0x334155) }, // Slate-600 (brighter)
        uHighlight: { value: new THREE.Color(0x7c3aed) }, 
        uMouse: { value: new THREE.Vector3(9999, 9999, 0) }, // Start off-screen
        uRadius: { value: 50.0 }, // Much smaller spotlight (was 200.0)
        uGridSize: { value: 5.0 }, // Ultra-fine grid (5x smaller)
        uThickness: { value: 1.0 },
        uCameraDistance: { value: 100.0 }, // Camera distance for adaptive opacity
        uBaseOpacity: { value: 0.3 } // Reduced base opacity from 0.6 to 0.3
    };
    
    const gridMat = new THREE.ShaderMaterial({
        vertexShader: gridVertexShader,
        fragmentShader: gridFragmentShader,
        uniforms: gridUniforms,
        transparent: true,
        depthWrite: false,
        side: THREE.DoubleSide
    });
    
    const gridGeo = new THREE.PlaneGeometry(4000, 4000);
    const gridMesh = new THREE.Mesh(gridGeo, gridMat);
    gridMesh.position.z = -25; // Background Plane (Furthest back)
    scene3d.add(gridMesh);
    window.gridMesh = gridMesh;

    // Create 3D Nodes based on 2D destinations + Random Z
    let nodeCount = 0;
    graphData.nodes.forEach(node => {
        nodeCount++;
        const dest = final2DPositions.get(node.id) || {x:0, y:0};
        
        // COLOR SCHEME SEPARATION: Cool palette for APIs, Warm palette for Functions
        let colorHex = 0x7c3aed; // Default purple (API)
        
        // Custom Color Logic based on Graph Type
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            colorHex = 0x00F0FF; // Neon Cyan for FILES (default)
        } else if (window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
            // FUNCTIONS: Warm palette (reds, oranges, yellows)
            colorHex = 0xFF4500; // Orange Red for FUNCTIONS (default - warmer than pure red)
        } else {
            // API: Cool palette (blues, cyans, purples)
            colorHex = 0x3b82f6; // Blue-500 for API (default - cooler than purple)
        }

        // High impact overrides everything
        if (node.high_impact) {
            if (window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
                colorHex = 0xFF6B35; // Warm orange-red for high impact functions
            } else {
                colorHex = 0xBC13FE; // Hot pink for high impact APIs
            }
        } else if (node.color && node.color.background) {
            // Parse color from node data
            const bgColor = node.color.background;
            if (bgColor.startsWith('#')) {
                const parsedColor = parseInt(bgColor.substring(1), 16);
                
                // Apply color scheme filter based on graph type
                if (window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
                    // Functions: Shift colors toward warm palette
                    // Convert to RGB, shift toward warm, convert back
                    const r = (parsedColor >> 16) & 0xFF;
                    const g = (parsedColor >> 8) & 0xFF;
                    const b = parsedColor & 0xFF;
                    
                    // Boost red/orange, reduce blue
                    const warmR = Math.min(255, r + 30);
                    const warmG = Math.max(0, Math.min(255, g - 10));
                    const warmB = Math.max(0, b - 40);
                    
                    colorHex = (warmR << 16) | (warmG << 8) | warmB;
                } else if (window.currentGraphType === 'api') {
                    // APIs: Shift colors toward cool palette
                    const r = (parsedColor >> 16) & 0xFF;
                    const g = (parsedColor >> 8) & 0xFF;
                    const b = parsedColor & 0xFF;
                    
                    // Boost blue/cyan, reduce red
                    const coolR = Math.max(0, r - 30);
                    const coolG = Math.min(255, g + 20);
                    const coolB = Math.min(255, b + 40);
                    
                    colorHex = (coolR << 16) | (coolG << 8) | coolB;
                } else {
                    colorHex = parsedColor; // Files: keep original
                }
            }
        }
        
        // Get node size (matching reference: node.size * 0.3)
        const nodeSize = (node.size || 20) * 0.3;
        if (nodeCount <= 3) {
            console.log(`[3D] Node ${nodeCount}: size=${node.size}, sphere radius=${nodeSize.toFixed(2)}`);
        }
        
        // Geometry and Material based on graph type
        let geo;
        let mat;
        let isGlass = false;
        
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            // FILES: Code Metropolis (City Grid)
            
            // Metric 1: Functional Complexity -> HEIGHT
            // Industry Standard: Polynomial Scaling (Square Root)
            // Preserves variance better than Log, but controls outliers better than Linear.
            const complexity = (node.function_count || 0) + (node.endpoint_count || 0);
            // Base height 5, plus sqrt scaling. Cap at 200.
            // FORCE 2D: Flatten buildings (minimal height)
            const height = 2; 
            
            // Metric 2: Connectivity/Impact -> FOOTPRINT (Width/Depth)
            // Uses node.size which is calculated from import counts in API
            // Or fallback to import_count directly
            const baseSize = Math.max(15, (node.size || 20) * 0.6);
            
            // Box Geometry (Skyscraper) -> FLATTENED to tile
            // Width/Depth = Footprint based on Impact/Connectivity
            geo = new THREE.BoxGeometry(baseSize, baseSize, height);
            geo.translate(0, 0, height / 2); // Pivot at bottom
            
            // "Data Glass" Material -> FLAT 2D MATERIAL
            // Color: Use File Type Color (Cyan for Python, etc.)
            
            // 1. Base Color from Node (File Type)
            let baseColor = new THREE.Color(colorHex);
            
            // 2. No Heat Overlay for 2D (simpler look)
            mat = new THREE.MeshBasicMaterial({
                color: baseColor,
                transparent: true,
                opacity: 0.8,
                side: THREE.DoubleSide
            });
            
            // GOD BUILDING ALERT (Red Beacon) -> REMOVED FOR 2D FLAT VIEW
            // Or keep as a ring on the ground?
            // Let's remove for "pure 2D" request to keep it clean.
            if (complexity > 150) {
                 // Add simple ring on ground to indicate importance
                const ringGeo = new THREE.RingGeometry(baseSize * 0.8, baseSize, 32);
                const ringMat = new THREE.MeshBasicMaterial({ color: 0xff0000, side: THREE.DoubleSide });
                const ring = new THREE.Mesh(ringGeo, ringMat);
                ring.position.set(0, 0, 1); // Just above building
                window.tempBeacon = ring;
            }
            
            // Building Contours
            const edges = new THREE.EdgesGeometry(geo);
            const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.5 }));
            
            // STORE FOR LATER ADDITION
            window.tempLine = line;

            // Store height for label positioning (flat)
            window.tempHeight = height;
            
        } else {
            // API & FUNCTIONS: Low Poly Sphere (Icosahedron detail 0) - Blob/sphere layout
            geo = new THREE.IcosahedronGeometry(nodeSize, 0);
            mat = new THREE.MeshStandardMaterial({ 
                color: colorHex, 
                emissive: colorHex,
                emissiveIntensity: 0.4, // Add glow
                flatShading: true,
                metalness: 0.2,
                roughness: 0.4
            });
        }
        
        const mesh = new THREE.Mesh(geo, mat);
        
        // Attach temp line if exists (Files View)
        if (window.tempLine) {
            mesh.add(window.tempLine);
            window.tempLine = null;
        }
        
        // Attach temp beacon if exists (God Building)
        if (window.tempBeacon) {
            mesh.add(window.tempBeacon);
            window.tempBeacon = null;
        }
        
        // Add random initial rotation (Upright, random Yaw)
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            // City Mode: Upright buildings (no random tumble)
            mesh.rotation.x = 0;
            mesh.rotation.y = 0; 
            mesh.rotation.z = 0; 
        } else {
            // Space Mode: Random tumbling
            mesh.rotation.x = 0; 
            mesh.rotation.y = Math.random() * Math.PI;
        }
        
        // Assign random rotation speed - Sims Style (Single Axis)
        mesh.userData.rotSpeedX = 0;
        // Disable rotation for FILES (Code Metropolis)
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            mesh.userData.rotSpeedY = 0;
        } else {
            mesh.userData.rotSpeedY = 0.05; // Faster spin for API/Functions
        }
        
        // Add Wireframe for Glass Towers
        if (isGlass) {
            const edges = new THREE.EdgesGeometry(geo);
            const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.3 }));
            mesh.add(line);
        }
        
        // Glow Sprite
        const canvas = document.createElement('canvas');
        canvas.width = 32; canvas.height = 32;
        const context = canvas.getContext('2d');
        const gradient = context.createRadialGradient(16, 16, 0, 16, 16, 16);
        gradient.addColorStop(0, 'rgba(255,255,255,1)');
        gradient.addColorStop(0.2, 'rgba(255,255,255,0.5)');
        gradient.addColorStop(0.5, 'rgba(255,255,255,0.1)');
        gradient.addColorStop(1, 'rgba(0,0,0,0)');
        context.fillStyle = gradient;
        context.fillRect(0, 0, 32, 32);
        
        const texture = new THREE.CanvasTexture(canvas);
        const spriteMat = new THREE.SpriteMaterial({ 
            map: texture, 
            color: colorHex, 
            transparent: true, 
            blending: THREE.AdditiveBlending,
            depthWrite: false // FIX: Prevents "square cutout" artifacts
        });
        const sprite = new THREE.Sprite(spriteMat);
        // Glow size matching reference: node.size * 2
        sprite.scale.set((node.size || 20) * 2, (node.size || 20) * 2, 1);
        mesh.add(sprite);
        
        // Text Label (hidden initially, shown after animation)
        // Measure text first to determine canvas size
        const labelText = node.label || node.id;
        const fontSize = 16; // Reduced from 32 to 16 - much smaller font
        const fontFamily = '"Roboto Mono", "Consolas", "Courier New", monospace';
        const font = `400 ${fontSize}px ${fontFamily}`;
        
        // Create temporary context to measure text
        const tempCanvas = document.createElement('canvas');
        const tempContext = tempCanvas.getContext('2d');
        tempContext.font = font;
        const textMetrics = tempContext.measureText(labelText);
        const textWidth = textMetrics.width;
        
        // Calculate canvas dimensions with padding
        const padding = 20; // Reduced padding
        const maxWidth = 300; // Reduced max width
        const canvasWidth = Math.min(Math.ceil(textWidth) + padding, maxWidth);
        const canvasHeight = 64; // Reduced height
        
        // Truncate text if it exceeds max width
        let displayText = labelText;
        if (textWidth > maxWidth - padding) {
            // Find where to truncate
            const maxTextWidth = maxWidth - padding - 60; // Leave room for "..."
            let truncated = '';
            for (let i = 0; i < labelText.length; i++) {
                const testText = labelText.substring(0, i) + '...';
                tempContext.font = font;
                const testWidth = tempContext.measureText(testText).width;
                if (testWidth > maxTextWidth) {
                    truncated = labelText.substring(0, Math.max(0, i - 1)) + '...';
                    break;
                }
            }
            displayText = truncated || labelText;
        }
        
        // Create actual label canvas - HIGH RESOLUTION for crisp text
        const dpr = window.devicePixelRatio || 2; // Use device pixel ratio for retina displays
        const labelCanvas = document.createElement('canvas');
        const labelContext = labelCanvas.getContext('2d');
        labelCanvas.width = canvasWidth * dpr; // High res
        labelCanvas.height = canvasHeight * dpr; // High res
        labelCanvas.style.width = canvasWidth + 'px';
        labelCanvas.style.height = canvasHeight + 'px';
        
        // Scale context for high DPI
        labelContext.scale(dpr, dpr);
        
        // Draw label with proper font size (already scaled by dpr)
        labelContext.font = font;
        labelContext.fillStyle = 'rgba(255, 255, 255, 0.95)';
        labelContext.textAlign = 'center';
        labelContext.textBaseline = 'middle';
        labelContext.shadowColor = 'rgba(0, 0, 0, 1.0)';
        labelContext.shadowBlur = 2;
        labelContext.shadowOffsetX = 0;
        labelContext.shadowOffsetY = 0;
        
        // Enable text rendering hints for better quality
        labelContext.textRenderingOptimization = 'optimizeQuality';
        labelContext.imageSmoothingEnabled = true;
        labelContext.imageSmoothingQuality = 'high';
        
        labelContext.fillText(displayText, canvasWidth / 2, canvasHeight / 2);
        
        const labelTexture = new THREE.CanvasTexture(labelCanvas);
        labelTexture.minFilter = THREE.LinearFilter; // Better filtering
        labelTexture.magFilter = THREE.LinearFilter;
        labelTexture.generateMipmaps = false; // Disable mipmaps for text clarity
        
        const labelMaterial = new THREE.SpriteMaterial({ 
            map: labelTexture, 
            transparent: true,
            opacity: 0, // Start hidden
            depthWrite: false 
        });
        const labelSprite = new THREE.Sprite(labelMaterial);
        
        // Dynamic Label Scaling - maintain aspect ratio properly
        const labelScale = camera3d.isOrthographicCamera ? 20 : 15; // Reduced from 60/40 to 20/15
        const aspectRatio = canvasWidth / canvasHeight;
        // Scale maintaining aspect ratio - width and height should match canvas proportions
        labelSprite.scale.set(labelScale * aspectRatio, labelScale, 1);
        
        // Store original text for tooltip/hover
        labelSprite.userData.originalText = labelText;
        labelSprite.userData.displayText = displayText;
        
        // Position Label - FIXED BELOW NODE at predetermined distance
        // Label is part of the node entity - moves with node automatically (child of mesh)
        const labelDistance = 8; // Fixed distance below node
        const labelY = -nodeSize - labelDistance; // Negative Y = below node
        labelSprite.position.set(0, labelY, 0); // Fixed position relative to node
        mesh.add(labelSprite); // Label is child of node - moves with it automatically
        
        // Set Initial 3D Position
        let zDepth = (Math.random() - 0.5) * 300;
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            zDepth = 0; // Grounded on Grid for City
        }
        mesh.position.set(dest.x, dest.y, zDepth);
        
        // Store meta for animation (KEEP labelSprite reference!)
        mesh.userData = {
            id: node.id,
            destX: dest.x,
            destY: dest.y,
            origZ: zDepth,
            labelSprite: labelSprite, // Store reference for later
            rotSpeedX: mesh.userData.rotSpeedX,
            rotSpeedY: mesh.userData.rotSpeedY
        };
        
        scene3d.add(mesh);
        nodes3d.push(mesh);
    });
    
    // RENDER DISTRICTS (City Mode)
    if ((window.currentGraphType === 'files' || window.currentGraphType === 'dependency') && window.cityDistricts) {
         console.log(`[CITY] Rendering ${window.cityDistricts.length} districts...`);
         const districtGroup = new THREE.Group();
         
         window.cityDistricts.forEach(d => {
             // 1. Base Plane (Sidewalk)
             const geo = new THREE.PlaneGeometry(d.w - 2, d.h - 2); // Shrink slightly for gaps
             // Darker, more solid color for ground
             const depthColor = new THREE.Color().setHSL(0.6, 0.3, 0.1); 
             const mat = new THREE.MeshBasicMaterial({ 
                 color: depthColor, 
                 transparent: true, 
                 opacity: 0.5, // More visible (was 0.3)
                 side: THREE.DoubleSide,
                 depthWrite: false
             });
             const mesh = new THREE.Mesh(geo, mat);
             // Center of district is d.x + d.w/2 ... wait. 
             // CityLayout returns x,y as top-left? 
             // Yes: "currentX = x... item.x = currentX"
             // And "item.w" is width.
             // Three.js PlaneGeometry is centered at 0,0.
             // So we need to position it at center of the rect.
             
             mesh.position.set(d.x + d.w/2, d.y + d.h/2, -22); // Behind buildings (Z=-22)
             districtGroup.add(mesh);
             
             // 2. Border Line (Neon curbs)
             const edges = new THREE.EdgesGeometry(geo);
             const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ 
                color: 0x4488ff, 
                transparent: true, 
                opacity: 0.6 // Much brighter (was 0.2)
             }));
             line.position.copy(mesh.position);
             districtGroup.add(line);
             
             // 3. Text Label (Floating above district)
             // Adaptive sizing: Always show but scale for top levels
             if (d.depth <= 2) { 
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 512; canvas.height = 128;
                ctx.fillStyle = 'rgba(0,0,0,0)'; // Transparent
                ctx.fillRect(0,0,512,128);
                
                // Cleaner district label
                ctx.font = '600 48px "Segoe UI", "Roboto", sans-serif'; 
                ctx.fillStyle = '#4488ff';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                ctx.shadowBlur = 6;
                
                const count = d.fileCount || 0;
                const labelText = count > 0 ? `${d.name.toUpperCase()} (${count})` : d.name.toUpperCase();
                ctx.fillText(labelText, 256, 64);
                
                const tex = new THREE.CanvasTexture(canvas);
                const labelMat = new THREE.SpriteMaterial({ map: tex, transparent: true, opacity: 0.6 });
                const label = new THREE.Sprite(labelMat);
                
                const labelScale = Math.min(d.w * 0.8, 150); 
                label.scale.set(labelScale, labelScale * 0.25, 1);
                label.position.set(d.x + d.w/2, d.y + d.h/2, -22 + 5); // Floating slightly
                districtGroup.add(label);
             }
         });
         scene3d.add(districtGroup);
         window.districtGroup3d = districtGroup;
    }
    
    // Edge Lines with Arrows - Color scheme separation
    let edgeColor = 0xffffff; // Default white
    let edgeOpacity = 0.15;
    
    if (window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
        // Functions: Warm edge colors (orange/red tint)
        edgeColor = 0xFF8C42; // Warm orange
        edgeOpacity = 0.25; // Slightly more visible
    } else if (window.currentGraphType === 'api') {
        // APIs: Cool edge colors (blue/cyan tint)
        edgeColor = 0x60A5FA; // Cool blue
        edgeOpacity = 0.2;
    }
    
    const lineMat = new THREE.LineBasicMaterial({ 
        color: edgeColor, 
        transparent: true, 
        opacity: edgeOpacity 
    });
    const edgeGeo = new THREE.BufferGeometry();
    const positions = new Float32Array(graphData.edges.length * 6);
    edgeGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    edgeLines3d = new THREE.LineSegments(edgeGeo, lineMat);
    scene3d.add(edgeLines3d);
    
    // Create arrow cones for each edge to show direction
    const arrowGroup = new THREE.Group();
    // Reduced arrow size: radius 1, height 3 (was 2, 6)
    const arrowGeometry = new THREE.ConeGeometry(1, 3, 8);
    
    // Arrow colors match edge colors
    let arrowColor = 0x00ff94; // Default mint green
    if (window.currentGraphType === 'function_dependency') {
        arrowColor = 0xFF6B35; // Warm orange-red for functions
    } else if (window.currentGraphType === 'api') {
        arrowColor = 0x3b82f6; // Cool blue for APIs
    }
    
    const arrowMaterial = new THREE.MeshBasicMaterial({ color: arrowColor, transparent: true, opacity: 0.8 });
    
    graphData.edges.forEach(edge => {
        const arrow = new THREE.Mesh(arrowGeometry, arrowMaterial);
        arrow.userData = { from: edge.from, to: edge.to };
        // Start invisible and scaled down
        arrow.scale.set(0, 0, 0);
        arrowGroup.add(arrow);
    });
    scene3d.add(arrowGroup);
    window.arrowGroup3d = arrowGroup; // Store for updates
    
    // MINIMAP REMOVED
    
    // Start Animation Loop
    console.log('[3D] Starting animation loop...');
    let time = 0;
    let frameCount = 0;
    function animate() {
        if (transitionTo2DStarted) {
            console.log('[3D] Animation stopped - transition started');
            return;
        }
        window.currentAnimationFrameId = requestAnimationFrame(animate);
        time += 16;
        frameCount++;
        
        const DURATION = 2000; // Reduced from 4s to 2s
        
        if (frameCount === 1) {
            console.log('[3D] First frame rendered');
        }
        if (frameCount % 60 === 0) {
            console.log(`[3D] Animation running... time: ${time}ms / ${DURATION}ms`);
        }
        
        if (time >= DURATION) {
            transitionTo2DStarted = true;
            console.log(`[3D] Animation complete at ${time}ms, transitioning to interactive...`);
            transitionToInteractive();
            return;
        }
        
        const progress = time / DURATION;
        const ease = 1 - Math.pow(1 - progress, 3); // Smooth ease out
        
        // ROTATION: Active from T=0 (Sims Style)
        nodes3d.forEach(node => {
             if (node.userData.rotSpeedY) {
                 node.rotation.y += node.userData.rotSpeedY;
             }
             // Ring Animation
             node.children.forEach(child => {
                 if (child.type === 'Group') {
                     child.children.forEach(gc => {
                         if (gc.userData.isRing) {
                             gc.rotation.z += gc.userData.rotSpeed;
                         }
                     });
                 }
             });
        });
        
        // Calculate final camera distance (do this once)
        if (!window.finalCameraDistanceCalculated) {
            window.finalCameraDistanceCalculated = true;
            console.log(`[3D] Using calculated camera distance: ${finalCameraDistance3D.toFixed(1)}`);
        }
        
        const centerNode = nodes3d[0];
        if (!centerNode) return;
        
        const centerU = centerNode.userData;
        const finalDistance = finalCameraDistance3D;
        
        // === UNIFIED CAMERA & NODE MOTION ===
        
        if (window.currentGraphType === 'dependency') {
            // --- 2D CITY ANIMATION (Flat Pan) ---
            // No fly-in, just simple pan to center
            
            // Calculate bounding box center
            let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
            nodes3d.forEach(n => {
                 minX = Math.min(minX, n.userData.destX);
                 maxX = Math.max(maxX, n.userData.destX);
                 minY = Math.min(minY, n.userData.destY);
                 maxY = Math.max(maxY, n.userData.destY);
            });
            const centerX = (minX + maxX) / 2;
            const centerY = (minY + maxY) / 2;
            
            camera3d.position.x = centerX * ease; // Simple pan from 0 to center
            camera3d.position.y = centerY * ease;
            camera3d.position.z = 500; // Locked height
            camera3d.lookAt(camera3d.position.x, camera3d.position.y, 0);
            
            // Nodes: Grounded
            nodes3d.forEach((mesh) => {
                const u = mesh.userData;
                mesh.position.set(u.destX, u.destY, 0); 
            });
            
        } else {
            // --- STANDARD GALAXY ZOOM (API/FUNC) ---
            // Start: Inside center node
            const startCamX = centerU.destX;
            const startCamY = centerU.destY;
            const startCamZ = centerU.origZ + 20;
            
            camera3d.position.x = startCamX + (0 - startCamX) * ease;
            camera3d.position.y = startCamY + (0 - startCamY) * ease;
            camera3d.position.z = startCamZ + (finalDistance - startCamZ) * ease;
            camera3d.lookAt(0, 0, 0);
            
            // Orbit Motion
            const orbitAmount = 1 - ease; 
            const angle = time * 0.001 * orbitAmount;
            
            nodes3d.forEach((mesh, idx) => {
                const u = mesh.userData;
                if (idx === 0) {
                    mesh.position.set(u.destX, u.destY, u.origZ * (1 - ease));
                } else {
                    const relX = u.destX - centerU.destX;
                    const relY = u.destY - centerU.destY;
                    const relZ = u.origZ - centerU.origZ;
                    
                    const cosA = Math.cos(angle);
                    const sinA = Math.sin(angle);
                    const rotX = relX * cosA - relZ * sinA;
                    const rotZ = relX * sinA + relZ * cosA;
                    
                    const orbitalX = centerU.destX + rotX;
                    const orbitalY = centerU.destY + relY;
                    const orbitalZ = centerU.origZ + rotZ;
                    
                    mesh.position.x = orbitalX + (u.destX - orbitalX) * ease;
                    mesh.position.y = orbitalY + (u.destY - orbitalY) * ease;
                    mesh.position.z = orbitalZ * (1 - ease);
                }
            });
        }
        
        // Update edges and arrows - use translator (translator -> renderer path)
        // Note: edgeData is cached in updateCachedEdgeData, but we use translator for consistency
        const edgeData = window.cachedEdgeData || [];
        const posAttr = edgeLines3d.geometry.attributes.position;
        const nodeLookup = new Map(nodes3d.map(n => [n.userData.id, n]));
        let idx = 0;
        edgeData.forEach(e => {
            const n1 = nodeLookup.get(e.from);
            const n2 = nodeLookup.get(e.to);
            if (n1 && n2) {
                posAttr.setXYZ(idx++, n1.position.x, n1.position.y, n1.position.z);
                posAttr.setXYZ(idx++, n2.position.x, n2.position.y, n2.position.z);
            }
        });
        posAttr.needsUpdate = true;
        edgeLines3d.geometry.setDrawRange(0, idx);
        
        // Update arrow positions and orientations
        // ANIMATION: "launched from the origin to the thing they're sending stuff to"
        if (window.arrowGroup3d) {
            window.arrowGroup3d.children.forEach(arrow => {
                const n1 = nodeLookup.get(arrow.userData.from);
                const n2 = nodeLookup.get(arrow.userData.to);
                if (n1 && n2) {
                    // Calculate direction vector
                    const direction = new THREE.Vector3()
                        .subVectors(n2.position, n1.position)
                        .normalize();
                    
                    // Calculate total distance
                    const totalDistance = n1.position.distanceTo(n2.position);
                    
                    // Target position (near target node)
                    // Place it 8 units before the target node (adjusted for smaller nodes)
                    const targetOffset = 8;
                    const targetPos = new THREE.Vector3(
                        n2.position.x - direction.x * targetOffset,
                        n2.position.y - direction.y * targetOffset,
                        n2.position.z - direction.z * targetOffset
                    );
                    
                    // Start position (at source node)
                    const startPos = n1.position.clone();
                    
                    // ANIMATION LOGIC:
                    // 1. Delay arrow appearance slightly (start after 20% progress)
                    // 2. Move from source to target
                    // 3. Scale up from 0 to 1
                    
                    let arrowProgress = (progress - 0.2) / 0.8; // 0 to 1 over the last 80%
                    if (arrowProgress < 0) arrowProgress = 0;
                    
                    // Smooth easing for arrow
                    const arrowEase = 1 - Math.pow(1 - arrowProgress, 2);
                    
                    // Interpolate position: Move from Source -> Target
                    const currentPos = new THREE.Vector3().lerpVectors(startPos, targetPos, arrowEase);
                    
                    arrow.position.copy(currentPos);
                    
                    // Orient arrow to point from n1 to n2
                    arrow.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction);
                    
                    // Scale up as it travels (pop effect)
                    const scale = Math.min(arrowEase * 1.5, 1); // Overshoot slightly then settle? No, just 0->1
                    arrow.scale.set(scale, scale, scale);
                    
                    // Fade in
                    arrow.material.opacity = Math.min(arrowEase * 2, 0.8);
                }
            });
        }
        
        // Update Grid Mouse Effect (Persistent)
        updateGridMouse(camera3d);
        
        // Update grid opacity based on camera distance (zoom level)
        if (window.gridMesh && window.gridMesh.material && window.gridMesh.material.uniforms) {
            const cameraDistance = camera3d.position.length();
            window.gridMesh.material.uniforms.uCameraDistance.value = cameraDistance;
        }
        
        renderer3d.render(scene3d, camera3d);
    }
    
    console.log('[3D] Calling animate() to start loop...');
    animate();
    
    window.addEventListener('resize', () => {
        if (renderer3d) {
            const aspect = window.innerWidth / window.innerHeight;
            renderer3d.setSize(window.innerWidth, window.innerHeight);
            
            // Update active camera
            if (camera3d.isOrthographicCamera) {
                const frustumSize = 300;
                camera3d.left = -frustumSize * aspect / 2;
                camera3d.right = frustumSize * aspect / 2;
                camera3d.top = frustumSize / 2;
                camera3d.bottom = -frustumSize / 2;
            } else {
                camera3d.aspect = aspect;
            }
            camera3d.updateProjectionMatrix();
        }
    });
}

// --- 3. TRANSITION TO INTERACTIVE 3D (NO 2D SWAP) ---
function transitionToInteractive() {
    console.log('[3D] Animation complete, enabling interaction...');
    
    // Pop out labels with a nice fade-in effect
    nodes3d.forEach((mesh, idx) => {
        if (mesh.userData.labelSprite) {
            setTimeout(() => {
                // Fade in label over 300ms
                const startTime = Date.now();
                const fadeIn = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / 300, 1);
                    mesh.userData.labelSprite.material.opacity = progress;
                    if (progress < 1) {
                        requestAnimationFrame(fadeIn);
                    }
                };
                fadeIn();
            }, idx * 50); // Stagger labels for nice effect
        }
    });
    
    // Enable pointer events on 3D canvas
    const canvas3dContainer = document.getElementById('canvas-3d');
    if (!canvas3dContainer) {
        console.error('[3D] Cannot find canvas-3d container for interaction!');
        return;
    }
    
    canvas3dContainer.classList.add('interactive');
    canvas3dContainer.style.pointerEvents = 'auto';
    console.log('[3D] Pointer events enabled on canvas container');
    console.log('[3D] Container style:', window.getComputedStyle(canvas3dContainer).pointerEvents);
    console.log('[3D] Container z-index:', window.getComputedStyle(canvas3dContainer).zIndex);
    
    // Get the actual canvas element from the renderer
    const canvas = renderer3d.domElement;
    console.log('[3D] Canvas element:', canvas);
    console.log('[3D] Canvas parent:', canvas.parentElement);
    console.log('[3D] Canvas style:', window.getComputedStyle(canvas).pointerEvents);
    
    // Test if canvas is clickable
    canvas.style.cursor = 'grab';
    console.log('[3D] Set cursor to grab');
    
    // Add orbit controls for interaction + node dragging
    let isDragging = false;
    let isDraggingNode = false;
    let selectedNode = null;
    let previousMousePosition = { x: 0, y: 0 };
    
    // Raycaster for node selection
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    
    function getIntersectedNode(clientX, clientY) {
        // Convert mouse position to normalized device coordinates (-1 to +1)
        const rect = canvas.getBoundingClientRect();
        mouse.x = ((clientX - rect.left) / rect.width) * 2 - 1;
        mouse.y = -((clientY - rect.top) / rect.height) * 2 + 1;
        
        // Update raycaster
        raycaster.setFromCamera(mouse, camera3d);
        
        // Check intersections with nodes
        const intersects = raycaster.intersectObjects(nodes3d);
        return intersects.length > 0 ? intersects[0].object : null;
    }
    
    // Mouse down logic for dragging
    canvas.addEventListener('mousedown', (e) => {
        e.preventDefault(); // Prevent default selection
        
        // Get intersected node
        const node = getIntersectedNode(e.clientX, e.clientY);
        
        if (node) {
            // Start dragging node
            isDraggingNode = true;
            selectedNode = node;
            canvas.style.cursor = 'grabbing';
            console.log('[3D] Started dragging node:', node.userData.id);
        } else {
            // Start panning camera
            isDragging = true;
            canvas.style.cursor = 'move';
            console.log('[3D] Started panning camera');
        }
        
        previousMousePosition = { x: e.clientX, y: e.clientY };
    });

    // Mouse up logic to handle clicks vs drags
    canvas.addEventListener('mouseup', (e) => {
        const deltaX = Math.abs(e.clientX - previousMousePosition.x);
        const deltaY = Math.abs(e.clientY - previousMousePosition.y);
        const moveThreshold = 5; // pixels
        
        // Stop dragging
        isDragging = false;
        isDraggingNode = false;
        selectedNode = null;
        canvas.style.cursor = 'grab';
        
        // Check if it was a click (minimal movement)
        if (deltaX < moveThreshold && deltaY < moveThreshold) {
            const node = getIntersectedNode(e.clientX, e.clientY);
            if (node) {
                console.log('[3D] Node clicked:', node.userData.id);
                
                // Get full node data from translator
                const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api', false);
                const fullNodeData = graphData.nodes.find(n => n.id === node.userData.id);
                
                if (fullNodeData && typeof showNodeInfo === 'function') {
                    showNodeInfo(fullNodeData);
                } else {
                    console.warn('[3D] Could not find full data for node:', node.userData.id);
                }
            }
        }
    });
    
    // Double Click for Code Overlay
    canvas.addEventListener('dblclick', (e) => {
        const node = getIntersectedNode(e.clientX, e.clientY);
        if (node) {
            console.log('[3D] Node double clicked:', node.userData.id);
            const modal = document.getElementById('code-overlay');
            if (modal) {
                // Get full data
                const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api', false);
                const data = graphData.nodes.find(n => n.id === node.userData.id);
                
                if (data) {
                    document.getElementById('code-title').textContent = data.label || data.id;
                    
                    let metaHTML = '';
                    if (data.method) metaHTML += `<span style="margin-right:15px">METHOD: ${data.method}</span>`;
                    if (data.function_count !== undefined) metaHTML += `<span style="margin-right:15px">FUNCS: ${data.function_count}</span>`;
                    if (data.import_count !== undefined) metaHTML += `<span>IMPORTS: ${data.import_count}</span>`;
                    document.getElementById('code-meta').innerHTML = metaHTML;
                    
                    // Populate Code Content
                    const codeEl = document.getElementById('code-content');
                    if (data.content) {
                        codeEl.textContent = data.content;
                    } else {
                        codeEl.textContent = "# Source code not available (File not found or not embedded)";
                    }
                    
                    modal.classList.add('active');
                }
            }
        }
    });
    
    canvas.addEventListener('mousemove', (e) => {
        const deltaX = e.clientX - previousMousePosition.x;
        const deltaY = e.clientY - previousMousePosition.y;
        
        if (isDraggingNode && selectedNode) {
            // ... (Node dragging code remains same) ...
            // Raycast to find where mouse intersects the Z=0 plane
            const rect = canvas.getBoundingClientRect();
            mouse.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera3d);
            
            // Create a plane at Z=0 (where all nodes are)
            const plane = new THREE.Plane(new THREE.Vector3(0, 0, 1), 0);
            const intersectPoint = new THREE.Vector3();
            
            // Find where ray intersects the Z=0 plane
            raycaster.ray.intersectPlane(plane, intersectPoint);
            
            if (intersectPoint) {
                // Move node to intersection point (keeping Z=0)
                selectedNode.position.x = intersectPoint.x;
                selectedNode.position.y = intersectPoint.y;
                selectedNode.position.z = 0; // Keep at Z=0
                
                // Update userData
                selectedNode.userData.destX = intersectPoint.x;
                selectedNode.userData.destY = intersectPoint.y;
            }
        } else if (isDragging) {
            // Pan camera - move in XY plane
            
            if (camera3d.isOrthographicCamera) {
                 // ORTHOGRAPHIC PANNING (2D)
                 // In Ortho mode, zoom affects how much world space corresponds to screen pixels
                 // camera3d.zoom is the scale factor. 
                 // Higher zoom = smaller world area = slower movement needed?
                 // Actually, moving 1 pixel on screen = 1/zoom units in world
                 
                 const panSpeed = 1 / camera3d.zoom;
                 
                 camera3d.position.x -= deltaX * panSpeed;
                 camera3d.position.y += deltaY * panSpeed;
                 
            } else {
                 // PERSPECTIVE PANNING (3D)
                // Calculate pan speed based on distance from plane
                const distance = camera3d.position.z;
                const panSpeed = distance * 0.001; // Scale with distance
                
                camera3d.position.x -= deltaX * panSpeed;
                camera3d.position.y += deltaY * panSpeed;
            }
        }
        
        previousMousePosition = { x: e.clientX, y: e.clientY };
    });
    
    canvas.addEventListener('mouseup', () => {
        isDragging = false;
        isDraggingNode = false;
        selectedNode = null;
        canvas.style.cursor = 'grab';
        console.log('[3D] Mouse up - dragging stopped');
    });
    
    canvas.addEventListener('mouseleave', () => {
        isDragging = false;
        isDraggingNode = false;
        selectedNode = null;
        console.log('[3D] Mouse left canvas');
    });
    
    // Create Tooltip Element
    const tooltip = document.createElement('div');
    tooltip.id = 'tooltip-3d';
    tooltip.style.position = 'absolute';
    tooltip.style.pointerEvents = 'none';
    tooltip.style.display = 'none';
    tooltip.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
    tooltip.style.color = '#fff';
    tooltip.style.padding = '12px';
    tooltip.style.borderRadius = '6px';
    tooltip.style.border = '1px solid #4488ff';
    tooltip.style.fontFamily = 'monospace';
    tooltip.style.fontSize = '12px';
    tooltip.style.zIndex = '100';
    tooltip.style.maxWidth = '300px';
    tooltip.style.boxShadow = '0 4px 20px rgba(0,0,0,0.5)';
    document.body.appendChild(tooltip);

    // Hover effect - change cursor when over a node
    // Global hover state
    let hoveredNode = null;
    
    canvas.addEventListener('mousemove', (e) => {
        // Tooltip positioning
        if (hoveredNode) {
            tooltip.style.left = (e.clientX + 15) + 'px';
            tooltip.style.top = (e.clientY + 15) + 'px';
        }
    
        if (!isDragging && !isDraggingNode) {
            const node = getIntersectedNode(e.clientX, e.clientY);
            canvas.style.cursor = node ? 'pointer' : 'grab';
            
            // Handle Hover Interactions
            if (node !== hoveredNode) {
                // Unhover old
                if (hoveredNode) {
                     hoveredNode.scale.set(1, 1, 1);
                     tooltip.style.display = 'none';
                }
                
                hoveredNode = node;
                
                // Hover new
                if (hoveredNode) {
                     // Show Tooltip
                     tooltip.style.display = 'block';
                     const id = hoveredNode.userData.id;
                     
                     // Fetch data
                     const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api', false);
                     const data = graphData.nodes.find(n => n.id === id);
                     
                     if (data) {
                         let html = `<strong style="font-size:14px; color:#4488ff">${data.label || data.id}</strong><br/>`;
                         html += `<div style="margin-top:5px; border-top:1px solid #333; padding-top:5px">`;
                         
                        // Custom fields based on type
                        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
                             const complexity = (data.function_count || 0) + (data.endpoint_count || 0);
                             
                             // RISK ASSESSMENT
                             let risk = 'LOW';
                             let riskColor = '#00ff00';
                             if (complexity > 50) { risk = 'MEDIUM'; riskColor = '#ffff00'; }
                             if (complexity > 150) { risk = 'HIGH'; riskColor = '#ff0000'; }
                             
                             html += `<div style="margin-top:8px; padding-top:8px; border-top:1px solid #333;">`;
                             html += `<strong>RISK:</strong> <span style="color:${riskColor}">${risk}</span><br/>`;
                             html += `Complexity: ${complexity.toFixed(0)}<br/>`;
                             
                             // ACTIONABLE SUGGESTIONS
                             if (complexity > 100) {
                                 const filename = data.id.split('/').pop();
                                 const coreName = filename.replace(/\.[^/.]+$/, "_core$&");
                                 const utilsName = filename.replace(/\.[^/.]+$/, "_utils$&");
                                 html += `<em style="color:#888; display:block; margin-top:5px">üí° Split into:</em>`;
                                 html += `<span style="color:#4488ff; display:block; margin-left:10px">‚Ä¢ ${coreName}</span>`;
                                 html += `<span style="color:#4488ff; display:block; margin-left:10px">‚Ä¢ ${utilsName}</span>`;
                             }
                             
                             if ((data.import_count === 0) && (data.incoming_edges === 0)) { // Check orphans
                                 html += `<em style="color:#ff8800; display:block; margin-top:5px">‚ö†Ô∏è Unused file - consider removing</em>`;
                             }
                             
                             html += `</div>`;
                         } else if (window.currentGraphType === 'api' || window.currentGraphType === 'functions' || window.currentGraphType === 'function_dependency') {
                             // API or Functions view - show method, path/url, and file
                             const method = (data.method || 'UNKNOWN').toUpperCase();
                             const path = data.path || data.url || 'unknown';
                             const file = data.file || data.file_path || 'unknown';
                             const line = data.line || '?';
                             
                             // Extract just filename from full path for cleaner display
                             const fileName = file !== 'unknown' ? file.split(/[/\\]/).pop() : 'unknown';
                             
                             html += `<div style="margin-top:5px;">`;
                             html += `<strong>Method:</strong> ${method}<br/>`;
                             html += `<strong>Path:</strong> ${path.length > 30 ? path.substring(0, 27) + '...' : path}<br/>`;
                             html += `<strong>File:</strong> ${fileName}<br/>`;
                             if (line !== '?' && line !== 0) {
                                 html += `<strong>Line:</strong> ${line}<br/>`;
                             }
                             html += `</div>`;
                         } else {
                             // Generic
                             html += `Type: ${data.type || 'Unknown'}`;
                             // Try to show file if available
                             const file = data.file || data.file_path;
                             if (file) {
                                 const fileName = file.split(/[/\\]/).pop();
                                 html += `<br/><strong>File:</strong> ${fileName}`;
                             }
                         }
                         
                         html += `</div>`;
                         tooltip.innerHTML = html;
                     } else {
                         tooltip.innerHTML = `<strong>${id}</strong>`;
                     }
                }
            }
        }
    });
    
    canvas.addEventListener('wheel', (e) => {
        e.preventDefault();
        
        if (camera3d.isOrthographicCamera) {
            // ORTHOGRAPHIC ZOOM (2D)
            // Change zoom property directly
            const zoomSpeed = 0.001;
            camera3d.zoom -= e.deltaY * zoomSpeed;
            camera3d.zoom = Math.max(0.1, Math.min(camera3d.zoom, 5)); // Clamp zoom
            camera3d.updateProjectionMatrix();
            console.log('[3D] Ortho Zoom:', camera3d.zoom.toFixed(2));
        } else {
            // PERSPECTIVE ZOOM (3D)
            // Zoom by moving camera Z
            const zoomSpeed = 0.5;
            camera3d.position.z += e.deltaY * zoomSpeed;
            camera3d.position.z = Math.max(100, Math.min(camera3d.position.z, 2000));
            console.log('[3D] Persp Zoom:', camera3d.position.z.toFixed(1));
        }
    }, { passive: false });
    
    // Continue rendering for interaction with physics
    function renderInteractive() {
        window.currentRenderFrameId = requestAnimationFrame(renderInteractive);
        
        // Update Grid Mouse Effect (Persistent)
        updateGridMouse(camera3d);
        
        // Update grid opacity based on camera distance (zoom level)
        if (window.gridMesh && window.gridMesh.material && window.gridMesh.material.uniforms) {
            const cameraDistance = camera3d.position.length();
            window.gridMesh.material.uniforms.uCameraDistance.value = cameraDistance;
        }
        
        // Get current edge data directly from translator (no caching - simple approach)
        const graphData = window.GraphDataTranslator.translate(window.currentGraphType || 'api');
        const edgeData = graphData.edges || [];
        
        // Physics simulation (only for nodes not being dragged)
        const k = 80; // Spring constant (reduced)
        const damping = 0.9; // Higher damping to slow things down
        const repulsionStrength = 0.5; // Much weaker repulsion
        const attractionStrength = 0.3; // Weaker attraction
        
        nodes3d.forEach(node => {
            // Skip physics for the node being dragged
            if (node === selectedNode) return;
            
            // DISABLE PHYSICS FOR FILES (Code Metropolis)
            // Cities don't move!
            if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
                 return; 
            }
            
            // ROTATION: Sims Style - Single Axis (Y)
            if (node.userData.rotSpeedY) {
                node.rotation.y += node.userData.rotSpeedY;
                // No X/Z rotation for Sims style
            }
            
            // Initialize velocity if not exists
            if (!node.userData.vx) node.userData.vx = 0;
            if (!node.userData.vy) node.userData.vy = 0;
            
            let fx = 0, fy = 0;
            
            // BOBBING: Sims Style (Disable for City Buildings)
            if (window.currentGraphType !== 'dependency') {
                const time = Date.now() * 0.002;
                const phase = node.userData.id.length || 0; 
                const bobForce = Math.cos(time + phase) * 0.5; 
                fy += bobForce;
            }
            
            // CENTRAL GRAVITY: Pull everything to center to prevent scattering
            // This fixes the "1-to-1 connection drift" issue
            const gravity = 0.01;
            fx -= node.position.x * gravity;
            fy -= node.position.y * gravity;
            
            // Repulsion from all other nodes (much weaker)
            nodes3d.forEach(other => {
                if (node === other) return;
                
                const dx = node.position.x - other.position.x;
                const dy = node.position.y - other.position.y;
                const dist = Math.sqrt(dx * dx + dy * dy) || 0.1;
                
                // Gentle repulsion
                const force = (k * k) / (dist * dist);
                fx += (dx / dist) * force * repulsionStrength;
                fy += (dy / dist) * force * repulsionStrength;
            });
            
            // Attraction along edges (spring force)
            edgeData.forEach(edge => {
                let other = null;
                if (edge.from === node.userData.id) {
                    other = nodes3d.find(n => n.userData.id === edge.to);
                } else if (edge.to === node.userData.id) {
                    other = nodes3d.find(n => n.userData.id === edge.from);
                }
                
                if (other) {
                    const dx = node.position.x - other.position.x;
                    const dy = node.position.y - other.position.y;
                    const dist = Math.sqrt(dx * dx + dy * dy) || 0.1;
                    
                    // Spring force (Hooke's law) - weaker
                    const force = (dist * dist) / k;
                    fx -= (dx / dist) * force * attractionStrength;
                    fy -= (dy / dist) * force * attractionStrength;
                }
            });
            
            // Cap maximum force to prevent explosions
            const maxForce = 50;
            const forceMag = Math.sqrt(fx * fx + fy * fy);
            if (forceMag > maxForce) {
                fx = (fx / forceMag) * maxForce;
                fy = (fy / forceMag) * maxForce;
            }
            
            // Update velocity with much smaller timestep
            node.userData.vx += fx * 0.001;
            node.userData.vy += fy * 0.001;
            
            // Apply damping
            node.userData.vx *= damping;
            node.userData.vy *= damping;
            
            // Cap maximum velocity
            const maxVel = 2;
            const velMag = Math.sqrt(node.userData.vx * node.userData.vx + node.userData.vy * node.userData.vy);
            if (velMag > maxVel) {
                node.userData.vx = (node.userData.vx / velMag) * maxVel;
                node.userData.vy = (node.userData.vy / velMag) * maxVel;
            }
            
            // Update position
            node.position.x += node.userData.vx;
            node.position.y += node.userData.vy;
            
            // Update userData
            node.userData.destX = node.position.x;
            node.userData.destY = node.position.y;
        });
        
        // LABELS ARE FIXED BELOW NODES - No physics, just maintain fixed position
        // Labels stay at fixed distance below their nodes, no repulsion needed
        
        // ANIMATE BEACONS (Pulsing)
        if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
            const time = Date.now() * 0.005;
            nodes3d.forEach(node => {
                // Find children that are beacons
                node.children.forEach(child => {
                    if (child.userData && child.userData.isBeacon) {
                        const scale = 1 + Math.sin(time + child.userData.phase) * 0.3;
                        child.scale.set(scale, scale, scale);
                        child.material.opacity = 0.5 + Math.sin(time + child.userData.phase) * 0.5;
                    }
                });
                
                // HOVER BREATHING (Micro-interaction)
                if (node === hoveredNode) {
                     const breath = 1.0 + Math.sin(time * 2) * 0.05; // +/- 5% scale
                     node.scale.set(breath, breath, breath);
                } else {
                     // Reset scale smoothly? or just snap back
                     if (node.scale.x !== 1 && !node.userData.isAnimating) {
                         node.scale.set(1, 1, 1);
                     }
                }
            });
        }
        
        // Update edges and arrows every frame
        const posAttr = edgeLines3d.geometry.attributes.position;
        const nodeLookup = new Map(nodes3d.map(n => [n.userData.id, n]));
        
        let idx = 0;
        edgeData.forEach(e => {
            const n1 = nodeLookup.get(e.from);
            const n2 = nodeLookup.get(e.to);
            if (n1 && n2) {
                posAttr.setXYZ(idx++, n1.position.x, n1.position.y, n1.position.z);
                posAttr.setXYZ(idx++, n2.position.x, n2.position.y, n2.position.z);
            }
        });
        posAttr.needsUpdate = true;
        edgeLines3d.geometry.setDrawRange(0, idx);
        
        // Update arrow positions and orientations
        if (window.arrowGroup3d) {
            window.arrowGroup3d.children.forEach(arrow => {
                const n1 = nodeLookup.get(arrow.userData.from);
                const n2 = nodeLookup.get(arrow.userData.to);
                if (n1 && n2) {
                    // Calculate direction vector
                    const direction = new THREE.Vector3()
                        .subVectors(n2.position, n1.position)
                        .normalize();
                    
                    // Position arrow near the END (target node)
                    const arrowDistance = 10;
                    arrow.position.set(
                        n2.position.x - direction.x * arrowDistance,
                        n2.position.y - direction.y * arrowDistance,
                        n2.position.z - direction.z * arrowDistance
                    );
                    
                    // Orient arrow to point from n1 to n2
                    arrow.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), direction);
                }
            });
        }
        
        renderer3d.render(scene3d, camera3d);
        
        // Minimap render REMOVED
    }
    // Start the interactive render loop
    renderInteractive();
    
    console.log('[3D] Interactive mode enabled - drag to pan, scroll to zoom');
}

// --- GRAPH SWITCHING FUNCTION ---
// Simple approach: destroy old graph completely, create new one from scratch
// No caching, no reuse - just destroy and rebuild
// This function is called when user clicks API/DEPENDENCIES/FILES buttons
// It uses the translator to get the correct graph data for that type and renders it
window.currentGraphType = 'api';
window.currentAnimationFrameId = null; // Track animation loop to stop it
window.currentRenderFrameId = null; // Track render loop to stop it
window.isSwitching = false; // Flag to prevent multiple simultaneous switches

function switchGraph3D(graphType) {
    console.log(`[SWITCH] Button clicked: Switching to ${graphType}`);
    console.log(`[SWITCH] Getting data from translator for type: ${graphType}`);
    
    if (graphType === window.currentGraphType) {
        console.log(`[SWITCH] Already showing ${graphType} - skipping`);
        return;
    }
    
    // Prevent multiple simultaneous switches
    if (window.isSwitching) {
        console.log(`[SWITCH] Already switching, ignoring duplicate call`);
        return;
    }
    window.isSwitching = true;
    
    const oldGraphType = window.currentGraphType; // Capture old type for revert

    
    // Stop ALL running animation loops immediately
    if (window.currentAnimationFrameId !== null) {
        cancelAnimationFrame(window.currentAnimationFrameId);
        window.currentAnimationFrameId = null;
        console.log('[SWITCH] Stopped animation loop');
    }
    
    if (window.currentRenderFrameId !== null) {
        cancelAnimationFrame(window.currentRenderFrameId);
        window.currentRenderFrameId = null;
        console.log('[SWITCH] Stopped render loop');
    }
    
    // Stop transition flag to prevent animation from continuing
    if (typeof transitionTo2DStarted !== 'undefined') {
        transitionTo2DStarted = true; // Stop any ongoing animation
    }
    
    // Update current graph type
    window.currentGraphType = graphType;
    
    // Clear translator cache to force fresh translation
    if (window.GraphDataTranslator) {
        window.GraphDataTranslator.clearCache();
    }
    
    // Completely destroy old 3D scene and all resources
    console.log('[SWITCH] Destroying old 3D scene...');
    if (scene3d) {
        // Remove all nodes and dispose resources
        const nodeCount = nodes3d.length;
        nodes3d.forEach((node, idx) => {
            if (node.userData && node.userData.labelSprite) {
                scene3d.remove(node.userData.labelSprite);
                if (node.userData.labelSprite.material) {
                    node.userData.labelSprite.material.dispose();
                }
            }
            if (node.geometry) node.geometry.dispose();
            if (node.material) {
                if (Array.isArray(node.material)) {
                    node.material.forEach(mat => mat.dispose());
                } else {
                    node.material.dispose();
                }
            }
            scene3d.remove(node);
        });
        nodes3d = [];
        console.log(`[SWITCH] Removed ${nodeCount} nodes`);
        
        // Remove edge lines
        if (edgeLines3d) {
            if (edgeLines3d.geometry) edgeLines3d.geometry.dispose();
            if (edgeLines3d.material) edgeLines3d.material.dispose();
            scene3d.remove(edgeLines3d);
            edgeLines3d = null;
            console.log('[SWITCH] Removed edge lines');
        }
        
        // Remove arrows
        if (window.arrowGroup3d) {
            const arrowCount = window.arrowGroup3d.children.length;
            window.arrowGroup3d.children.forEach(arrow => {
                if (arrow.geometry) arrow.geometry.dispose();
                if (arrow.material) arrow.material.dispose();
            });
            scene3d.remove(window.arrowGroup3d);
            window.arrowGroup3d = null;
            console.log(`[SWITCH] Removed ${arrowCount} arrows`);
        }
        
        // Remove Districts
        if (window.districtGroup3d) {
            const dCount = window.districtGroup3d.children.length;
            window.districtGroup3d.children.forEach(child => {
                if (child.geometry) child.geometry.dispose();
                if (child.material) {
                    if (Array.isArray(child.material)) child.material.forEach(m => m.dispose());
                    else child.material.dispose();
                }
            });
            scene3d.remove(window.districtGroup3d);
            window.districtGroup3d = null;
            console.log(`[SWITCH] Removed ${dCount} district elements`);
        }
    }
    
    // Cleanup Minimap REMOVED

    // Dispose renderer and clear canvas - MUST be done before creating new one
    if (typeof renderer3d !== 'undefined' && renderer3d) {
        const container = document.getElementById('canvas-3d');
        if (container && renderer3d.domElement && renderer3d.domElement.parentNode === container) {
            container.removeChild(renderer3d.domElement);
            console.log('[SWITCH] Removed renderer canvas from DOM');
        }
        renderer3d.dispose();
        renderer3d = null;
        console.log('[SWITCH] Disposed renderer');
    }
    
    // Clear scene completely
    if (typeof scene3d !== 'undefined' && scene3d) {
        while(scene3d.children.length > 0) {
            const child = scene3d.children[0];
            scene3d.remove(child);
            // Dispose geometries and materials
            if (child.geometry) child.geometry.dispose();
            if (child.material) {
                if (Array.isArray(child.material)) {
                    child.material.forEach(mat => mat.dispose());
                } else {
                    child.material.dispose();
                }
            }
        }
        scene3d = null;
        console.log('[SWITCH] Cleared scene completely');
    }
    
    // Reset all 3D variables to ensure clean state
    nodes3d = [];
    edgeLines3d = null;
    window.arrowGroup3d = null;
    window.districtGroup3d = null;
    final2DPositions = new Map();
    transitionTo2DStarted = false;
    
    // CRITICAL: Set currentGraphType BEFORE calling init3DView
    // init3DView() uses window.currentGraphType to get data from translator
    window.currentGraphType = graphType;
    
    // Toggle Filter Context UI
    document.querySelectorAll('.filter-context').forEach(el => el.style.display = 'none');
    const filterId = (graphType === 'functions' || graphType === 'function_dependency') ? 'filter-context-functions' : `filter-context-${graphType}`;
    const filterContext = document.getElementById(filterId);
    if (filterContext) filterContext.style.display = 'block';
    
    // GRID VISIBILITY: Hide grid in City View (Disorienting in Ortho)
    if (window.gridMesh) {
        window.gridMesh.visible = (graphType !== 'dependency');
    }
    
    // Update UI Button visibility
    const camBtn = document.getElementById('btn-cam');
    const lensBtn = document.getElementById('btn-lens');
    
    if (camBtn) {
        camBtn.style.display = (graphType === 'files' || graphType === 'dependency') ? 'inline-block' : 'none';
        if (camera3d.isOrthographicCamera) {
            camBtn.textContent = 'üìê CAM: ORTHO';
        } else {
            camBtn.textContent = 'üé• CAM: PERSP';
        }
    }
    
    if (lensBtn) {
        lensBtn.style.display = (graphType === 'files' || graphType === 'dependency') ? 'inline-block' : 'none';
    }
    
    console.log(`[SWITCH] Set window.currentGraphType to: ${graphType}`);
    
    // Verify translator has data for this type
    const testData = window.GraphDataTranslator.translate(graphType, true);
    console.log(`[SWITCH] Translator test: ${testData.nodes.length} balls, ${testData.edges.length} lines for ${graphType}`);
    
    if (testData.nodes.length === 0) {
        console.warn(`[SWITCH] No data available for ${graphType}`);
        
        // Show user-friendly message based on graph type
        let message = '';
        if (graphType === 'functions' || graphType === 'function_dependency') {
            message = 'No function data available. This view requires function calls and definitions to be detected in your codebase.';
        } else if (graphType === 'files' || graphType === 'dependency') {
            message = 'No file data available. This view requires import statements to be detected.';
        } else {
            message = `No ${graphType} data available in this report.`;
        }
        
        if (typeof showToast === 'function') {
            showToast(message);
        } else {
            alert(message);
        }
        window.currentGraphType = oldGraphType; // Revert type
        window.isSwitching = false;
        return;
    }
    
    // Create completely new 3D graph from scratch
    // init3DView() will use window.currentGraphType to get the correct data
    console.log(`[SWITCH] Calling init3DView() for ${graphType}...`);
    init3DView();
    
    // UPDATE STATS
    updateGraphStats();
    
    // Reset switching flag
    window.isSwitching = false;
    console.log('[SWITCH] Switch complete');
}

function updateGraphStats() {
    const graphData = window.GraphDataTranslator.translate(window.currentGraphType, false);
    
    // Project name
    if (graphData.report && graphData.report.project) {
        const projName = graphData.report.project.name || 'Unknown Project';
        const projEl = document.getElementById('project-name');
        if (projEl) projEl.textContent = projName;
    }
    
    // Node/Edge counts
    const nodeEl = document.getElementById('node-count');
    const edgeEl = document.getElementById('edge-count');
    if (nodeEl) nodeEl.textContent = graphData.nodes.length;
    if (edgeEl) edgeEl.textContent = graphData.edges.length;
    
    // High impact / Orphans
    const impactEl = document.getElementById('high-impact-count');
    const orphanEl = document.getElementById('orphaned-count');
    if (impactEl) impactEl.textContent = graphData.summary.high_impact || 0;
    if (orphanEl) orphanEl.textContent = graphData.summary.orphaned || 0;
}

window.resetView = function() {
    console.log('[3D] Resetting view...');
    if (window.currentGraphType === 'files' || window.currentGraphType === 'dependency') {
        // City View
        const dist = 200;
        // Use Orthographic or Perspective depending on current state? 
        // User didn't ask to switch camera mode, just reset position.
        // But init3DView sets it to dist, -dist, dist.
        camera3d.position.set(dist, -dist, dist);
        camera3d.lookAt(0,0,0);
        camera3d.zoom = 1;
        camera3d.updateProjectionMatrix();
    } else {
        // Galaxy View
        camera3d.position.set(0, 0, 1000); // Standard distance
        camera3d.lookAt(0, 0, 0);
        camera3d.zoom = 1;
        camera3d.updateProjectionMatrix();
    }
};

// Toggle Info Panel
window.toggleInfoPanel = function() {
    const panel = document.getElementById('info-panel');
    const toggle = document.getElementById('panel-toggle');
    
    if (panel && toggle) {
        panel.classList.toggle('hidden');
        if (panel.classList.contains('hidden')) {
            toggle.classList.add('visible');
        } else {
            toggle.classList.remove('visible');
        }
    }
};

// --- UI FUNCTIONS ---
window.toggleReportModal = function(e) {
    if (e && e.target !== e.currentTarget && e.target.id !== 'nav-report') return; 
    const modal = document.getElementById('report-modal');
    if (modal) {
        modal.classList.toggle('active');
        if (modal.classList.contains('active')) {
            // Populate JSON
            const report = window.embeddedGraphData ? window.embeddedGraphData.report : { error: 'No report data' };
            const jsonElem = document.getElementById('report-json');
            if (jsonElem) jsonElem.textContent = JSON.stringify(report, null, 2);
        }
    }
};

window.copyReport = function() {
    const jsonElem = document.getElementById('report-json');
    if (jsonElem) {
        navigator.clipboard.writeText(jsonElem.textContent).then(() => alert('Report copied to clipboard!'));
    }
};

window.closeCodeOverlay = function(e) {
    if (e && e.target !== e.currentTarget && !e.target.classList.contains('close-btn')) return;
    const modal = document.getElementById('code-overlay');
    if (modal) modal.classList.remove('active');
};

window.toggleFilterMenu = function() {
    const menu = document.getElementById('filter-menu');
    if (menu) menu.classList.toggle('active');
};

window.filterNodes = function(query) {
    // 3D Node Filtering
    query = query.toLowerCase();
    if (!window.nodes3d) return;
    
    window.nodes3d.forEach(node => {
        const id = (node.userData.id || '').toLowerCase();
        const visible = id.includes(query);
        node.visible = visible;
        // Also hide label/sprite if exists
        if (node.userData.labelSprite) node.userData.labelSprite.visible = visible;
    });
};

// Mouse Grid Effect
window.mouseX = 0; window.mouseY = 0;
document.addEventListener('mousemove', (e) => {
    window.mouseX = e.clientX;
    window.mouseY = e.clientY;
    document.body.style.setProperty('--mouse-x', e.clientX + 'px');
    document.body.style.setProperty('--mouse-y', e.clientY + 'px');
});

window.updateFilters = function(category, value) {
   // Toggle filter state
   if (!window.activeFilters[category]) window.activeFilters[category] = new Set();
   const set = window.activeFilters[category];
   if (set.has(value)) set.delete(value);
   else set.add(value);
   
   console.log('Active Filters:', window.activeFilters);
   // Trigger visibility update (implementation pending complexity)
   // For now, we just track state.
};

// --- LENS MODE TOGGLE ---
window.lensMode = 'default'; // default, debt, ownership, danger

window.toggleLensMode = function() {
    if (window.currentGraphType !== 'dependency') return;
    
    const modes = ['default', 'debt', 'ownership', 'danger'];
    let idx = modes.indexOf(window.lensMode);
    window.lensMode = modes[(idx + 1) % modes.length];
    
    console.log(`[LENS] Switched to ${window.lensMode}`);
    
    const btn = document.getElementById('btn-lens');
    if(btn) btn.textContent = `üîç LENS: ${window.lensMode.toUpperCase()}`;
    
    // Re-apply colors to all nodes
    if(window.nodes3d) {
         window.nodes3d.forEach(node => {
              const data = window.GraphDataTranslator.translate('dependency', false).nodes.find(n => n.id === node.userData.id);
              if(data) {
                   // Logic for different lenses
                   let color = new THREE.Color(0x00F0FF); // Default
                   
                   if (window.lensMode === 'default') {
                       // Original logic: Type based
                       // We need to re-parse the hex color from somewhere? 
                       // Ideally store original color in userData
                       // For now, simplistic fallback:
                       if (data.id.endsWith('.py')) color.setHex(0x00F0FF);
                       else if (data.id.endsWith('.js')) color.setHex(0xFFE600);
                       else color.setHex(0x6b7280);
                   } else if (window.lensMode === 'debt') {
                       // Complexity Gradient (Green -> Red)
                       const complexity = (data.function_count || 0) + (data.endpoint_count || 0);
                       // Map 0-100 to Green-Red
                       const t = Math.min(1, complexity / 100);
                       color.setHSL(0.33 * (1 - t), 1.0, 0.5); 
                   } else if (window.lensMode === 'ownership') {
                       // Random color per "owner" (mocked)
                       // Hash the ID to pick a color?
                       const hash = data.id.length * 123; 
                       color.setHSL((hash % 360) / 360, 0.8, 0.5);
                   } else if (window.lensMode === 'danger') {
                       // High Complexity + Low Tests (Mocked)
                       // If complex, turn RED. Else Grey.
                       const complexity = (data.function_count || 0);
                       if (complexity > 50) color.setHex(0xFF0000); // DANGER
                       else color.setHex(0x333333); // Safe
                   }
                   
                   // Apply color to material
                   if(node.material) {
                       node.material.color = color;
                       node.material.emissive = color;
                       // Emissive intensity might need adjustment too
                   }
              }
         });
    }
};

// Make switchGraph3D available globally so button clicks can call it
// This avoids naming conflicts with the template's switchGraph function
window.switchGraph3D = switchGraph3D;


        // Initialize console
        addLogEntry('Graph system initializing...');
        
        // 3D intro code (init3DView, build3DGraph, transitionTo2D) will be injected here by html_generator.py
        
        // Legend data with v2.0 colors
        
        const apiLegend = [
            {color: '#3b82f6', label: 'GET', desc: 'Retrieves data from the server. Safe and idempotent.'},
            {color: '#00FF94', label: 'POST', desc: 'Submits data to be processed. Creates new resources.'},
            {color: '#FFE600', label: 'PUT', desc: 'Updates a resource or creates it if missing. Idempotent.'},
            {color: '#00F0FF', label: 'PATCH', desc: 'Partially updates a resource.'},
            {color: '#FF003C', label: 'DELETE', desc: 'Removes a resource.'},
            {color: '#BC13FE', label: 'HIGH IMPACT', desc: 'Critical API endpoints with high connectivity or central importance.'},
            {color: '#374151', label: 'UNUSED', desc: 'Endpoints that are defined but have no detected internal calls.'},
            {color: '#6b7280', label: 'UNKNOWN', desc: 'Method type could not be determined statically.'}
        ];
    
        
        
        const funcDepLegend = [
            {color: '#7c3aed', label: 'FUNCTION', desc: 'A function definition found in the codebase.'},
            {color: '#FFE600', label: 'CALLER', desc: 'A function that actively calls other functions.'},
            {color: '#00F0FF', label: 'EXTERNAL', desc: 'External library function or system API call.'},
            {color: '#BC13FE', label: 'HIGH IMPACT', desc: 'Core functions that are heavily used across the project.'},
            {color: '#374151', label: 'UNUSED', desc: 'Functions that are never called internally.'},
            {color: '#6b7280', label: 'UNKNOWN', desc: 'Function type could not be determined.'}
        ];
    
        
        
        const depLegend = [
            {color: '#00F0FF', label: 'PYTHON', desc: 'Python source file (.py).'},
            {color: '#FFE600', label: 'JAVASCRIPT', desc: 'JavaScript source file (.js).'},
            {color: '#3178c6', label: 'TYPESCRIPT', desc: 'TypeScript source file (.ts).'},
            {color: '#BC13FE', label: 'HIGH IMPACT', desc: 'Central modules imported by many other files. "Traffic Hubs".'},
            {color: '#374151', label: 'STANDALONE', desc: 'Files with no detected imports or incoming dependencies. "Islands".'},
            {color: '#6b7280', label: 'UNKNOWN/OTHER', desc: 'Files with unmapped extensions or ambiguous types.'}
        ];
    
        
        function updateLegend(legendData) {
            const legend = document.getElementById('legend');
            const tooltip = document.getElementById('legend-tooltip');
            
            legend.innerHTML = '<h3>LEGEND</h3>';
            
            legendData.forEach(item => {
                const div = document.createElement('div');
                div.className = 'legend-item';
                div.innerHTML = `
                    <div class="legend-color" style="background: ${item.color}; color: ${item.color};"></div>
                    <span>${item.label}</span>
                `;
                
                if (item.desc) {
                    div.style.cursor = 'help';
                    div.addEventListener('mouseenter', (e) => {
                        tooltip.innerHTML = `<strong>${item.label}</strong>${item.desc}`;
                        tooltip.style.display = 'block';
                        tooltip.style.borderLeftColor = item.color; // Match border color
                    });
                    div.addEventListener('mousemove', (e) => {
                        // Position tooltip to the left of the mouse
                        const x = e.clientX - tooltip.offsetWidth - 15;
                        const y = e.clientY - 10;
                        tooltip.style.left = x + 'px';
                        tooltip.style.top = y + 'px';
                    });
                    div.addEventListener('mouseleave', () => {
                        tooltip.style.display = 'none';
                    });
                }
                legend.appendChild(div);
            });
        }
        
        // 3D-only mode: This function is replaced by window.switchGraph from html_generator.py
        // But we keep it for UI updates (title, legend, buttons)
        function switchGraph(type) {
            // Check if FILES view is requested - show coming soon message
            if (type === 'files' || type === 'dependency') {
                const message = 'üöß FILES view is coming soon! This feature is currently under development.';
                if (typeof showToast === 'function') {
                    showToast(message);
                } else {
                    alert(message);
                }
                addLogEntry('FILES view requested - coming soon');
                return; // Don't switch
            }
            
            currentGraphType = type;
            addLogEntry(`Switching to ${type.toUpperCase()} view...`);
            
            // Update toggle buttons (New Header Nav)
            document.querySelectorAll('.nav-link').forEach(btn => btn.classList.remove('active'));
            if (type === 'api') document.getElementById('nav-api').classList.add('active');
            // Support both old and new names for backward compatibility
            if (type === 'functions' || type === 'function_dependency') document.getElementById('nav-func').classList.add('active');
            
            // Update title (if element exists)
            let title = 'API CONNECTIONS';
            if (type === 'functions' || type === 'function_dependency') {
                title = 'FUNCTIONS';
            } else if (type === 'files' || type === 'dependency') {
                title = 'FILES';
            }
            const titleEl = document.getElementById('graph-title');
            if (titleEl) {
                titleEl.textContent = title;
            }
            
            // Update legend
            let legend = apiLegend;
            if (type === 'functions' || type === 'function_dependency') {
                legend = funcDepLegend;
            } else if (type === 'files' || type === 'dependency') {
                legend = depLegend;
            }
            updateLegend(legend);
            
            // If in diff mode, clear diff data and reload
            if (diffModeEnabled) {
                diffData = null;
                currentSnapshotData = null;
                previousSnapshotData = null;
                addLogEntry('Diff mode active - reloading snapshots for new graph type');
            }
            
            // Call the 3D switchGraph3D function (from html_generator.py)
            // This gets data from translator and renders 3D graph
            if (typeof window.switchGraph3D === 'function') {
                window.switchGraph3D(type);
            } else {
                console.error('[KG] window.switchGraph3D not available - 3D graph system not initialized');
            }
        }
        
        // Wrapper function that uses GraphDataTranslator (new unified system)
        // All graph data now goes through the translator -> renderer path
        function getEmbeddedGraphData(graphType, silent = false) {
            if (!window.GraphDataTranslator) {
                console.error('[KG] GraphDataTranslator not available - graph system not initialized');
                return { nodes: [], edges: [], summary: {}, report: {} };
            }
            
            // Use translator to get normalized graph data
            return window.GraphDataTranslator.translate(graphType, false);
        }
        
        async function loadGraphData(type) {
            return new Promise(async (resolve, reject) => {
            try {
                // Store type in a variable accessible to nested functions
                const graphType = type;
                renderStartTime = performance.now();
                addLogEntry('Loading graph data...');
                
                // Get normalized graph data via translator (unified system)
                let data = null;
                if (window.GraphDataTranslator) {
                    data = window.GraphDataTranslator.translate(type, false);
                    if (data && data.nodes && data.nodes.length > 0) {
                        console.log(`[KG] Loaded ${type} graph via translator: ${data.nodes.length} nodes, ${data.edges.length} edges`);
                    }
                }
                
                if (data && data.nodes && data.nodes.length > 0) {
                    // Data loaded via translator - already normalized
                } else {
                addLogEntry('Fetching graph data...');
                let endpoint = 'api-connections';
                if (type === 'files' || type === 'dependency') {
                    endpoint = 'dependencies';
                } else if (type === 'functions' || type === 'function_dependency') {
                    endpoint = 'function-dependencies';
                }
                const url = reportName 
                    ? `${apiUrl}/api/graph/${endpoint}?report=${encodeURIComponent(reportName)}`
                    : `${apiUrl}/api/graph/${endpoint}`;
                
                    console.log('[KG] Loading from:', url);
                    const loadingEl = document.getElementById('loading');
                    if (loadingEl) {
                        loadingEl.style.display = 'block';
                    }
                
                const response = await fetch(url);
                    console.log('[KG] Response:', response.status, response.statusText);
                
                if (!response.ok) {
                        const errorText = await response.text();
                        console.error('[KG] API Error:', response.status, errorText);
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                    data = await response.json();
                    console.log('[KG] Data received:', {
                        nodes: data.nodes?.length || 0,
                        edges: data.edges?.length || 0,
                        summary: data.summary
                    });
                
                if (data.error) {
                        console.error('[KG] Data error:', data.error);
                    throw new Error(data.error);
                    }
                }
                
                allNodes = data.nodes || [];
                allEdges = data.edges || [];
                
                console.log('[KG] Loaded nodes:', allNodes.map(n => ({id: n.id, label: n.label, type: n.type})));
                console.log('[KG] Loaded edges:', allEdges.map(e => {
                    const fromNode = allNodes.find(n => n.id === e.from);
                    const toNode = allNodes.find(n => n.id === e.to);
                    return {
                        from: e.from, 
                        to: e.to, 
                        label: e.label,
                        fromNode: fromNode?.label || 'NOT FOUND',
                        toNode: toNode?.label || 'NOT FOUND',
                        arrowDirection: `${fromNode?.label || e.from} ‚Üí ${toNode?.label || e.to}`,
                        arrows: e.arrows
                    };
                }));
                
                addLogEntry(`${allNodes.length} nodes, ${allEdges.length} edges loaded`);
                
                // Update info panel
                document.getElementById('node-count').textContent = data.summary?.total_nodes || allNodes.length;
                document.getElementById('edge-count').textContent = data.summary?.total_edges || allEdges.length;
                document.getElementById('high-impact-count').textContent = data.summary?.high_impact || 0;
                
                // Update orphaned count if available
                if (data.summary?.orphaned !== undefined) {
                    const orphanedEl = document.getElementById('orphaned-count');
                    if (orphanedEl) {
                        orphanedEl.textContent = data.summary.orphaned;
                    }
                    if (data.summary.orphaned > 0) {
                        addLogEntry(`${data.summary.orphaned} orphaned nodes detected`);
                    }
                }
                
                // Load project name
                if (data.report?.project?.name) {
                    // Use project name from embedded data
                    document.getElementById('project-name').textContent = 
                        (data.report.project.name || 'UNKNOWN').toUpperCase();
                } else if (apiUrl && !window.location.protocol.includes('file:')) {
                    // Try to fetch from API (only if not using embedded data)
                try {
                    const reportResponse = await fetch(`${apiUrl}/api/reports/latest`);
                    if (reportResponse.ok) {
                        const reportData = await reportResponse.json();
                        document.getElementById('project-name').textContent = 
                            (reportData.report?.project?.name || 'UNKNOWN').toUpperCase();
                    }
                } catch (e) {
                    console.warn('Could not load project name:', e);
                        document.getElementById('project-name').textContent = 'UNKNOWN';
                    }
                } else {
                    document.getElementById('project-name').textContent = 'UNKNOWN';
                }
                
                initGraph();
                resolve();
                
            } catch (error) {
                console.error('[KG] Failed to load graph data:', error);
                console.error('[KG] Error stack:', error.stack);
                addLogEntry(`ERROR: ${error.message}`);
                const loadingEl = document.getElementById('loading');
                if (loadingEl) {
                    loadingEl.innerHTML = `
                    <div style="color: var(--error);">
                        <h3>‚ùå FAILED TO LOAD GRAPH</h3>
                        <p>${error.message}</p>
                        <p style="margin-top: 10px; font-size: 10px; color: var(--text-secondary);">
                            Make sure the API server is running on ${apiUrl}
                        </p>
                            <p style="margin-top: 5px; font-size: 10px; color: var(--text-secondary);">
                                Check browser console (F12) for detailed error logs
                            </p>
                    </div>
                `;
                }
                reject(error);
            }
            });
        }
        
        function initGraph() {
            const container = document.getElementById('network-container');
            const loadingEl = document.getElementById('loading');
            if (loadingEl) {
                loadingEl.style.display = 'none';
            }
            
            // Clear edge animation system (but keep network alive)
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            animatedEdges = [];
            dashOffset = 0;
            
            // Enhance edges with animated dashes and ensure correct arrow direction
            const enhancedEdges = allEdges.map((edge, index) => {
                const enhanced = {...edge};
                
                // Log edge data for debugging (use allNodes array since nodes DataSet doesn't exist yet)
                const fromNode = allNodes.find(n => n.id === enhanced.from);
                const toNode = allNodes.find(n => n.id === enhanced.to);
                const edgeInfo = {
                    id: enhanced.id || `${enhanced.from}->${enhanced.to}`,
                    from: enhanced.from,
                    to: enhanced.to,
                    label: enhanced.label,
                    fromNode: fromNode?.label || 'NOT FOUND',
                    fromNodeType: fromNode?.type || 'unknown',
                    toNode: toNode?.label || 'NOT FOUND',
                    toNodeType: toNode?.type || 'unknown',
                    arrowDirection: `${fromNode?.label || enhanced.from} ‚Üí ${toNode?.label || enhanced.to}`,
                    arrows: enhanced.arrows
                };
                console.log(`[KG] Edge ${index}:`, JSON.stringify(edgeInfo, null, 2));
                
                // Ensure arrow points from source to target (from -> to)
                if (!enhanced.arrows) {
                    enhanced.arrows = { to: { enabled: true, scaleFactor: 0.7 } };
                } else if (!enhanced.arrows.to) {
                    enhanced.arrows.to = { enabled: true, scaleFactor: 0.7 };
                } else {
                    enhanced.arrows.to.enabled = true; // Ensure arrow is enabled
                }
                // Add dashes to all edges for animation (will be animated in direction from->to)
                enhanced.dashes = [8, 4]; // [dashLength, gapLength] - initial pattern
                return enhanced;
            });
            
            // Enhance nodes with glow effects and formatting
            const enhancedNodes = allNodes.map(node => {
                const enhanced = {...node};
                
                // Format label with brackets
                if (enhanced.label) {
                    if (currentGraphType === 'api') {
                        const method = enhanced.method || 'UNKNOWN';
                        const path = enhanced.path || enhanced.url || 'unknown';
                        enhanced.label = `[${method}] :: ${path}`;
                    } else {
                        enhanced.label = enhanced.label.toUpperCase();
                    }
                }
                
                // Add glow effect to color
                const baseColor = enhanced.color?.background || enhanced.color || '#7c3aed';
                enhanced.color = {
                    background: baseColor,
                    border: baseColor,
                    highlight: {
                        background: baseColor,
                        border: '#ffffff'
                    }
                };
                
                // Add shadow/glow via custom styling (OPTIMIZED - Consultant Recommendation)
                // Static glow baked into node (not animated) for performance
                // Only animated glow on hover/focus (handled in event handlers)
                enhanced.shadow = {
                    enabled: true,
                    color: baseColor,
                    size: 12,  // Slightly reduced for performance
                    x: 0,
                    y: 0
                };
                
                // Pulse animation for high impact nodes (CSS-based, not shadow-based)
                if (enhanced.high_impact) {
                    enhanced.font = {
                        ...enhanced.font,
                        size: (enhanced.font?.size || 11) + 1
                    };
                    // Add CSS class for pulse animation (more performant than animating shadow)
                    enhanced.className = (enhanced.className || '') + ' high-impact-pulse';
                }
                
                return enhanced;
            });
            
            // Update or create datasets
            if (nodes && edges) {
                // Network already exists - update the existing DataSets
                console.log('[KG] Updating existing graph data');
                nodes.clear();
                edges.clear();
                nodes.add(enhancedNodes);
                edges.add(enhancedEdges);
            } else {
                // First time - create new DataSets
                console.log('[KG] Creating new graph data');
                nodes = new vis.DataSet(enhancedNodes);
                edges = new vis.DataSet(enhancedEdges);
            }
            
            // Make nodes accessible to 3D transition code
            window.nodes = nodes;
            
            // Network options - v2.0 physics (heavier, more expensive feel)
            const options = {
                nodes: {
                    shape: 'dot',
                    font: {
                        color: '#E5E5E5',
                        size: 10,
                        face: 'JetBrains Mono',
                        align: 'center'
                    },
                    borderWidth: 2,
                    shadow: {
                        enabled: true,
                        color: 'rgba(124, 58, 237, 0.5)',  // Slightly reduced opacity for performance
                        size: 12,  // Reduced from 15 for better performance (Consultant Optimization)
                        x: 0,
                        y: 0
                    },
                    scaling: {
                        min: 10,
                        max: 50
                    }
                },
                edges: {
                    arrows: {
                        to: {
                            enabled: true,
                            scaleFactor: 0.7
                        }
                    },
                    font: {
                        color: '#E5E5E5',  // Off-white for better visibility
                        size: 10,
                        face: 'JetBrains Mono',
                        strokeWidth: 3,  // Text stroke for contrast
                        strokeColor: '#050505'  // Dark stroke for visibility
                    },
                    labelHighlightBold: true,
                    shadow: {
                        enabled: false
                    },
                    smooth: {
                        type: 'continuous',
                        roundness: 0.5
                    }
                },
                physics: {
                    enabled: physicsEnabled,  // Controlled by toggle button
                    stabilization: {
                        enabled: true,
                        iterations: 200,
                        updateInterval: 50,
                        onlyDynamicEdges: false,
                        fit: true  // Fit network to viewport after stabilization
                    },
                    barnesHut: {
                        theta: 0.5,  // Barnes-Hut approximation parameter (default: 0.5)
                        gravitationalConstant: -2000,
                        centralGravity: 0.1,
                        springLength: currentGraphType === 'api' ? 180 : 200,
                        springConstant: 0.04,
                        damping: 0.12,  // Increased for heavier feel
                        // Dynamic avoidOverlap based on node count (Consultant Optimization)
                        // For large graphs (>500 nodes), reduce to prevent CPU overload
                        // During stabilization, can be even lower, then increase when stable
                        avoidOverlap: (allNodes.length > 500) ? 0.5 : 1
                    },
                    // Consultant Recommendation: Adaptive physics for large graphs
                    adaptiveTimestep: allNodes.length > 500,
                    maxVelocity: allNodes.length > 500 ? 5 : 50  // Limit velocity for large graphs
                },
                interaction: {
                    hover: true,
                    tooltipDelay: 100,
                    zoomView: true,
                    dragView: true
                },
                layout: {
                    improvedLayout: true
                }
            };
            
            // Create or update network
            if (!network) {
                // First time - create network
                console.log('[KG] Creating new network');
                const data = { nodes: nodes, edges: edges };
                network = new vis.Network(container, data, options);
                
                // Make network accessible to 3D transition code
                window.network = network;
            } else {
                // Network already exists - data was updated above
                console.log('[KG] Network updated with new data - fitting view');
                console.log('[KG] Network object exists:', !!network);
                console.log('[KG] Nodes count:', nodes.length);
                console.log('[KG] Edges count:', edges.length);
                
                // Note: 3D graph switching is handled separately by switchGraph() from button clicks
                // Don't call switchGraph here to avoid infinite loops
                
                // Fit the view to show all nodes with animation
                try {
                    network.fit({
                        animation: {
                            duration: 500,
                            easingFunction: 'easeInOutQuad'
                        }
                    });
                } catch (e) {
                    console.error('[KG] Error fitting network:', e);
                }
            }
            
            // If in diff mode and diff data exists, apply diff visualization after network is created
            if (diffModeEnabled && diffData && currentSnapshotData) {
                setTimeout(() => {
                    applyDiffVisualization();
                }, 100);
            }
            
            // Calculate render time
            const renderTime = Math.round(performance.now() - renderStartTime);
            document.getElementById('render-time').textContent = `${renderTime}ms`;
            addLogEntry(`Graph rendered in ${renderTime}ms`);
            addLogEntry('Force simulation: STABLE');
            
            // Event handlers
            network.on('click', function(params) {
                if (params.nodes.length > 0) {
                    const nodeId = params.nodes[0];
                    const node = nodes.get(nodeId);
                    selectedNodeId = nodeId;
                    showNodeInfo(node);
                    
                    // Track time to insight (Second Consultation)
                    if (diffModeEnabled && diffModeEnabledAt && !firstInsightRecorded) {
                        const timeToInsight = Date.now() - diffModeEnabledAt;
                        metrics.diffMode.timeToFirstInsight.push(timeToInsight);
                        firstInsightRecorded = true;
                        console.log(`Time to first insight: ${timeToInsight}ms`);
                    }
                    
                    if (focusModeEnabled) {
                        applyFocusMode(nodeId);
                    }
                } else {
                    hideNodeInfo();
                    selectedNodeId = null;
                    if (focusModeEnabled) {
                        clearFocusMode();
                    }
                }
            });
            
            network.on('hoverNode', function(params) {
                container.style.cursor = 'pointer';
                // Intensify glow on hover (only on hover - Consultant Optimization)
                const node = nodes.get(params.node);
                if (node) {
                    const baseColor = node.color?.background || node.color || '#7c3aed';
                    nodes.update({
                        id: params.node,
                        shadow: {
                            enabled: true,
                            color: baseColor,
                            size: 20,  // Increased glow on hover (but not too extreme)
                            x: 0,
                            y: 0
                        }
                    });
                }
            });
            
            network.on('blurNode', function(params) {
                container.style.cursor = 'default';
                // Restore normal glow (static, not animated)
                const node = nodes.get(params.node);
                if (node) {
                    const baseColor = node.color?.background || node.color || '#7c3aed';
                    nodes.update({
                        id: params.node,
                        shadow: {
                            enabled: true,
                            color: baseColor,
                            size: 12,  // Static glow size (Consultant Optimization)
                            x: 0,
                            y: 0
                        }
                    });
                }
            });
            
            network.on('stabilizationEnd', function() {
                addLogEntry('Physics simulation stabilized');
                document.getElementById('force-sim').textContent = 'STABLE';
                
                // Recreate animated edges after stabilization (nodes are now in final positions)
                setTimeout(() => {
                    if (typeof createAnimatedEdges === 'function') {
                        createAnimatedEdges();
                        // Ensure animation is running
                        if (!animationFrameId) {
                            animateDashedLines();
                        }
                    }
                }, 500);
            });
            
            // Listen for stabilization progress to update UI
            network.on('stabilizationProgress', function(params) {
                const progress = Math.round((params.iterations / params.total) * 100);
                document.getElementById('force-sim').textContent = `STABILIZING ${progress}%`;
            });
            
            // Search functionality
            const searchInput = document.getElementById('search-input');
            let searchTimeout = null;
            
            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(function() {
                    const query = e.target.value.toLowerCase();
                    if (query === '') {
                        nodes.update(enhancedNodes);
                    } else {
                        const filtered = enhancedNodes.filter(node => {
                            return (node.label || '').toLowerCase().includes(query) ||
                                   (node.path || node.file_path || '').toLowerCase().includes(query) ||
                                   (node.method || '').toLowerCase().includes(query);
                        });
                        nodes.update(filtered);
                        addLogEntry(`Filtered to ${filtered.length} nodes`);
                    }
                }, 300);
            });
        }
        
        function showNodeInfo(node) {
            const infoDiv = document.getElementById('node-info');
            const consoleDiv = document.getElementById('console-log');
            if (consoleDiv) {
            consoleDiv.style.display = 'none';
            }
            
            // Get node type for header
            const nodeType = node.type || 'NODE';
            const nodeTypeLabel = nodeType === 'endpoint_function' ? 'ENDPOINT' : 
                                 nodeType === 'api_call_function' ? 'API CALL' :
                                 nodeType === 'file' ? 'FILE' : 'NODE';
            
            let html = `<h3>${nodeTypeLabel}</h3>`;
            
            if (currentGraphType === 'api') {
                const method = (node.method || 'UNKNOWN').toUpperCase();
                const path = node.path || node.url || 'unknown';
                const file = node.file || 'unknown';
                const line = node.line || '?';
                const connections = node.connections || 0;
                const highImpact = node.high_impact ? 'YES' : 'NO';
                
                html += `
                    <div class="stat">
                        <strong>METHOD:</strong>
                        <span class="value">${method}</span>
                    </div>
                    <div class="stat">
                        <strong>PATH:</strong>
                        <span class="value" style="max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${path}">${path.length > 25 ? path.substring(0, 22) + '...' : path}</span>
                    </div>
                    <div class="stat">
                        <strong>FILE:</strong>
                        <span class="value" style="max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${file}">${file.length > 25 ? file.substring(0, 22) + '...' : file}</span>
                    </div>
                    <div class="stat">
                        <strong>LINE:</strong>
                        <span class="value">${line}</span>
                    </div>
                    <div class="stat">
                        <strong>CONNECTIONS:</strong>
                        <span class="value">${connections}</span>
                    </div>
                    <div class="stat">
                        <strong>HIGH IMPACT:</strong>
                        <span class="value" style="color: ${highImpact === 'YES' ? '#ff003c' : '#00ff94'}">${highImpact}</span>
                    </div>
                `;
            } else {
                const filePath = node.file_path || node.file || 'unknown';
                const fileName = node.file_name || filePath.split('/').pop() || 'unknown';
                const extension = (node.extension || filePath.split('.').pop() || 'unknown').toUpperCase();
                const endpoints = node.endpoint_count || 0;
                const functions = node.function_count || 0;
                const imports = node.import_count || 0;
                const highImpact = node.high_impact ? 'YES' : 'NO';
                
                html += `
                    <div class="stat">
                        <strong>FILE:</strong>
                        <span class="value" style="max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${fileName}">${fileName.length > 25 ? fileName.substring(0, 22) + '...' : fileName}</span>
                    </div>
                    <div class="stat">
                        <strong>PATH:</strong>
                        <span class="value" style="max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${filePath}">${filePath.length > 25 ? filePath.substring(0, 22) + '...' : filePath}</span>
                    </div>
                    <div class="stat">
                        <strong>EXTENSION:</strong>
                        <span class="value">${extension}</span>
                    </div>
                    <div class="stat">
                        <strong>ENDPOINTS:</strong>
                        <span class="value">${endpoints}</span>
                    </div>
                    <div class="stat">
                        <strong>FUNCTIONS:</strong>
                        <span class="value">${functions}</span>
                    </div>
                    <div class="stat">
                        <strong>IMPORTS:</strong>
                        <span class="value">${imports}</span>
                    </div>
                    <div class="stat">
                        <strong>HIGH IMPACT:</strong>
                        <span class="value" style="color: ${highImpact === 'YES' ? '#ff003c' : '#00ff94'}">${highImpact}</span>
                    </div>
                `;
            }
            
            infoDiv.innerHTML = html;
            infoDiv.classList.add('visible');
        }
        
        function hideNodeInfo() {
            document.getElementById('node-info').classList.remove('visible');
            document.getElementById('console-log').style.display = 'block';
        }
        
        function resetView() {
            if (network) {
                network.fit({
                    animation: {
                        duration: 1000,
                        easingFunction: 'easeInOutQuad'
                    }
                });
                addLogEntry('View reset to fit all nodes');
            }
        }
        
        function togglePhysics() {
            if (network) {
                physicsEnabled = !physicsEnabled;
                network.setOptions({ physics: { enabled: physicsEnabled } });
                document.getElementById('physics-btn').textContent = `PHYSICS: ${physicsEnabled ? 'ON' : 'OFF'}`;
                document.getElementById('physics-btn').classList.toggle('active', physicsEnabled);
                document.getElementById('force-sim').textContent = physicsEnabled ? 'STABLE' : 'FROZEN';
                addLogEntry(`Physics simulation ${physicsEnabled ? 'enabled' : 'disabled'}`);
            }
        }
        
        function toggleLabels() {
            if (nodes && allNodes) {
                labelsEnabled = !labelsEnabled;
                const update = allNodes.map(node => ({
                    ...node,
                    font: { ...(node.font || {}), size: labelsEnabled ? 10 : 0 }
                }));
                nodes.update(update);
                document.getElementById('labels-btn').textContent = `LABELS: ${labelsEnabled ? 'ON' : 'OFF'}`;
                document.getElementById('labels-btn').classList.toggle('active', labelsEnabled);
            }
        }
        
        function toggleFocusMode() {
            focusModeEnabled = !focusModeEnabled;
            document.getElementById('focus-btn').textContent = `FOCUS: ${focusModeEnabled ? 'ON' : 'OFF'}`;
            document.getElementById('focus-btn').classList.toggle('active', focusModeEnabled);
            
            if (!focusModeEnabled) {
                clearFocusMode();
            } else if (selectedNodeId) {
                applyFocusMode(selectedNodeId);
            }
            addLogEntry(`Focus mode ${focusModeEnabled ? 'enabled' : 'disabled'}`);
        }
        
        // ============================================
        // DIFF MODE FUNCTIONS (Consultation Standards)
        // ============================================
        
        async function toggleDiffMode() {
            diffModeEnabled = !diffModeEnabled;
            const diffBtn = document.getElementById('diff-btn');
            const diffPanel = document.getElementById('diff-panel');
            const diffSummary = document.getElementById('diff-summary');
            const diffFilters = document.getElementById('diff-filters');
            const graveyardZone = document.getElementById('graveyard-zone');
            
            diffBtn.textContent = `DIFF: ${diffModeEnabled ? 'ON' : 'OFF'}`;
            diffBtn.classList.toggle('active', diffModeEnabled);
            
            if (diffModeEnabled) {
                // Track metrics
                diffModeEnabledAt = Date.now();
                firstInsightRecorded = false;
                metrics.diffMode.enabled++;
                
                // Show diff UI
                diffPanel.style.display = 'block';
                diffFilters.style.display = 'flex';
                
                // Load available reports
                await loadAvailableReports();
                
                // Set defaults: latest vs second-latest
                if (availableReports.length >= 2) {
                    document.getElementById('current-snapshot').value = availableReports[0].filename;
                    document.getElementById('previous-snapshot').value = availableReports[1].filename;
                }
                
                addLogEntry('Diff mode enabled - select snapshots to compare');
            } else {
                // Hide diff UI
                diffPanel.style.display = 'none';
                diffSummary.style.display = 'none';
                diffFilters.style.display = 'none';
                graveyardZone.classList.remove('visible');
                
                // Reset to normal view
                if (currentGraphType === 'api') {
                    loadGraphData('api');
                    // Update navigation buttons after graph loads
                    setTimeout(updateNavigationButtons, 500);
                } else {
                    loadGraphData('dependency');
                }
                
                addLogEntry('Diff mode disabled - returning to normal view');
            }
        }
        
        async function loadAvailableReports() {
            try {
                const response = await fetch(`${apiUrl}/api/reports/list`);
                if (!response.ok) throw new Error('Failed to load reports');
                
                const data = await response.json();
                availableReports = data.reports || [];
                
                // Populate dropdowns (fallback)
                const currentSelect = document.getElementById('current-snapshot');
                const previousSelect = document.getElementById('previous-snapshot');
                
                currentSelect.innerHTML = '';
                previousSelect.innerHTML = '';
                
                availableReports.forEach((report, index) => {
                    const date = new Date(report.generated_at);
                    const label = `#${availableReports.length - index} - ${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;
                    
                    const option1 = document.createElement('option');
                    option1.value = report.filename;
                    option1.textContent = label;
                    currentSelect.appendChild(option1);
                    
                    const option2 = document.createElement('option');
                    option2.value = report.filename;
                    option2.textContent = label;
                    previousSelect.appendChild(option2);
                });
                
                // Initialize timeline scrubber if we have reports
                if (availableReports.length >= 2) {
                    initTimelineScrubber();
                }
                
                addLogEntry(`Loaded ${availableReports.length} reports`);
            } catch (error) {
                console.error('Failed to load reports:', error);
                addLogEntry(`ERROR: Failed to load reports - ${error.message}`);
            }
        }
        
        function initTimelineScrubber() {
            const timelineTrack = document.getElementById('timeline-track');
            const timelineScrubber = document.getElementById('timeline-scrubber');
            const snapshotDropdowns = document.getElementById('snapshot-dropdowns');
            
            if (!timelineTrack || availableReports.length < 2) {
                return; // Fallback to dropdowns
            }
            
            // Show timeline, hide dropdowns
            timelineScrubber.style.display = 'block';
            snapshotDropdowns.style.display = 'none';
            
            // Clear existing markers
            timelineTrack.innerHTML = '';
            
            // Create timeline markers
            availableReports.forEach((report, index) => {
                const marker = document.createElement('div');
                marker.className = 'timeline-marker';
                marker.dataset.index = index;
                marker.dataset.filename = report.filename;
                
                const date = new Date(report.generated_at);
                const position = (index / (availableReports.length - 1)) * 100;
                
                marker.style.left = `${position}%`;
                
                const label = document.createElement('div');
                label.className = 'timeline-marker-label';
                label.textContent = `#${availableReports.length - index}`;
                marker.appendChild(label);
                
                marker.addEventListener('click', () => {
                    // Toggle selection
                    const isSelected = marker.classList.contains('selected');
                    document.querySelectorAll('.timeline-marker').forEach(m => m.classList.remove('selected'));
                    if (!isSelected) {
                        marker.classList.add('selected');
                    }
                });
                
                timelineTrack.appendChild(marker);
            });
            
            // Initialize handles (default: latest vs second-latest)
            const handlePrevious = document.getElementById('timeline-handle-previous');
            const handleCurrent = document.getElementById('timeline-handle-current');
            
            if (availableReports.length >= 2) {
                // Previous: second-latest (index 1)
                const prevPosition = (1 / (availableReports.length - 1)) * 100;
                handlePrevious.style.left = `${prevPosition}%`;
                handlePrevious.dataset.index = '1';
                handlePrevious.dataset.filename = availableReports[1].filename;
                
                // Current: latest (index 0)
                handleCurrent.style.left = '100%';
                handleCurrent.dataset.index = '0';
                handleCurrent.dataset.filename = availableReports[0].filename;
                
                // Update dropdowns to match
                document.getElementById('previous-snapshot').value = availableReports[1].filename;
                document.getElementById('current-snapshot').value = availableReports[0].filename;
                
                // Make handles draggable
                makeHandleDraggable(handlePrevious, 'previous');
                makeHandleDraggable(handleCurrent, 'current');
            }
        }
        
        function makeHandleDraggable(handle, type) {
            const track = document.getElementById('timeline-track');
            let isDragging = false;
            
            handle.addEventListener('mousedown', (e) => {
                isDragging = true;
                e.preventDefault();
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const trackRect = track.getBoundingClientRect();
                const x = e.clientX - trackRect.left;
                const percentage = Math.max(0, Math.min(100, (x / trackRect.width) * 100));
                
                handle.style.left = `${percentage}%`;
                
                // Find closest marker
                const markers = Array.from(document.querySelectorAll('.timeline-marker'));
                let closestMarker = null;
                let closestDistance = Infinity;
                
                markers.forEach(marker => {
                    const markerPos = parseFloat(marker.style.left);
                    const distance = Math.abs(percentage - markerPos);
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestMarker = marker;
                    }
                });
                
                if (closestMarker) {
                    handle.style.left = closestMarker.style.left;
                    handle.dataset.index = closestMarker.dataset.index;
                    handle.dataset.filename = closestMarker.dataset.filename;
                    
                    // Update corresponding dropdown
                    if (type === 'previous') {
                        document.getElementById('previous-snapshot').value = closestMarker.dataset.filename;
                    } else {
                        document.getElementById('current-snapshot').value = closestMarker.dataset.filename;
                    }
                }
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
        }
        
        async function compareSnapshots() {
            const currentFilename = document.getElementById('current-snapshot').value;
            const previousFilename = document.getElementById('previous-snapshot').value;
            
            if (!currentFilename || !previousFilename) {
                addLogEntry('ERROR: Please select both snapshots');
                showToast('Please select both snapshots', 'error');
                return;
            }
            
            if (currentFilename === previousFilename) {
                addLogEntry('ERROR: Cannot compare snapshot to itself');
                showToast('Cannot compare snapshot to itself', 'error');
                return;
            }
            
            addLogEntry('Loading snapshots for comparison...');
            document.getElementById('loading').style.display = 'block';
            
            try {
                // Load both snapshots in parallel
                let endpoint = 'api-connections';
                if (currentGraphType === 'files' || currentGraphType === 'dependency') {
                    endpoint = 'dependencies';
                } else if (currentGraphType === 'functions' || currentGraphType === 'function_dependency') {
                    endpoint = 'function-dependencies';
                }
                const [currentResponse, previousResponse] = await Promise.all([
                    fetch(`${apiUrl}/api/graph/${endpoint}?report=${encodeURIComponent(currentFilename)}`),
                    fetch(`${apiUrl}/api/graph/${endpoint}?report=${encodeURIComponent(previousFilename)}`)
                ]);
                
                if (!currentResponse.ok) {
                    throw new Error(`Failed to load current snapshot: ${currentResponse.statusText}`);
                }
                if (!previousResponse.ok) {
                    throw new Error(`Failed to load previous snapshot: ${previousResponse.statusText}`);
                }
                
                currentSnapshotData = await currentResponse.json();
                previousSnapshotData = await previousResponse.json();
                
                // Validate data
                if (!currentSnapshotData.nodes || !previousSnapshotData.nodes) {
                    throw new Error('Invalid snapshot data: missing nodes');
                }
                
                // Compute diff client-side (instant, no API call)
                const computeStart = performance.now();
                diffData = computeDiffClientSide(currentSnapshotData, previousSnapshotData);
                const computeTime = performance.now() - computeStart;
                
                // Track performance metrics (Second Consultation)
                if (metrics && metrics.performance) {
                    metrics.performance.diffComputationTime.push(computeTime);
                }
                
                const added = diffData.added_endpoints.length;
                const removed = diffData.removed_endpoints.length;
                const changed = diffData.changed_endpoints.length;
                
                addLogEntry(`Diff computed in ${computeTime.toFixed(2)}ms: ${added} added, ${removed} removed, ${changed} changed`);
                
                if (added === 0 && removed === 0 && changed === 0) {
                    showToast('No differences found between snapshots', 'info');
                } else {
                    showToast(`Found ${added + removed + changed} changes`, 'success');
                }
                
                // Apply diff visualization
                applyDiffVisualization();
                
                // Show diff summary
                renderDiffSummary(diffData);
                
            } catch (error) {
                console.error('Failed to compare snapshots:', error);
                addLogEntry(`ERROR: ${error.message}`);
                showToast(`Error: ${error.message}`, 'error');
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast visible ${type}`;
            toast.style.borderColor = type === 'error' ? 'var(--error)' : 
                                      type === 'info' ? 'var(--accent)' : 'var(--success)';
            
            setTimeout(() => {
                toast.classList.remove('visible');
            }, 3000);
        }
        
        // Diff comparison strategy: "Free Comparison" (Consultant Recommendation)
        // Both snapshots stabilize independently for easier visual comparison
        // Alternative: "Anchored Comparison" would try to match layouts (more complex)
        let diffComparisonStrategy = 'free'; // 'free' or 'anchored'
        
        function computeDiffClientSide(current, previous) {
            // OPTIMIZED - Consultant Recommendation: Use Maps for O(1) lookups
            const currentKeys = new Map(); // key -> node
            const previousKeys = new Map(); // key -> node
            
            // For API graph: use method:path as key
            // For dependency graph: use file_path as key
            const getNodeKey = (node) => {
                if (currentGraphType === 'api') {
                    return `${node.method || 'UNKNOWN'}:${node.path || node.url || 'unknown'}`;
                } else {
                    return node.file_path || node.id;
                }
            };
            
            // Build key maps (O(n) instead of O(n¬≤) lookups)
            (current.nodes || []).forEach(node => {
                const key = getNodeKey(node);
                currentKeys.set(key, node);
            });
            
            (previous.nodes || []).forEach(node => {
                const key = getNodeKey(node);
                previousKeys.set(key, node);
            });
            
            // Find added, removed, changed (optimized with Map lookups)
            const added = [];
            const removed = [];
            const changed = [];
            
            // Check current nodes
            currentKeys.forEach((node, key) => {
                if (!previousKeys.has(key)) {
                    added.push(node);
                } else {
                    // Compare for changes (only check relevant properties for performance)
                    const prevNode = previousKeys.get(key);
                    if (hasNodeChanged(node, prevNode)) {
                        changed.push(node);
                    }
                }
            });
                
            // Check previous nodes for removed
            previousKeys.forEach((node, key) => {
                if (!currentKeys.has(key)) {
                    removed.push(node);
                }
            });
            
            // Build node ID to key maps for edges (optimized)
            const currentNodeMap = new Map();
            (current.nodes || []).forEach(node => {
                currentNodeMap.set(node.id, getNodeKey(node));
            });
            
            const previousNodeMap = new Map();
            (previous.nodes || []).forEach(node => {
                previousNodeMap.set(node.id, getNodeKey(node));
            });
            
            // Compare edges (optimized with Set for O(1) lookups)
            const getEdgeKey = (edge) => {
                const fromKey = currentNodeMap.get(edge.from) || previousNodeMap.get(edge.from) || edge.from;
                const toKey = currentNodeMap.get(edge.to) || previousNodeMap.get(edge.to) || edge.to;
                return `${fromKey}->${toKey}`;
            };
            
            const currentEdgeKeys = new Set((current.edges || []).map(getEdgeKey));
            const previousEdgeKeys = new Set((previous.edges || []).map(getEdgeKey));
            
            const addedEdges = (current.edges || []).filter(edge => {
                return !previousEdgeKeys.has(getEdgeKey(edge));
            });
            
            const removedEdges = (previous.edges || []).filter(edge => {
                return !currentEdgeKeys.has(getEdgeKey(edge));
            });
            
            return {
                added_endpoints: added,
                removed_endpoints: removed,
                changed_endpoints: changed,
                added_edges: addedEdges,
                removed_edges: removedEdges,
                added_endpoint_keys: new Set(added.map(getNodeKey)),
                removed_endpoint_keys: new Set(removed.map(getNodeKey)),
                changed_endpoint_keys: new Set(changed.map(getNodeKey)),
                comparison_strategy: diffComparisonStrategy
            };
        }
        
        // Optimized node comparison (only check relevant properties)
        function hasNodeChanged(currentNode, previousNode) {
            // Compare only properties that matter for visualization
            const relevantProps = ['method', 'path', 'url', 'file_path', 'connections', 'high_impact', 'color', 'size'];
            
            for (const prop of relevantProps) {
                if (currentNode[prop] !== previousNode[prop]) {
                    return true;
                }
            }
            
            // Deep compare color object if it exists
            if (currentNode.color && previousNode.color) {
                if (JSON.stringify(currentNode.color) !== JSON.stringify(previousNode.color)) {
                    return true;
                }
            }
            
            return false;
        }
        
        function applyDiffVisualization() {
            if (!diffData || !currentSnapshotData) return;
            
            // Progressive disclosure: hide unchanged nodes by default
            const enhancedNodes = (currentSnapshotData.nodes || []).map(node => {
                const nodeKey = currentGraphType === 'api' 
                    ? `${node.method || 'UNKNOWN'}:${node.path || node.url || 'unknown'}`
                    : (node.file_path || node.id);
                
                let diffStatus = 'unchanged';
                if (diffData.added_endpoint_keys.has(nodeKey)) {
                    diffStatus = 'added';
                } else if (diffData.removed_endpoint_keys.has(nodeKey)) {
                    diffStatus = 'removed';
                } else if (diffData.changed_endpoint_keys.has(nodeKey)) {
                    diffStatus = 'changed';
                }
                
                // Apply diff styling
                const enhanced = {...node};
                
                if (diffStatus === 'added') {
                    enhanced.color = {
                        background: '#00FFA3',  // Brighter mint
                        border: '#00FFA3',
                        highlight: { background: '#00FFA3', border: '#ffffff' }
                    };
                    enhanced.diffStatus = 'added';
                    enhanced.className = 'node-added';
                } else if (diffStatus === 'removed') {
                    // Hollow ghost (outline only, NO fill) - Consultation Standard
                    // Position in graveyard zone (offset to bottom)
                    const container = document.getElementById('network-container');
                    const containerRect = container.getBoundingClientRect();
                    const graveyardY = containerRect.height - 100; // Bottom area
                    
                    // Refined color: #FF1744 (Material Red - better contrast)
                    enhanced.color = {
                        background: 'transparent',  // Hollow - no fill
                        border: '#FF1744',  // Material red (accessible)
                        highlight: { background: 'transparent', border: '#FF1744' }
                    };
                    enhanced.opacity = 0.4;
                    enhanced.borderWidth = 3;  // Thicker border for visibility
                    enhanced.dashes = true;  // Dashed outline
                    enhanced.shape = 'dot';  // Accessibility: consistent shape
                    enhanced.diffStatus = 'removed';
                    enhanced.className = 'node-removed';
                    enhanced.isRemoved = true;
                    
                    // Offset to graveyard zone (right side, bottom)
                    if (!enhanced.x) enhanced.x = containerRect.width * 0.8;
                    if (!enhanced.y) enhanced.y = graveyardY;
                    enhanced.fixed = { x: true, y: true }; // Keep in graveyard
                    enhanced.physics = false; // Don't participate in physics
                } else if (diffStatus === 'changed') {
                    // Yellow border ring (not full recolor) - Consultation Standard
                    const originalColor = node.color?.background || node.color || '#7c3aed';
                    // Refined color: #FFB300 (Amber - better contrast than yellow)
                    enhanced.color = {
                        background: originalColor,  // Preserve original color
                        border: '#FFB300',  // Amber border (accessible, high contrast)
                        highlight: { background: originalColor, border: '#FFB300' }
                    };
                    enhanced.borderWidth = 4;  // Thicker border for visibility
                    enhanced.shape = 'dot';  // Accessibility: consistent shape
                    enhanced.diffStatus = 'changed';
                    enhanced.className = 'node-changed';
                } else {
                    // Unchanged - hide by default (progressive disclosure)
                    enhanced.opacity = showUnchangedNodes ? 0.2 : 0;
                    enhanced.diffStatus = 'unchanged';
                }
                
                // Format label with brackets (if not already formatted)
                if (enhanced.label && !enhanced.label.includes('::')) {
                    if (currentGraphType === 'api') {
                        const method = enhanced.method || node.method || 'UNKNOWN';
                        const path = enhanced.path || node.path || node.url || 'unknown';
                        enhanced.label = `[${method}] :: ${path}`;
                    } else {
                        enhanced.label = (enhanced.label || node.label || 'NODE').toUpperCase();
                    }
                }
                
                // Semantic labels with icons
                if (diffStatus !== 'unchanged') {
                    const icons = {
                        added: 'üÜï',
                        removed: '‚ùå',
                        changed: '‚úèÔ∏è'
                    };
                    // Prepend icon to existing label
                    enhanced.label = `${icons[diffStatus]} ${enhanced.label || node.label || 'NODE'}`;
                }
                
                return enhanced;
            });
            
            // Apply filters
            let filteredNodes = enhancedNodes;
            if (!activeDiffFilters.includes('all')) {
                filteredNodes = enhancedNodes.filter(node => {
                    if (activeDiffFilters.includes('added') && node.diffStatus === 'added') return true;
                    if (activeDiffFilters.includes('removed') && node.diffStatus === 'removed') return true;
                    if (activeDiffFilters.includes('changed') && node.diffStatus === 'changed') return true;
                    return false;
                });
            } else {
                // In "all" mode, still hide unchanged (progressive disclosure)
                filteredNodes = enhancedNodes.filter(node => node.diffStatus !== 'unchanged' || showUnchangedNodes);
            }
            
            // Update nodes with animation triggers
            if (nodes && network) {
                // Store previous node IDs for animation detection
                const previousNodeIds = new Set(nodes.getIds());
                const newNodeIds = new Set(filteredNodes.map(n => n.id));
                
                // Clear and add new nodes
                nodes.clear();
                nodes.add(filteredNodes);
                
                // Trigger animations for new nodes
                filteredNodes.forEach(node => {
                    if (node.diffStatus === 'added' && !previousNodeIds.has(node.id)) {
                        // Bloom-in animation will be triggered by CSS class
                        const nodeElement = document.querySelector(`[data-node-id="${node.id}"]`);
                        if (nodeElement) {
                            nodeElement.classList.add('node-added');
                        }
                    }
                });
            }
            
            // Update edges with diff status
            const enhancedEdges = (currentSnapshotData.edges || []).map(edge => {
                const edgeKey = `${edge.from}->${edge.to}`;
                const isAdded = diffData.added_edges.some(e => `${e.from}->${e.to}` === edgeKey);
                const isRemoved = diffData.removed_edges.some(e => `${e.from}->${e.to}` === edgeKey);
                
                const enhanced = {...edge};
                
                if (isAdded) {
                    enhanced.color = { color: '#00FFA3', opacity: 0.8 };
                    enhanced.width = 2; // Slightly thicker for visibility
                    enhanced.className = 'added-edge'; // For animation
                } else if (isRemoved) {
                    enhanced.color = { color: '#FF1744', opacity: 0.3 };
                    enhanced.dashes = true;
                    enhanced.width = 1; // Thinner for removed
                } else {
                    enhanced.opacity = showUnchangedNodes ? 0.3 : 0.1;
                    enhanced.width = 1;
                }
                
                return enhanced;
            });
            
            if (edges && network) {
                edges.clear();
                edges.add(enhancedEdges);
            }
            
            // Update graveyard zone (Second Consultation Specification)
            updateGraveyardZone(diffData.removed_endpoints);
            
            // Update network container height to accommodate graveyard
            const container = document.getElementById('network-container');
            if (diffData.removed_endpoints.length > 0) {
                container.style.paddingBottom = '120px'; // Space for graveyard
            } else {
                container.style.paddingBottom = '0px';
            }
            
            // Track visualization render time (Second Consultation)
            const renderTime = performance.now() - renderStartTime;
            if (metrics && metrics.performance) {
                metrics.performance.visualizationRenderTime.push(renderTime);
            }
            
            // Force network redraw to apply animations
            if (network) {
                network.redraw();
            }
            
            addLogEntry(`Diff visualization applied in ${renderTime.toFixed(2)}ms`);
        }
        
        function updateGraveyardZone(removedNodes) {
            const graveyardZone = document.getElementById('graveyard-zone');
            const graveyardItems = document.getElementById('graveyard-items');
            const graveyardCount = document.getElementById('graveyard-count');
            
            if (!removedNodes || removedNodes.length === 0) {
                graveyardZone.classList.remove('visible');
                graveyardItems.innerHTML = '<div class="graveyard-empty">‚úÖ No endpoints removed</div>';
                return;
            }
            
            graveyardZone.classList.add('visible');
            graveyardCount.textContent = removedNodes.length;
            
            // Clear existing items
            graveyardItems.innerHTML = '';
            
            // Show max 3 items initially (scroll for more)
            const maxVisible = 3;
            const visibleItems = removedNodes.slice(0, maxVisible);
            const hiddenCount = removedNodes.length - maxVisible;
            
            visibleItems.forEach(node => {
                const item = document.createElement('div');
                item.className = 'graveyard-item';
                
                const label = currentGraphType === 'api' 
                    ? `${node.method || 'UNKNOWN'} ${node.path || node.url || 'unknown'}`
                    : (node.file_path || node.id);
                
                const deps = node.connections || node.dependencyCount || 0;
                
                item.innerHTML = `
                    <span class="graveyard-item-label">‚ùå ${label}</span>
                    <span class="graveyard-item-deps">${deps} deps</span>
                    <button class="graveyard-item-action" onclick="highlightRemovedNode('${node.id || label}')">View Impact</button>
                `;
                
                // Click to highlight former connections
                item.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('graveyard-item-action')) {
                        highlightRemovedNodeConnections(node);
                    }
                });
                
                graveyardItems.appendChild(item);
            });
            
            // Show "show more" if there are hidden items
            if (hiddenCount > 0) {
                const showMore = document.createElement('div');
                showMore.className = 'graveyard-item';
                showMore.style.justifyContent = 'center';
                showMore.style.cursor = 'pointer';
                showMore.textContent = `‚ñº Show ${hiddenCount} more removed endpoints`;
                showMore.addEventListener('click', () => {
                    // Expand to show all
                    removedNodes.slice(maxVisible).forEach(node => {
                        const item = document.createElement('div');
                        item.className = 'graveyard-item';
                        const label = currentGraphType === 'api' 
                            ? `${node.method || 'UNKNOWN'} ${node.path || node.url || 'unknown'}`
                            : (node.file_path || node.id);
                        const deps = node.connections || node.dependencyCount || 0;
                        item.innerHTML = `
                            <span class="graveyard-item-label">‚ùå ${label}</span>
                            <span class="graveyard-item-deps">${deps} deps</span>
                            <button class="graveyard-item-action" onclick="highlightRemovedNode('${node.id || label}')">View Impact</button>
                        `;
                        item.addEventListener('click', (e) => {
                            if (!e.target.classList.contains('graveyard-item-action')) {
                                highlightRemovedNodeConnections(node);
                            }
                        });
                        graveyardItems.insertBefore(item, showMore);
                    });
                    showMore.remove();
                });
                graveyardItems.appendChild(showMore);
            }
        }
        
        function toggleGraveyard() {
            const graveyardZone = document.getElementById('graveyard-zone');
            graveyardZone.classList.toggle('collapsed');
        }
        
        function highlightRemovedNode(nodeId) {
            // Find the removed node and highlight its former connections
            if (!diffData || !previousSnapshotData) return;
            
            const removedNode = diffData.removed_endpoints.find(n => 
                (n.id || `${n.method}:${n.path}`) === nodeId
            );
            
            if (removedNode) {
                highlightRemovedNodeConnections(removedNode);
            }
        }
        
        function highlightRemovedNodeConnections(removedNode) {
            if (!network || !previousSnapshotData) return;
            
            // Find edges that connected to this removed node in previous snapshot
            const connectedEdges = (previousSnapshotData.edges || []).filter(edge => 
                edge.from === removedNode.id || edge.to === removedNode.id
            );
            
            // Highlight connected nodes in current graph
            const connectedNodeIds = new Set();
            connectedEdges.forEach(edge => {
                connectedNodeIds.add(edge.from);
                connectedNodeIds.add(edge.to);
            });
            
            // Update node opacity to highlight connections
            const updates = [];
            if (nodes) {
                nodes.forEach(node => {
                    const isConnected = connectedNodeIds.has(node.id);
                    updates.push({
                        id: node.id,
                        opacity: isConnected ? 1.0 : 0.2,
                        borderWidth: isConnected ? 4 : 2
                    });
                });
                nodes.update(updates);
            }
            
            addLogEntry(`Highlighted ${connectedNodeIds.size} nodes connected to removed endpoint`);
            
            // Reset after 3 seconds
            setTimeout(() => {
                if (nodes) {
                    const resetUpdates = [];
                    nodes.forEach(node => {
                        resetUpdates.push({
                            id: node.id,
                            opacity: node.diffStatus === 'unchanged' && !showUnchangedNodes ? 0 : 1,
                            borderWidth: 2
                        });
                    });
                    nodes.update(resetUpdates);
                }
            }, 3000);
        }
        
        function renderDiffSummary(diffData) {
            const summaryDiv = document.getElementById('diff-summary');
            const contentDiv = document.getElementById('diff-summary-content');
            
            const addedCount = diffData.added_endpoints.length;
            const removedCount = diffData.removed_endpoints.length;
            const changedCount = diffData.changed_endpoints.length;
            
            // Calculate max for bar scaling
            const maxCount = Math.max(addedCount, removedCount, changedCount, 1);
            
            // Calculate dependency counts (blast radius)
            const removedDeps = diffData.removed_endpoints.reduce((sum, node) => {
                return sum + (node.connections || 0);
            }, 0);
            
            const addedDeps = diffData.added_endpoints.reduce((sum, node) => {
                return sum + (node.connections || 0);
            }, 0);
            
            const isHighRisk = removedDeps > 10;
            
            let html = '';
            
            // Added
            html += `
                <div class="diff-item">
                    <div class="diff-item-header">
                        <span class="diff-item-icon">‚úÖ</span>
                        <span class="diff-item-label">ADDED</span>
                    </div>
                    <div class="impact-bar">
                        <div class="impact-bar-fill added" style="width: ${(addedCount / maxCount) * 100}%"></div>
                    </div>
                    <div class="diff-item-details">${addedCount} endpoints (${addedDeps} deps)</div>
                </div>
            `;
            
            // Removed
            html += `
                <div class="diff-item ${isHighRisk ? 'high-risk' : ''}">
                    <div class="diff-item-header">
                        <span class="diff-item-icon">‚ö†Ô∏è</span>
                        <span class="diff-item-label">REMOVED</span>
                        ${isHighRisk ? '<span class="risk-badge">HIGH RISK</span>' : ''}
                    </div>
                    <div class="impact-bar">
                        <div class="impact-bar-fill removed" style="width: ${(removedDeps / Math.max(maxCount * 2, removedDeps)) * 100}%"></div>
                    </div>
                    <div class="diff-item-details">${removedCount} endpoints (${removedDeps} deps affected${isHighRisk ? '!' : ''})</div>
                </div>
            `;
            
            // Changed
            html += `
                <div class="diff-item">
                    <div class="diff-item-header">
                        <span class="diff-item-icon">‚úèÔ∏è</span>
                        <span class="diff-item-label">CHANGED</span>
                    </div>
                    <div class="impact-bar">
                        <div class="impact-bar-fill changed" style="width: ${(changedCount / maxCount) * 100}%"></div>
                    </div>
                    <div class="diff-item-details">${changedCount} nodes (minor)</div>
                </div>
            `;
            
            contentDiv.innerHTML = html;
            summaryDiv.style.display = 'block';
            
            // Update filter badges
            document.getElementById('added-count').textContent = addedCount;
            document.getElementById('removed-count').textContent = removedCount;
            document.getElementById('changed-count').textContent = changedCount;
        }
        
        function applyDiffFilter(filter) {
            const pills = document.querySelectorAll('.filter-pill');
            pills.forEach(pill => pill.classList.remove('active'));
            
            const clickedPill = document.querySelector(`[data-filter="${filter}"]`);
            if (clickedPill) {
                clickedPill.classList.add('active');
            }
            
            if (filter === 'all') {
                activeDiffFilters = ['all'];
            } else {
                activeDiffFilters = activeDiffFilters.includes('all') ? [filter] : 
                    activeDiffFilters.includes(filter) ? 
                        activeDiffFilters.filter(f => f !== filter) : 
                        [...activeDiffFilters, filter];
                
                if (activeDiffFilters.length === 0) {
                    activeDiffFilters = ['all'];
                    document.querySelector('[data-filter="all"]').classList.add('active');
                }
            }
            
            // Track filter usage (Second Consultation)
            if (metrics && metrics.diffMode && metrics.diffMode.filterUsage) {
                if (filter === 'all') {
                    metrics.diffMode.filterUsage.all++;
                } else if (metrics.diffMode.filterUsage[filter] !== undefined) {
                    metrics.diffMode.filterUsage[filter]++;
                }
            }
            
            // Reapply visualization with new filters
            if (diffData) {
                applyDiffVisualization();
            }
            
            addLogEntry(`Filter: ${activeDiffFilters.join(', ')}`);
        }
        
        function toggleShowContext() {
            showUnchangedNodes = !showUnchangedNodes;
            const contextBtn = document.getElementById('context-btn');
            contextBtn.textContent = showUnchangedNodes ? 'HIDE CONTEXT' : 'SHOW CONTEXT';
            contextBtn.classList.toggle('active', showUnchangedNodes);
            
            if (diffData) {
                applyDiffVisualization();
            }
            addLogEntry(`Show context: ${showUnchangedNodes ? 'ON' : 'OFF'}`);
        }
        
        function generateDiffStory() {
            if (!diffData) {
                addLogEntry('ERROR: No diff data available. Compare snapshots first.');
                return;
            }
            
            const storyPanel = document.getElementById('diff-story-panel');
            const storyContent = document.getElementById('diff-story-content');
            
            // Generate narrative using template-based approach (Second Consultation)
            const narrative = generateDiffNarrative(diffData, currentSnapshotData, previousSnapshotData);
            
            storyContent.innerHTML = narrative;
            storyPanel.style.display = 'block';
            addLogEntry('Diff story generated');
            
            // Track metrics
            if (typeof metrics !== 'undefined') {
                metrics.diffMode.narrativeViews++;
            }
        }
        
        // Template-based narrative generation (Second Consultation Specification)
        function generateDiffNarrative(diffData, currentSnapshot, previousSnapshot) {
            const narratives = [];
            
            const added = diffData.added_endpoints.length;
            const removed = diffData.removed_endpoints.length;
            const changed = diffData.changed_endpoints.length;
            const addedEdges = diffData.added_edges.length;
            const removedEdges = diffData.removed_edges.length;
            
            // Calculate impact metrics
            const removedDeps = diffData.removed_endpoints.reduce((sum, node) => {
                return sum + (node.connections || node.dependencyCount || 0);
            }, 0);
            
            const addedDeps = diffData.added_endpoints.reduce((sum, node) => {
                return sum + (node.connections || node.dependencyCount || 0);
            }, 0);
            
            // High-impact removals
            const criticalRemovals = diffData.removed_endpoints.filter(ep => 
                (ep.connections || ep.dependencyCount || 0) > 5
            );
            
            if (criticalRemovals.length > 0) {
                narratives.push({
                    type: 'warning',
                    icon: '‚ö†Ô∏è',
                    title: 'High-Impact Removals Detected',
                    message: `${criticalRemovals.length} endpoint(s) with ${removedDeps} total dependencies were removed.`,
                    details: criticalRemovals.map(ep => ({
                        endpoint: currentGraphType === 'api' 
                            ? `${ep.method || 'UNKNOWN'} ${ep.path || ep.url || 'unknown'}`
                            : (ep.file_path || ep.id),
                        deps: ep.connections || ep.dependencyCount || 0
                    }))
                });
            }
            
            // Architectural improvements (pattern detection)
            const patterns = detectArchitecturalPatterns(diffData);
            if (patterns.includes('oauth_added')) {
                narratives.push({
                    type: 'positive',
                    icon: '‚úÖ',
                    title: 'Architecture Improvement',
                    message: 'Added OAuth2 authentication flow. This modernizes authentication and improves security.',
                    details: null
                });
            }
            
            if (patterns.includes('graphql_added')) {
                narratives.push({
                    type: 'positive',
                    icon: '‚úÖ',
                    title: 'GraphQL Adoption',
                    message: 'Added GraphQL endpoints. This suggests a move toward more flexible API querying.',
                    details: null
                });
            }
            
            // Breaking changes detection
            const breakingChanges = detectBreakingChanges(diffData);
            if (breakingChanges.length > 0) {
                narratives.push({
                    type: 'error',
                    icon: 'üö®',
                    title: 'Potential Breaking Changes',
                    message: `${breakingChanges.length} endpoint(s) changed in ways that may break existing clients.`,
                    details: breakingChanges
                });
            }
            
            // Build HTML from narratives
            let story = '';
            
            // Executive Summary
            story += `
                <div class="story-section">
                    <h4>üìä EXECUTIVE SUMMARY</h4>
                    <p>Between these snapshots, your codebase has <span class="story-highlight">${added} new endpoints</span>, 
                    <span class="story-warning">${removed} removed endpoints</span>, and ${changed} modified endpoints.</p>
                    ${(added + removed) > 5 ? '<p><strong>‚ö†Ô∏è This is a major architectural change.</strong></p>' : ''}
                </div>
            `;
            
            // Render narratives
            narratives.forEach(narrative => {
                story += `
                    <div class="story-section ${narrative.type}">
                        <h4>${narrative.icon} ${narrative.title}</h4>
                        <p>${narrative.message}</p>
                        ${narrative.details ? `
                            <ul style="margin-left: 16px; color: var(--text-secondary); font-size: 10px; margin-top: 8px;">
                                ${narrative.details.map(detail => 
                                    `<li>${detail.endpoint || detail}${detail.deps ? ` (${detail.deps} deps)` : ''}</li>`
                                ).join('')}
                            </ul>
                        ` : ''}
                    </div>
                `;
            });
            
            // What Changed
            story += `
                <div class="story-section">
                    <h4>üîÑ WHAT CHANGED</h4>
                    ${added > 0 ? `<p><span class="story-highlight">+${added} endpoints added</span> (${addedDeps} new connections)</p>` : ''}
                    ${removed > 0 ? `<p><span class="story-warning">-${removed} endpoints removed</span> (${removedDeps} connections affected)</p>` : ''}
                    ${changed > 0 ? `<p>~${changed} endpoints modified</p>` : ''}
                    ${addedEdges > 0 ? `<p>+${addedEdges} new connections established</p>` : ''}
                    ${removedEdges > 0 ? `<p>-${removedEdges} connections broken</p>` : ''}
                </div>
            `;
            
            // Impact Analysis
            story += `
                <div class="story-section">
                    <h4>üí• IMPACT ANALYSIS</h4>
                    ${removedDeps > 10 ? 
                        `<p class="story-warning">‚ö†Ô∏è <strong>HIGH RISK:</strong> ${removedDeps} dependencies are affected by removals. 
                        This could break downstream consumers.</p>` : 
                        removedDeps > 0 ?
                        '<p>‚úÖ Low to moderate impact. Removals affect minimal dependencies.</p>' :
                        '<p>‚úÖ No dependencies affected by removals.</p>'
                    }
                    ${addedDeps > 0 ? 
                        `<p>‚úÖ <strong>Growth:</strong> ${addedDeps} new connections suggest expanding functionality.</p>` : 
                        ''
                    }
                </div>
            `;
            
            // Migration Path (if removals exist)
            if (removed > 0) {
                story += `
                    <div class="story-section">
                        <h4>üõ†Ô∏è MIGRATION PATH</h4>
                        <p>${removed} endpoint${removed > 1 ? 's have' : ' has'} been removed. Consider:</p>
                        <ul style="margin-left: 16px; color: var(--text-secondary); font-size: 10px;">
                            <li>Updating API documentation</li>
                            <li>Notifying dependent services</li>
                            <li>Checking for deprecated endpoint usage</li>
                            ${removedDeps > 10 ? '<li><strong>Reviewing breaking changes with team</strong></li>' : ''}
                        </ul>
                    </div>
                `;
            }
            
            // Recommendations
            story += `
                <div class="story-section">
                    <h4>üí° RECOMMENDATIONS</h4>
                    ${added > removed ? 
                        '<p>‚úÖ <strong>Expansion:</strong> More endpoints added than removed. Architecture is growing.</p>' : 
                        removed > added ? 
                        '<p>‚ö†Ô∏è <strong>Refactoring:</strong> More endpoints removed than added. Likely consolidation or cleanup.</p>' :
                        '<p>üìä <strong>Stable:</strong> Balanced changes. Architecture is evolving incrementally.</p>'
                    }
                    ${changed > 0 ? 
                        '<p>üîç <strong>Review modified endpoints:</strong> Check parameter changes, response formats, or behavior updates.</p>' : 
                        ''
                    }
                </div>
            `;
            
            return story;
        }
        
        // Architectural pattern detection (Second Consultation)
        function detectArchitecturalPatterns(diffData) {
            const patterns = [];
            
            // OAuth detection
            const oauthEndpoints = diffData.added_endpoints.filter(ep => 
                (ep.path || ep.url || '').includes('/oauth') || 
                (ep.path || ep.url || '').includes('/token') ||
                (ep.path || ep.url || '').includes('/auth')
            );
            if (oauthEndpoints.length >= 2) patterns.push('oauth_added');
            
            // GraphQL adoption
            const graphqlEndpoints = diffData.added_endpoints.filter(ep =>
                (ep.path || ep.url || '').includes('/graphql')
            );
            if (graphqlEndpoints.length > 0) patterns.push('graphql_added');
            
            // RESTful versioning
            const versionedEndpoints = diffData.added_endpoints.filter(ep =>
                /\/v\d+\//.test(ep.path || ep.url || '')
            );
            if (versionedEndpoints.length >= 3) patterns.push('versioning_added');
            
            return patterns;
        }
        
        // Breaking changes detection (Second Consultation)
        function detectBreakingChanges(diffData) {
            // Changed endpoints where method or path structure changed
            return diffData.changed_endpoints.filter(ep => {
                // Check if method changed (would need previous version data)
                // For now, check if path structure changed significantly
                const path = ep.path || ep.url || '';
                const pathSegments = path.split('/').filter(s => s);
                
                // If path has version number change, it's likely breaking
                if (/\/v\d+\//.test(path)) {
                    return true;
                }
                
                // If endpoint has many connections and changed, might be breaking
                if ((ep.connections || ep.dependencyCount || 0) > 5) {
                    return true;
                }
                
                return false;
            });
        }
        
        function closeDiffStory() {
            document.getElementById('diff-story-panel').style.display = 'none';
        }
        
        function applyFocusMode(nodeId) {
            if (!network) return;
            
            // Get connected nodes
            const connectedNodeIds = new Set([nodeId]);
            const connectedEdges = allEdges.filter(edge => 
                edge.from === nodeId || edge.to === nodeId
            );
            
            connectedEdges.forEach(edge => {
                connectedNodeIds.add(edge.from);
                connectedNodeIds.add(edge.to);
            });
            
            // Dim all nodes
            const updates = allNodes.map(node => {
                const isSelected = node.id === nodeId;
                const isNeighbor = connectedNodeIds.has(node.id) && !isSelected;
                
                return {
                    id: node.id,
                    opacity: isSelected ? 1.0 : (isNeighbor ? 0.8 : 0.2)
                };
            });
            
            nodes.update(updates);
            
            // Dim edges
            const edgeUpdates = allEdges.map(edge => {
                const isConnected = edge.from === nodeId || edge.to === nodeId;
                return {
                    id: edge.id || `${edge.from}-${edge.to}`,
                    opacity: isConnected ? 0.8 : 0.1
                };
            });
            
            edges.update(edgeUpdates);
        }
        
        function clearFocusMode() {
            if (!network) return;
            
            // Restore all nodes
            const updates = allNodes.map(node => ({
                id: node.id,
                opacity: 1.0
            }));
            nodes.update(updates);
            
            // Restore all edges
            const edgeUpdates = allEdges.map(edge => ({
                id: edge.id || `${edge.from}-${edge.to}`,
                opacity: edge.opacity || 0.5
            }));
            edges.update(edgeUpdates);
        }
        
        function exportScreenshot() {
            try {
                // Check if 3D renderer exists
                if (typeof renderer3d !== 'undefined' && renderer3d && renderer3d.domElement) {
                    // Capture Three.js canvas directly
                    const canvas = renderer3d.domElement;
                    const dataURL = canvas.toDataURL('image/png');
                    
                    // Create download link
                    const link = document.createElement('a');
                    link.download = `rohkun-3d-graph-${Date.now()}.png`;
                    link.href = dataURL;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Show success message
                    if (typeof showToast === 'function') {
                        showToast('SNAPSHOT SAVED!');
                    }
                    if (typeof addLogEntry === 'function') {
                        addLogEntry('Screenshot exported successfully');
                    }
                } else {
                    // Fallback: try html2canvas on canvas-3d container
                    if (typeof html2canvas !== 'undefined') {
                        const container = document.getElementById('canvas-3d');
                        if (container) {
                            html2canvas(container, {
                                backgroundColor: '#050505',
                                scale: 2,
                                useCORS: true,
                                logging: false,
                                allowTaint: true
                            }).then(canvas => {
                                const link = document.createElement('a');
                                link.download = `rohkun-3d-graph-${Date.now()}.png`;
                                link.href = canvas.toDataURL('image/png');
                                document.body.appendChild(link);
                                link.click();
                                document.body.removeChild(link);
                                
                                if (typeof showToast === 'function') {
                                    showToast('SNAPSHOT SAVED!');
                                }
                            }).catch(error => {
                                console.error('Screenshot failed:', error);
                                if (typeof showToast === 'function') {
                                    showToast('SNAPSHOT FAILED');
                                }
                            });
                        } else {
                            alert('Canvas not found');
                        }
                    } else {
                        alert('Screenshot functionality not available');
                    }
                }
            } catch (error) {
                console.error('Screenshot error:', error);
                if (typeof showToast === 'function') {
                    showToast('SNAPSHOT FAILED: ' + error.message);
                }
            }
        }
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('visible');
            setTimeout(() => {
                toast.classList.remove('visible');
            }, 3000);
        }
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (network) {
                network.redraw();
            }
        });
        
        // Animated dashed line system - directly on vis.js edges
        let animationFrameId = null;
        let dashOffset = 0; // Global dash offset for animation
        
        function initEdgeAnimationSystem() {
            // In 3D mode, there's no vis.js network - skip edge animation
            if (typeof network === 'undefined' || !network || !edges) return;
            
            console.log('[KG] Edge animation initialized with', edges.length, 'edges');
            
            // Start animation loop to update edge dash patterns
            animateEdgeDashes();
        }
        
        function animateEdgeDashes() {
            if (!network || !edges) {
                animationFrameId = requestAnimationFrame(animateEdgeDashes);
                return;
            }
            
            // Update global dash offset for animation (slower speed)
            // Positive offset moves dashes in the direction from -> to (following arrow)
            dashOffset += 0.3; // Move dashes forward in arrow direction
            if (dashOffset > 12) dashOffset = 0; // Reset when pattern repeats
            
            // Update all edges with animated dash pattern
            const edgeArray = edges.get();
            edgeArray.forEach((edge, index) => {
                // Verify edge direction: from -> to (arrow should point from source to target)
                if (!edge.from || !edge.to) return;
                
                // Ensure arrow is pointing in correct direction (from -> to)
                const arrowDirection = edge.arrows?.to?.enabled !== false; // Default to true if not specified
                
                // Calculate offset based on edge index for variety (each edge moves at slightly different phase)
                // Movement direction: from source (edge.from) to target (edge.to) - following arrow direction
                // For API connections: API Call (from) ‚Üí Endpoint (to) - dashes move from API call toward endpoint
                const edgePhase = (dashOffset + (index * 0.3)) % 12;
                
                // Create moving dash effect by shifting the dash pattern
                // The pattern moves from source to target (in arrow direction)
                const dashLength = 8;
                const gapLength = 4;
                const totalLength = dashLength + gapLength;
            
                // Calculate which part of the pattern should be visible
                // Positive offset = movement from source to target (arrow direction)
                const offset = Math.floor(edgePhase) % totalLength;
                
                // Create shifted dash array to simulate movement in arrow direction (from -> to)
                // The pattern moves from source node (edge.from) toward target node (edge.to)
                // This creates the visual effect of dashes "flowing" along the edge in the arrow's direction
                let newDashes;
                if (offset === 0) {
                    // Full dash pattern at start - dash at beginning, gap follows
                    newDashes = [dashLength, gapLength];
                } else if (offset < dashLength) {
                    // Dash is moving forward: part of dash visible at start, gap moving in
                    // This creates forward movement from source to target
                    newDashes = [dashLength - offset, gapLength, offset];
                } else {
                    // Gap is visible, next dash is moving in from source side
                    // This continues the forward flow toward the target
                    const gapOffset = offset - dashLength;
                    newDashes = [gapLength - gapOffset, dashLength, gapOffset];
                }
                
                // Update edge with new dash pattern and ensure arrow direction is correct
                const currentDashes = edge.dashes;
                const needsUpdate = !currentDashes || JSON.stringify(currentDashes) !== JSON.stringify(newDashes);
                const needsArrowFix = !edge.arrows || !edge.arrows.to || edge.arrows.to.enabled !== true;
                
                if (needsUpdate || needsArrowFix) {
                    const update = {
                        id: edge.id,
                        dashes: newDashes
                    };
                
                    // Ensure arrow points from -> to
                    if (needsArrowFix) {
                        update.arrows = {
                            to: {
                                enabled: true,
                                scaleFactor: 0.7
                            }
                        };
                    }
                    
                    edges.update(update);
                }
            });
            
            animationFrameId = requestAnimationFrame(animateEdgeDashes);
        }
        
        // Mouse tracking for dynamic grid background (OPTIMIZED - Consultant Recommendation)
        // Use requestAnimationFrame to debounce updates and prevent jitter
        let mouseX = 0;
        let mouseY = 0;
        let mouseUpdateScheduled = false;
        
        function updateMousePosition() {
            document.documentElement.style.setProperty('--mouse-x', mouseX + 'px');
            document.documentElement.style.setProperty('--mouse-y', mouseY + 'px');
            mouseUpdateScheduled = false;
        }
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            // Schedule update on next animation frame (debounced)
            if (!mouseUpdateScheduled) {
                mouseUpdateScheduled = true;
                requestAnimationFrame(updateMousePosition);
            }
        });
        
        // Initialize on load
        window.addEventListener('load', function() {
            updateLegend(apiLegend);
            
            // 3D-only mode: Initialize 3D view directly (no 2D network)
            if (typeof THREE !== 'undefined') {
                console.log('[INIT] Starting 3D-only mode...');
                init3DView();
            } else {
                console.error('[INIT] THREE.js not available!');
            }
            
            setTimeout(() => initEdgeAnimationSystem(), 5000);
            
            // Initialize edge animation system after a delay (wait for network to be ready)
            // Only in 2D mode (when network exists)
            setTimeout(() => {
                if (typeof network !== 'undefined' && network) {
                    initEdgeAnimationSystem();
                }
            }, 2000);
            
            // Add periodic console updates (only in 2D mode)
            setInterval(() => {
                if (typeof network !== 'undefined' && network && physicsEnabled) {
                    const stats = network.getScale();
                    // Can add more dynamic stats here
                }
            }, 5000);
            
            // Keyboard shortcuts (Consultation Standard)
            document.addEventListener('keydown', function(e) {
                // Diff mode shortcuts
                if (diffModeEnabled) {
                    if (e.key === 'a' || e.key === 'A') {
                        e.preventDefault();
                        applyDiffFilter('all');
                    } else if (e.key === '+' || e.key === '=') {
                        e.preventDefault();
                        applyDiffFilter('added');
                    } else if (e.key === '-') {
                        e.preventDefault();
                        applyDiffFilter('removed');
                    } else if (e.key === '~') {
                        e.preventDefault();
                        applyDiffFilter('changed');
                    } else if (e.key === 'c' || e.key === 'C') {
                        e.preventDefault();
                        toggleShowContext();
                    } else if (e.key === 's' || e.key === 'S') {
                        e.preventDefault();
                        generateDiffStory();
                    } else if (e.key === 'Escape') {
                        closeDiffStory();
                    }
                }
                
                // Global shortcuts
                if (e.key === 'd' || e.key === 'D') {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        toggleDiffMode();
                    }
                } else if (e.key === 'f' || e.key === 'F') {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        document.getElementById('search-input').focus();
                    }
                } else if (e.key === 'r' || e.key === 'R') {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        resetView();
                    }
                }
            });
        });
    </script>
    <!-- CODE OVERLAY MODAL -->
    <div id="code-overlay" class="modal-overlay" onclick="closeCodeOverlay(event)">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 id="code-title">NODE_NAME</h2>
                <button class="close-btn" onclick="closeCodeOverlay()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="code-meta" id="code-meta" style="margin-bottom: 15px; font-size: 0.9rem; color: var(--accent); border-bottom: 1px solid var(--border); padding-bottom: 10px;">
                    <!-- Meta tags -->
                </div>
                <div id="connections-list" style="max-height: 400px; overflow-y: auto;">
                    <!-- Connections will be injected here -->
                </div>
                <pre id="code-block" style="display:none;"><code id="code-content" class="language-python">
                </code></pre>
            </div>
        </div>
    </div>

    <!-- REPORT MODAL -->
    <div id="report-modal" class="modal-overlay" onclick="toggleReportModal(event)">
        <div class="modal-content glass-panel large" onclick="event.stopPropagation()" style="text-align: center; padding: 60px 40px; position: relative;">
            <button class="close-btn" onclick="toggleReportModal(event)" style="position: absolute; top: 20px; right: 20px; background: transparent; border: none; color: var(--text-muted); font-size: 2rem; cursor: pointer; line-height: 1; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">√ó</button>
            <div class="modal-header" style="margin-bottom: 30px;">
                <h2 style="font-size: 32px; margin-bottom: 16px; color: var(--accent);">üöß COMING SOON</h2>
                <p style="color: var(--text-secondary); font-size: 16px; line-height: 1.6;">
                    The Report feature is currently under development.<br>
                    Check back soon for detailed project analytics and insights!
                </p>
            </div>
        </div>
    </div>

    <!-- HELP MODAL -->
    <div id="help-modal" class="modal-overlay" onclick="toggleHelpModal(event)" style="display: none;">
        <div class="modal-content glass-panel large" onclick="event.stopPropagation()" style="position: relative;">
            <button class="close-btn" onclick="toggleHelpModal(event)" style="position: absolute; top: 20px; right: 20px; background: transparent; border: none; color: var(--text-muted); font-size: 2rem; cursor: pointer; line-height: 1; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">√ó</button>
            <div class="modal-header">
                <h2 style="color: var(--accent);">üìñ HELP & LEGEND</h2>
            </div>
            <div class="modal-body" style="overflow-y: auto; max-height: calc(80vh - 80px);">
                <div id="help-content">
                    <h3 style="color: var(--accent-light); margin-top: 0; margin-bottom: 20px; font-size: 1.2rem;">APIS & DEPENDENCIES VISUALIZATION GUIDE</h3>
                    
                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üé® NODE COLORS</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 20px; height: 20px; background: #7c3aed; border-radius: 3px; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">Purple (#7c3aed)</strong> - API Endpoints (default for API view)
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 20px; height: 20px; background: #BC13FE; border-radius: 3px; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">Hot Pink (#BC13FE)</strong> - High Impact Nodes (critical connections, overrides other colors)
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 20px; height: 20px; background: #00F0FF; border-radius: 3px; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">Neon Cyan (#00F0FF)</strong> - Files view default, Python files (.py)
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 20px; height: 20px; background: #FF003C; border-radius: 3px; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">Cyber Red (#FF003C)</strong> - Functions view default, DELETE methods
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 20px; height: 20px; background: #F59E0B; border-radius: 3px; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">Amber (#F59E0B)</strong> - JavaScript files (.js)
                            </div>
                            <div style="margin-bottom: 12px; padding-left: 30px; font-size: 0.9rem; color: var(--text-secondary);">
                                <strong>API Method Colors:</strong> GET (Blue #3b82f6), POST (Mint #00FF94), PUT (Yellow #FFE600), PATCH (Cyan #00F0FF), OPTIONS/HEAD (Gray #6b7280)
                            </div>
                            <div style="margin-bottom: 12px; padding-left: 30px; font-size: 0.9rem; color: var(--text-secondary);">
                                <strong>File Type Colors:</strong> TypeScript (#3178c6), React/JSX (#61dafb), Go (#00add8), Java (#ed8b00), Ruby (#cc342d), PHP (#777bb4), C# (#239120), Rust (#ce422b), C/C++ (#00599c), Unknown (#6b7280)
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üîó CONNECTION LINES</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 40px; height: 2px; background: rgba(255,255,255,0.15); vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">White Lines (15% opacity)</strong> - Normal connections showing relationships (API calls, dependencies, imports)
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="display: inline-block; width: 40px; height: 2px; background: #ffffff; vertical-align: middle; margin-right: 10px;"></span>
                                <strong style="color: #fff;">White Lines (100% opacity)</strong> - Highlighted connections when a node is selected
                            </div>
                            <div style="margin-bottom: 12px;">
                                <span style="color: #00ff94; font-size: 1.2rem; vertical-align: middle; margin-right: 10px;">‚ñ∂</span>
                                <strong style="color: #fff;">Mint Green Arrows (#00ff94)</strong> - Show direction of connection (from source to target node)
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üî∑ NODE SHAPES</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Icosahedron (20-sided sphere)</strong> - API view nodes
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Dodecahedron (12-sided gem)</strong> - Functions view nodes
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Box (Building)</strong> - Files/Dependencies view nodes (2D city layout)
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üñ±Ô∏è INTERACTIONS</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Single Click</strong> - Select a node to highlight its connections. Other nodes dim.
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Double Click</strong> - Open details modal showing node name, method, and connected nodes list.
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Click Background</strong> - Deselect and reset all highlights.
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Drag</strong> - Pan the view around.
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Scroll</strong> - Zoom in/out.
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üîç SEARCH</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                Type in the search box to filter nodes by name. If only one node matches, it will be automatically selected and highlighted.
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">üìä GRAPH TYPES</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">APIs</strong> - Shows API endpoints (functions that define endpoints) and API calls (functions that call APIs). Nodes are Icosahedrons. Default color: Purple. Colors based on HTTP method (GET=Blue, POST=Mint, PUT=Yellow, DELETE=Red, PATCH=Cyan).
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Dependencies (Files)</strong> - Shows file dependencies and imports. Nodes are Boxes (buildings) in a 2D city layout. Default color: Neon Cyan. Colors based on file extension (Python=Cyan, JavaScript=Amber, TypeScript=Blue, etc.).
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #fff;">Functions</strong> - Shows function call dependencies (which functions call which other functions). Nodes are Dodecahedrons. Default color: Cyber Red.
                            </div>
                        </div>
                    </section>

                    <section style="margin-bottom: 30px;">
                        <h4 style="color: #fff; margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 8px;">‚öôÔ∏è PHYSICS & LAYOUT</h4>
                        <div style="line-height: 1.8;">
                            <div style="margin-bottom: 12px;">
                                Nodes use force-directed physics to organize themselves. Connected nodes are attracted to each other, while unconnected nodes repel. This creates a natural, readable layout.
                            </div>
                            <div style="margin-bottom: 12px;">
                                The center node (with most connections) is fixed, and other nodes arrange around it in a spiral pattern.
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

